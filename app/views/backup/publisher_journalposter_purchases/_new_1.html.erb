
	<style>
		
		.container-cc {
			/*width: 600px;*/
			/*margin-left: auto;
			margin-right: auto;*/
			/*min-height: 800px;*/
		}
		.input-cc {
			font-family: Arial, Helvetica, sans-serif;
			color: #404040;			
			font-size: 16px;
			width: 300px;
			height: 24px;
			border-style:solid;
			border-radius: 0px;
			background-color: #fff;
			border-color: #478A3E;
			border-width: 1px;
			padding-left: 6px;
		}
		.input-cc:focus {
			border-color: #478A3E;
			color: #000;
			-webkit-box-shadow: 0 0 10px #88E87B;
			-moz-box-shadow: 0 0 10px #88E87B;
			box-shadow: 0 0 10px #88E87B;
		}
		.input-cc-exp {
			font-family: Arial, Helvetica, sans-serif;
			color: #404040;			
			font-size: 16px;
			width: 100px;
			height: 24px;
			border-style:solid;
			border-radius: 0px;
			background-color: #fff;
			border-color: #478A3E;
			border-width: 1px;
			padding-left: 6px;
		}
		.input-cc-exp:focus {
			border-color: #478A3E;
			color: #000;
			-webkit-box-shadow: 0 0 10px #88E87B;
			-moz-box-shadow: 0 0 10px #88E87B;
			box-shadow: 0 0 10px #88E87B;
		}
		.input-label-cc {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 14px;
			font-weight: 200;
			color: #333;
			width: 300px;
			height: 18px;
		}
		span.input-label-cc-title {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 14px;
			font-weight: 200;
			/*color: #214025;*/
			color: 96C785;
			width: 300px;
			height: 18px;
		}
		.sign-btn-cc {
		  	color: #D4F76A;
		  	display: inline-block;
		  	text-decoration: none; 
		  	width: 308px;
		  	height: 30px;
		  	background: linear-gradient(#000, #000);
		  	text-shadow: 1px 1px 1px #0E86B2; 
		  	border-radius: 6px;
		}
		.sign-btn-cc:focus {
		  background: #CCC; 
		  color: #5F7A2A;
		  box-shadow: inset 0 1px 0 rgba(200,200,200,0.2);
		}
		.sign-btn-cc:hover { 
		  box-shadow: inset 0 1px 1px rgba(255,255,255,0.2), 
		  inset 0 1.5em 1em rgba(255,255,255,0.3);
		}
		.sign-btn-cc:active { 
		  box-shadow: inset 0 1px 1px rgba(255,255,255,0.2), 
		  inset 0 1.5em 1em rgba(0,0,0,0.3); 
		}
		.space-cc {
			height: 6px;
		}
		.container-cc p {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 14px;
			color: #666;
		}
		span.cc-title {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 20px;
			color: #D98D2D;
		}
		span.cc-title-sub {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 18px;
			color: #A9D996;
		}
		.success {
			color: #ACDDE3;		
			background: url("/assets/submit_form_empty.png") no-repeat 278px 1px;		
		}		
		.error {
			color: #FC7777;
			background: url("/assets/submit_form_empty.png") no-repeat 278px 1px;		
			border-color: #851717; 						
		}
		.required {
			background: url("/assets/submit_form_empty.png") no-repeat 278px 1px;		
		}
		.error-label {
			/*color: #851717;*/		
			color: #FC7777;
		}
		/*.required-label {
			color: orange;
		}*/
		.show-errors p {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 13px;
			color: red;			
		}		
		
		/*
		#D98D2D	knowstory logo orange
		#96C785 knowstory logo green dark 
		#A9D996 knowstory logo green light
		#214025 footer green
		background-color: rgba( 65, 183, 55, 0.92); nav green
		background-color: #41B737;	nav green		
		*/ 
		
		#test {
			background-color: #fff;
			width: 20px;
			height: 20px;
		}
		#test:hover {
			cursor:pointer;
		}
		
	</style>
	
	<header>
		<%= render 'share/backtotop' %>
	</header>

	<div class="container-cc">
					
		<div class="pad-left-20">
			<span class="cc-title">Journal Poster</span>
		</div>
		<div style="height: 10px;"></div>
		<div class="pad-left-20">
			<span class="cc-title-sub"><%= @poster_text %></span>
		</div>
		
		<div style="height: 30px;"></div>
		
		<div class="pad-left-20" style="width: 570px;">
			<p><%= @msg %></p>
		</div>
		<div style="height: 50px;"></div>

		<a name="anchor1"></a>    		      		     		

		<div class="pad-left-20">
			<table>
				<tr>
					<td>
						<!-- (c) 2005, 2014. Authorize.Net is a registered trademark of CyberSource Corporation --> 
						<div class="AuthorizeNetSeal"> 
							<script type="text/javascript" language="javascript">var ANS_customer_id="2ce1d520-8781-492b-bf4e-6bb66cdb77fd";</script>
							<script type="text/javascript" language="javascript" src="//verify.authorize.net/anetseal/seal.js" ></script>
							<a href="http://www.authorize.net/" id="AuthorizeNetText" target="_blank">Credit Card Merchant Services</a>
						</div> 
					</td>
					<td style="width: 50px;"></td>
					<td>
						<span id="siteseal"><script type="text/javascript" src="https://seal.godaddy.com/getSeal?sealID=P1hRsTCDgbUVDzeqOtTuQpa40RPj0n9n2wWuC8c2R0naY95O6fHW9luLdYH"></script></span>
					</td>
				</tr>
			</table>
		</div>
		
		<div style="height: 30px;"></div>

		<div class="pad-left-20">

			<%= form_for :sim_transaction, :html => {:id => 'form_transact'}, :url => AuthorizeNet::SIM::Transaction::Gateway::TEST do |f| %>
				<%= sim_fields(@sim_transaction) %>
				
				<input type="hidden" name="x_test_request" value="TRUE">
				<table style="text-align: left;">

					<tr>					
						<td style="width: 200px;"></td>
						<td style="width: 400px;">
							<div id="errors" class="show-errors"><p></p></div>
						</td>
					</tr>
					<tr><td class="space-cc"></td><td></td></tr>					
					<tr>
						<td style="width: 200px;"></td>
						<td style="width: 400px;">
				  			<%= label_tag 'x_amount', "Total: #{number_to_currency(@amount)}", class: "input-label-cc" %>
						</td>
					</tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<!-- <tr><td><span class="input-label-cc-title">Card Information</span></td><td></td></tr> -->
					<tr><td class="space-cc"></td><td></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_card_num', 'Credit Card Number', class: "input-label-cc" %>						
						</td>
						<td>
				  			<%= text_field_tag 'x_card_num','', size: 40, class: "input-cc", :autofocus => true %>						
						</td>				
					</tr>
					<tr><td class="space-cc"></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_card_code', 'CCV', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_card_code','788', :size => 4, class: "input-cc-exp" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_exp_date', 'Expiration Date (MMYY)', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_exp_date','0916', size: 40, class: "input-cc-exp" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td><span class="input-label-cc-title">Name on card</span></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_first_name', 'First Name', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_first_name','Eric', size: 40, class: "input-cc" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_last_name', 'Last Name', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_last_name','Dent', size: 40, class: "input-cc" %>
						</td>				
					</tr>
					
					<% if false %>					
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr>
						<td>
							<span class="input-label-cc-title">Card's billing address</span><br>
							<span class="input-label-cc-title">(for Authorize.net)</span>
						</td>
						<td></td>
					</tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_address', 'Address', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_address','45021 RR 3', :size => 40, class: "input-cc" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_city', 'City', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_city','Solway', :size => 40, class: "input-cc" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_state', 'State', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_state','MN', :size => 40, class: "input-cc" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_zip', 'Zip', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_zip','56678', :size => 40, class: "input-cc-exp" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_country', 'Country', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_country','USA', :size => 40, class: "input-cc" %>
						</td>				
					</tr>
					<% end %>
					
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td><span class="input-label-cc-title">Email for a copy of this purchase (*optional)</span></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr>
						<td>
				  			<%= label_tag 'x_email', 'Email', class: "input-label-cc" %>
						</td>
						<td>
				  			<%= text_field_tag 'x_email', 'forresttales@hotmail.com', :size => 40, class: "input-cc" %>
						</td>				
					</tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>
					<tr><td class="space-cc"></td><td></td></tr>					
					<tr>
						<td></td>						
						<td>
					  		<%= f.submit 'Purchase', class: 'sign-btn-cc' %>
						</td>
					</tr>
				</table>
			<% end %>						
		</div>
	</div>

	<div style="height: 100px;"></div>

	<script>

		// var offset_top = 0;
		// jQuery(window).scroll(function() {
			// offset_top = $(window).scrollTop()
			// $('#eventstabs').css('top', offset_top);
		// });

		function scrollToAnchor(aid) {
			var a = $("a[name='" + aid + "']");
			$('html, body').animate({ scrollTop: a.offset().top }, 1000);
			// jQuery('html, body').animate({scrollTop: 100}, 1000);				
		}
		
		function formValidate() {
			
			$("#form_transact").validate({
				
				submitHandler: function(form) {
					form.submit();
				},
			
				debug: true,
				onkeyup: false,
				focusCleanup: true,
				focusInvalid: false,
				// invalidClass: "error",
				// validClass: "success",
				rules: {
					'sim_transaction[x_card_num]': {
						required: true,
						minlength: 1,						
						maxlength: 100						
					},
					'sim_transaction[x_card_code]': {
						required: true,
						minlength: 1,						
						maxlength: 100						
					},
					'sim_transaction[x_exp_date]': {
						required: true,
						minlength: 1,						
						maxlength: 100						
					},
					'sim_transaction[x_first_name]': {
						required: true,
						minlength: 1,						
						maxlength: 100						
					},
					'sim_transaction[x_last_name]': {
						required: true,
						minlength: 1,						
						maxlength: 100						
					},					
					'sim_transaction[email]': {
						required: false,
						maxlength: 100,
						email: true
					}
				},
				invalidHandler: function(event, validator) {
					var errors = validator.numberOfInvalids();
					if (errors) {
						var message = errors == 1
						? '1 required field missed'
						: errors + ' required fields missed';
						$("#errors p").html(message);
						$("#errors").show();
						$("#submit_id").blur();
						$("#journal_table").focus();		
						scrollToAnchor('anchor1');										
					} else {
						$("div.errors").hide();
					}
				},			
				messages: {
					'sim_transaction[x_card_num]': {
						required: "*",
						maxlength: "Exceeds 100 characters"							
					},
					'sim_transaction[x_card_code]': {
						required: "*",
						maxlength: "Exceeds 100 characters"							
					},
					'sim_transaction[x_exp_date]': {
						required: "*",
						maxlength: "Exceeds 100 characters"							
					},
					'sim_transaction[x_first_name]': {
						required: "*",
						maxlength: "Exceeds 100 characters"							
					},
					'sim_transaction[x_last_name]': {
						required: "*",
						maxlength: "Exceeds 100 characters"							
					},					
					'sim_transaction[email]': {
						required: "*",
						maxlength: "Exceeds 100 characters",
						email: "Invalid form on email address"
					}
				},
				errorContainer: $("div .error_label"),				
				errorPlacement: function(error, element) {
					error.insertAfter('#error_' + element.attr('id'));
					$('#' + element.attr('id')).removeClass('required').removeClass('success').addClass('error');
					//$('#label_' + element.attr('id')).removeClass('required-label').addClass('error-label');
				},
				// invalid: function(element) {
				// },
				// highlight: function(element) {
					// $('#' + element.attr('id')).removeClass('required').removeClass('success').addClass('error');
					// //$('#label_' + element.attr('id')).removeClass('required-label').addClass('error-label');
				// },
				// unhighlight: function(element) {
					// //$('#' + element.attr('id')).removeClass('required').removeClass('success').addClass('error');
					// //$('#label_' + element.attr('id')).removeClass('required-label').addClass('error-label');
				// },
				error: function(label) {
					$('#' + label.attr('for')).removeClass('required').removeClass('success').addClass('error');
					$('#label_' + label.attr('for')).removeClass('required-label').addClass('error-label');
					
				},
				success: function(label) {
					$('#' + label.attr('for')).removeClass('required').removeClass('error').addClass('success');
					$('#label_' + label.attr('for')).removeClass('error-label').addClass('required-label');
					
					$('#state_' + label.attr('for')).css ({			
						background: 'url("/assets/submit_form_tick.png") no-repeat 0px 5px'
					});

					$('#error_' + label.attr('for')).html("");
				},				
				focus: function(element) {
				 	//$('#' + element.attr('id')).removeClass('required').removeClass('error').removeClass('success').addClass('focus');
				 	
				 	//$('#' + element.attr('id')).removeClass('required').removeClass('success').addClass('focus');
				}
			});

			// $.validator.setDefaults({
				// submitHandler: function() {
					// form.submit();
				// }
			// });
		}


		$(window).load( function() {
			
			formValidate();							
			
			$('#test').on('click', function() {
				$('input#x_card_num').val('');
			});
			
		});
		
		
		
	</script>