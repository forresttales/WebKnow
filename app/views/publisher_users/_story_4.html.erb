<div class="post-container">
    <% if @post_users.any? %>
    	<% @nlist = 0 %>
    	<% s_rand = '?' + (rand(10..90) * rand(100..900)).to_s %>
    	<% @post_users.each do |post_user| %>
    		<% @nlist += 1 %>
    		<% @post_user = post_user %>
    		<% @post_user_images = post_user.post_user_images %>
    		<% @post_user_comments = post_user.post_user_comments.order('created_at DESC') %>
		    <div class="table post-user-list-1" style="background-color: transparent;">
		        <div class="row">
		            <div class="cell-100 post-user-list-1a">
		                <div class="post-user-list-1a-1">
		                    <ul class="publisher-product-list-grid publisher-product-list-caption">
		                    <li>
		                        <figure>
		                            <a href="<%= post_user.user.slug %>">
		                                <%= post_user_avatar_for(post_user.user, s_rand) %>
		                                <figcaption>
		                                </figcaption>
		                            </a>
		                        </figure>
		                    </li>
		                    <ul>
		                </div>
		            </div>
		            <div class="cell-600">
		                <div class="post-user-post-container">
		                    <div class="post-user-list-1b-1">
		                        <div class="float-left display-inline-block">
		                            <a href="<%= post_user.user.slug %>" class="post-user-span-2-a">
		                            <span><%= post_user.user.name_first %> </span><span><%= post_user.user.name_last %></span>
		                            </a>
		                        </div>
		                        <% if post_user.user.id == current_user.id %>
		                        <div class="post-user-delete-container ks-tip-container float-right">
		                            <div class="post-user-delete ks-tip-target">
		                                <div class="post-user-id hidden" name="<%= post_user.id %>"></div>
		                            </div>
		                            <div class="ks-tip ks-tip-delete-post-user">
		                                <div class="ks-tip-indicator-delete-post-user"></div>
		                                Delete
		                            </div>
		                        </div>
		                        <% else %>
		                        	<div class="post-user-delete-blank float-right"></div>
		                        <% end %>
		                        <div class="clear-both"></div>
		                    </div>
		                    <div class="post-user-list-1b-2">
		                        <%= render 'publisher_users/post_user_image' %>
		                        <div class="post-user-span-1"><%= post_user.post_text.html_safe %></div>
		                    </div>
		                    <div class="post-user-list-1b-3">
		                        <div class="table post-user-bottom-line">
		                            <div class="row">
		                                <div id="render_post_user_like_<%= @nlist %>" class="cell-150">
		                                    <%= render 'publisher_users/post_user_like' %>		
		                                </div>
		                                <div class="cell-300">
		                                </div>
		                                <div class="cell-150 post-user-bottom-time-text">
		                                    <span class="post-user-span-3">
		                                    - <%= time_ago_in_words(post_user.created_at) %> ago
		                                    </span>
		                                </div>
		                            </div>
		                        </div>
		                    </div>
		                </div>
		                <div class="add-comment-border-top"></div>
		                <div class="textarea-add-comment-parent" name="textarea_add_comment_container">
		                    <div class="textarea-add-comment-container-padding">
		                        <div class="space-height-4"></div>
		                        <div class="textarea-add-comment-container toggle-comment" tabindex="">
		                            <div id="textarea_add_comment_<%= post_user.id %>" class="textarea-add-comment toggle-comment add-comment-container-inactive" name="<%= post_user.id %>" contenteditable="true" tabindex="101"><br></div>
		                        </div>
		                        <div class="space-height-4"></div>
		                        <div id="btn_add_comment_<%= post_user.id %>" class="btn-add-comment-story-4-container hidden">
		                            <div class="btn-1 toggle-comment btn-add-comment-story-4 float-right" data-post-user-id="<%= post_user.id %>" tabindex="">
		                                <div class="add-comment-story-4-text toggle-comment">Add</div>
		                                <div class="add-comment-story-4-loader toggle-comment hidden"></div>
		                            </div>
		                            <div class="clear-both"></div>
		                            <div class="space-height-4"></div>
		                        </div>
		                    </div>
	                        <div id="render_post_user_comments_<%= post_user.id %>" name="<%= post_user.id %>" class="render-post-user-comments add-comment-container" tabindex="">
	                            <%= render 'publisher_users/post_user_comments' %>
	                        </div>
		                </div>
		            </div>
		        </div>
		    </div>
    	<% end %>
    <% else %>
    <!-- <div class="" style="color: red; padding-left: 20px;">
        <h3>No record for Publisher Products</h3>
        </div> -->
    <% end %>
</div>
<script>
    // function scrollPos() {
        // $("#pos1").html($("#scroll1").scrollLeft());
        // // $("#pos2").html($("#scroll1").scrollTop());
        // $("#scroll2").scrollLeft($("#scroll1").scrollLeft());
        // // $("#scroll2").scrollLeft(100);
    // }
    // function moveScroll() {
    // $("#scroll1").scrollLeft($("#pos1").html());
    // $("#scroll2").scrollLeft($("#pos1").html());			
    // }
    
    // function body_resize() {
    // var wh = window.outerHeight;
    // var sh = 0;
    // // var h1 = 0;
    // // var h2 = 0;
    // var h3 = 0;
    // // var h = $("#container").height();
    // $("#container_height").html(wh);
    // if(wh > 700) {
    // // h1 = wh - 276;
    // // h2 = wh - 594;
    // h3 = wh - 392;
    // // $("#scroll1").css({
    // // 'height': h3
    // // });
    // $("#sub_container").css({
    // 'height': h3			// h1
    // });			
    // $("#render_list").css({
    // 'height': h3			// h2
    // });			
    // }
    // }
    
    // function init_page() {
    // var wh = window.innerHeight;
    // var sh = wh-388;
    // $("#scroll1").css({
    // 'height': sh
    // });			
    // }
    
    // $(window).load(function() {
    $(document).ready(function() {			
    // $(function() {

    $("#textarea_addcomment").on ('blur', function (e) {
    onDivBlur();
    });
    $("#textarea_addcomment").on ('mousedown', function (e) {
    return cancelEvent(event);
    });
    $("#textarea_addcomment").on ('click', function (e) {
    return cancelEvent(event);
    });
    $("#textarea_addcomment").on ('mouseup', function (e) {
    saveSelection();
    });
    $("#textarea_addcomment").on ('keyup', function (e) {
    saveSelection();
    });
    $("#textarea_addcomment").on ('focus', function (e) {
    restoreSelection();
    });
    $("#textarea_addcomment").on ('keydown', function (e) {
    if( e.keyCode == 9) {
    e.preventDefault();
    insertTextAtCursor("\t");
    }
    });
    
    // $(".btn-add-comment-story-4").keypress(function(e){
    	// if(e.keyCode==13)
    	// $(".btn-add-comment-story-4").click();
    // });

    // $(".btn-add-comment-story-4").on('click', function() {
    // // alert($(this).attr("name"));
    // var post_user_id = $(this).attr("name"); 
    // var textarea_id = "#textarea_add_comment_" + post_user_id;
    // var c = $(textarea_id).html().replace(/\t/g, '        '); 
    // // var c = $(this).html().replace(/\t/g, '        '); 
    // // $("#post_user_comment_comment_text").val(c);	
    // $("form#new_post_user_comment input#post_user_comment_comment_text").val(c);
    // $("form#new_post_user_comment input#post_user_comment_post_user_id").val(post_user_id);
    // // $("#submit_comment_story_4_text").addClass("hidden");						
    // // $("#submit_comment_story_4_loader").removeClass("hidden");
    // $("#submit_post_user_comment_hidden").click();
    // });
    
    $(".btn-add-comment-story-4").on('click', function() {
    var post_user_id = $(this).data("post-user-id"); 
    var textarea_id = "#textarea_add_comment_" + post_user_id;
    var comment_text = $(textarea_id).html().replace(/\t/g, '        '); 
    var obj_list = '{ "comment_text":"' + comment_text +
      '", "post_user_id":' + post_user_id + 
      '}';      
    var obj = '{ "post_user_comment": [' +  obj_list + '] }';
    $.ajax({
    type: 'POST',
    data : obj,
    url: '/publisher_users/create_post_user_comment',			    	
    // dataType: "json",
    dataType: "script",
    contentType: "application/json",
    // contentType: "application/js",
    processData: false,
    beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
         	statusCode: {
         	},
         	success: function(data) {
         		// alert('success');
         	},
         	error: function(xhr){  alert("error: " + xhr.statusText); }        
    });
    return false;
    });
    // $(".btn-add-comment-story-4").on('click', function() {
    // var id = $(this).attr('name');
    // // $(document).trigger('click_add_comment_story_4', [id]);
    // });
        // $('.tip').each(function() {
            // var tipContent = $(this).next('.tip-content').html();
            // $(this).qtip({
            	// style: { classes: 'tooltip-text-1' },
                // content: tipContent,
                // show: 'mouseover',
                // hide: 'mouseout'
            // })
        // });			
        // $('.tip-bottom-center').each(function() {
            // var tipContent = $(this).next('.tip-content').html();
            // $(this).qtip({
            	// style: { classes: 'tooltip-text-1' },
                // content: tipContent,
                // show: 'mouseover',
                // hide: 'mouseout',
    // position: {
        // my: 'top center',
        // at: 'bottom center'
        // // target: $('.tip-bottom-center')
    // }                    
            // })
        // });			
        // $('.tip-top-center').each(function() {
            // var tipContent = $(this).next('.tip-content').html();
            // $(this).qtip({
            	// style: { classes: 'tooltip-text-1' },
                // content: tipContent,
                // show: 'mouseover',
                // hide: 'mouseout',
    // position: {
        // my: 'bottom center',
        // at: 'top center'
        // // target: $('.tip-top-center')
    // }                    
            // })
        // });			
    
    // $("#btn_submit_post_user_like").on('click', function() {
    // alert('click');
    // // $("#btn_submit_post_user_like_hidden").click();
    // });
    
    // body_resize();
    
     // $('#scroll1').bind('mousewheel', function(event) {
       // event.preventDefault();
       // var scrollTop = this.scrollTop;
       // this.scrollTop = (scrollTop + ((event.deltaY * event.deltaFactor) * -0.7));
       // //console.log(event.deltaY, event.deltaFactor, event.originalEvent.deltaMode, event.originalEvent.wheelDelta);
     // });
    });				
</script>