<style>
	.drop-namespace105 .drop-hidden {
	display: none !important;
	visibility: hidden !important;  
	}
	.drop-namespace105 .drop-clear-both {
	clear: both;
	}
	.drop-namespace105 .drop-105 {
	width: 200px;
	}
	.drop-namespace105 .drop-105 .drop-105-triangle {
	width: 0px;
	height: 0px;
	border-left: 8px solid transparent;
	border-right: 8px solid transparent;
	border-bottom: 8px solid #fff;
	position: relative;
	left: 3px;
	float: left;
	}
	.drop-namespace105 .drop-105 .drop-105-box {
	width: 200px;
	float: left;
	/*position: relative;*/
	position: absolute;
	margin-top: 0px;
	-webkit-transition: all .1s ease-out;
	-moz-transition: all .1s ease-out;
	-ms-transition: all .1s ease-out;
	-o-transition: all .1s ease-out;
	transition: all .1s ease-out;
	z-index: 1;
	}
	.drop-namespace105 .drop-105 .drop-105-container-links {
	}
	.drop-namespace105 .drop-105 .margin-top-hide-1 {
	margin-top: -16px;
	}
	.drop-namespace105 .drop-105 .margin-top-show-1 {
	margin-top: -6px;
	}
	.drop-namespace105 .drop-105 .drop-105-link-1 {
	width: 100%;
	}
	/*.drop-namespace105 .drop-105 .drop-105-target {
	position: relative;
	width: 200px;
	height: 19px;
	padding: 9px 0px 4px 0px;
	text-align: center;
	}
	.drop-namespace105 .drop-105 .drop-105-target:hover {
	background: #f6f6f6;
	}*/
	.drop-namespace105 .drop-105 .drop-105-link-1:hover .span-1 {
	}   
	.drop-namespace105 .drop-105 .drop-105-span-1 {
	color: #376340; 
	font-family: Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: 700;
	}
	.drop-namespace105 .drop-105 a.drop-105-link-a-1 {
	text-decoration: none;
	}
	.drop-namespace105 .drop-105 a.drop-105-link-a-1:hover {
	text-decoration: none;
	}
	.drop-namespace105 .drop-105 .drop-105-border {
	-webkit-border-top-left-radius: 4px;
	-moz-border-top-left-radius: 4px;
	border-top-left-radius: 4px;      
	-webkit-border-top-right-radius: 4px;
	-moz-border-top-right-radius: 4px;
	border-top-right-radius: 4px;     
	-webkit-border-bottom-right-radius: 4px;
	-moz-border-bottom-right-radius: 4px;
	border-bottom-right-radius: 4px;      
	-webkit-border-bottom-left-radius: 4px;
	-moz-border-bottom-left-radius: 4px;
	border-bottom-left-radius: 4px;     
	}
	.drop-namespace105 .drop-105 .drop-105-shadow {
	-webkit-box-shadow: 0px 0px 6px 3px rgba(0,0,0,0.3);
	-moz-box-shadow: 0px 0px 6px 3px rgba(0,0,0,0.3);
	box-shadow: 0px 0px 6px 3px rgba(0,0,0,0.3);
	}
	.drop-namespace105 .drop-105 .drop-105-divider-1 {
	height: 2px;
	}
	.drop-namespace105 .drop-105 .drop-105-divider-2 {
	height: 10px;
	}
	.drop-namespace105 .drop-105 .background-transparent {
	background-color: transparent;
	}
	.drop-namespace105 .background-white {
	background-color: #fff;
	}
	.drop-namespace105 .drop-105 .nav-caret-container {
	width: 14px;
	height: 30px;
	padding: 0 0 0 2px;     
	}
	.drop-namespace105 .drop-105 .nav-caret {
	width: 0px;
	height: 0px;
	position: relative;
	border-left: 4px solid transparent;
	border-right: 4px solid transparent;
	margin: 16px 0 0 0px;
	}
	.drop-namespace105 .drop-105 .nav-caret-down {
	border-top: 5px solid #999;
	border-bottom: 0;     
	}
	.drop-namespace105 .drop-105 .nav-caret-up {
	border-bottom: 5px solid #999;
	border-top: 0;
	}
	.drop-namespace105 .drop-105 .nav-drop-1:hover {
	cursor: pointer;
	}
	.drop-namespace105 .drop-105 .nav-drop-1:hover .nav-avatar img {
	border: 2px solid #A9D996;
	}
	.drop-namespace105 .drop-105 .nav-drop-1:hover .nav-caret-down {
	border-top: 5px solid #A9D996;
	}
	.drop-namespace105 .drop-105 .nav-drop-1:hover .nav-caret-up {
	border-bottom: 5px solid #A9D996;
	}
	.drop-namespace105 .drop-105 .cursor-pointer:hover {
	cursor: pointer;
	}
	.drop-namespace105 .drop-105-target-icon {
	display: inline-block;
	}	
	.drop-namespace105 .drop-105-target-text {
	display: inline-block;
	}	
	.drop-namespace105 .drop-105 a:focus {
	outline: none;	
	}
	.drop-namespace105 .drop-105 a:active {
	outline: none;
	}
	.drop-namespace105 .drop-105 a:visited {
	outline: none;
	}
	.drop-namespace105 .drop-105-table {
	display: table;
	}
	.drop-namespace105 .drop-105-table-row {
	display: table-row;
	}
	.drop-namespace105 .drop-105-table-cell-1 {
	display: table-cell;
	width: 174px;
	}
	.drop-namespace105 .drop-105-table-cell-2 {
	display: table-cell;
	width: 12px;
	}
	.drop-namespace105 .drop-105-1 {
	text-align: left;
	width: auto;
	height: 24px;
	padding: 4px;
	}
	.drop-namespace105 .drop-105-1:hover {
	background: #f6f6f6;
	}
	.drop-namespace105 .drop-105-1-target {
	position: relative;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-triangle {
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 8px 8px 8px 0;
	border-color: transparent #ffffff transparent transparent;	
	position: relative;
	float: left;
	left: -8px;
	top: 33px;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-container {
	position: relative;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-box {
	width: 200px;
	position: absolute;
	margin-top: 0px;
	-webkit-transition: all .1s ease-out;
	-moz-transition: all .1s ease-out;
	-ms-transition: all .1s ease-out;
	-o-transition: all .1s ease-out;
	transition: all .1s ease-out;
	z-index: 1;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-container-links {
	}
	.drop-namespace105 .drop-105-1 .margin-top-hide-1-1 {
	margin-top: -53px;
	margin-left: 160px;
	}
	.drop-namespace105 .drop-105-1 .margin-top-show-1-1 {
	margin-top: -53px;
	margin-left: 180px;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-link-1 {
	width: 100%;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-link-1:hover {
	background: #f6f6f6;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-link-1:hover .span-1 {
	}   
	.drop-namespace105 .drop-105-1 .drop-105-1-span-1 {
	color: #376340; 
	font-family: Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: 700;
	}
	.drop-namespace105 .drop-105-1 a.drop-105-1-link-a-1 {
	text-decoration: none;
	}
	.drop-namespace105 .drop-105-1 a.drop-105-1-link-a-1:hover {
	text-decoration: none;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-border {
	-webkit-border-top-left-radius: 4px;
	-moz-border-top-left-radius: 4px;
	border-top-left-radius: 4px;      
	-webkit-border-top-right-radius: 4px;
	-moz-border-top-right-radius: 4px;
	border-top-right-radius: 4px;     
	-webkit-border-bottom-right-radius: 4px;
	-moz-border-bottom-right-radius: 4px;
	border-bottom-right-radius: 4px;      
	-webkit-border-bottom-left-radius: 4px;
	-moz-border-bottom-left-radius: 4px;
	border-bottom-left-radius: 4px;     
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-shadow {
	-webkit-box-shadow: 0px 0px 6px 3px rgba(0,0,0,0.3);
	-moz-box-shadow: 0px 0px 6px 3px rgba(0,0,0,0.3);
	box-shadow: 0px 0px 6px 3px rgba(0,0,0,0.3);
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-divider-1 {
	height: 2px;
	}
	.drop-namespace105 .drop-105-1 .drop-105-1-divider-2 {
	height: 10px;
	}
	.drop-namespace105 .drop-105-1 .background-transparent {
	background-color: transparent;
	}
	.drop-namespace105 .drop-105-1 .background-white {
	background-color: #fff;
	}
	.drop-namespace105 .drop-105-1 .nav-caret-container {
	width: 14px;
	height: 30px;
	padding: 0 0 0 2px;     
	}
	.drop-namespace105 .drop-105-1 .nav-caret {
	width: 0px;
	height: 0px;
	position: relative;
	border-left: 4px solid transparent;
	border-right: 4px solid transparent;
	margin: 16px 0 0 0px;
	}
	.drop-namespace105 .drop-105-1 .nav-caret-down {
	border-top: 5px solid #999;
	border-bottom: 0;     
	}
	.drop-namespace105 .drop-105-1 .nav-caret-up {
	border-bottom: 5px solid #999;
	border-top: 0;
	}
	.drop-namespace105 .drop-105-1 .nav-drop-1:hover {
	cursor: pointer;
	}
	.drop-namespace105 .drop-105-1 .nav-drop-1:hover .nav-avatar img {
	border: 2px solid #A9D996;
	}
	.drop-namespace105 .drop-105-1 .nav-drop-1:hover .nav-caret-down {
	border-top: 5px solid #A9D996;
	}
	.drop-namespace105 .drop-105-1 .nav-drop-1:hover .nav-caret-up {
	border-bottom: 5px solid #A9D996;
	}
	.drop-namespace105 .drop-105-1 .cursor-pointer:hover {
	cursor: pointer;
	}
	.drop-namespace105 .drop-105-1-target-icon {
	display: inline-block;
	}	
	.drop-namespace105 .drop-105-1-target-text {
	display: inline-block;
	margin: 4px 0px 0px 1px;
	}	
</style>

<div class="drop-namespace105">
	<% if @user_bkgrnd_image %>   				
		<div class="container-figure-image container-figure-image-border-load container-figure-image-3 drop-105" style="position: relative;">
			<figure class="dialog-11-figure cursor-pointer" data-width="<%= @user_bkgrnd_image.width %>" data-src-600="<%= @user_bkgrnd_image.image_url(:image_1200_300_fit) %>">
				<img id="user_primary_bkgrnd" class="user-primary-img" alt="" src="<%= @user_bkgrnd_image.image_url(:image_1200_300_fill) + '?' + (rand(10..90) * rand(100..900)).to_s if @user_bkgrnd_image.image? %>" data-id="<%= @user_bkgrnd_image.id %>" />
				<figcaption class="edit-image hidden drop-105-target">
					<div class="img-1-text">Edit background picture</div>
				</figcaption>
			</figure>
			<div class="drop-105-container drop-hidden">
				<div class="drop-105-box background-transparent margin-top-hide-1">
					<div class="drop-105-triangle"></div>
					<div style="clear: both;"></div>
					<div class="drop-105-container-links background-white drop-105-border drop-105-shadow">
						<div class="drop-105-divider-2"></div>
						<div class="drop-105-link-1 cursor-pointer" data-id="8">
							<div class="drop-105-1">
								<div class="drop-105-1-target">
									<div class="drop-105-1-target-text">
										<span class="drop-105-1-span-1">New/Change</span>
									</div>
								</div>
							</div>
						</div>
						<div class="drop-105-divider-1"></div>
						<div class="drop-105-link-1 cursor-pointer" data-id="6">
							<div class="drop-105-1">
								<div class="drop-105-1-target">
									<div class="drop-105-1-target-text">
										<span class="drop-105-1-span-1">Crop/Center</span>
									</div>
								</div>
							</div>
						</div>
						<div class="drop-105-divider-1"></div>
						<div class="drop-105-link-1 cursor-pointer" data-id="7">
							<div class="drop-105-1">
								<div class="drop-105-1-target">
									<div class="drop-105-1-target-text">
										<span class="drop-105-1-span-1">Delete</span>
									</div>
								</div>
							</div>
						</div>
						<div class="drop-105-divider-2"></div>
					</div>
				</div>
			</div>
		</div>
	<% else %>
		<div class="container-figure-image container-figure-image-border-load container-figure-image-3 drop-105" style="position: relative; width: 1200px; height: 300px; background-color: grey">
			<figure class="dialog-11-figure-generic" data-width="1200" data-src-600="">
				<img id="user_generic_bkgrnd" class="user-primary-img" alt="" src="" style="display: block; width: 1200px; height: 300px" >
				<figcaption class="edit-image hidden cursor-pointer drop-105-target">
					<div class="img-1-text">Add a background picture</div>
				</figcaption>
			</figure>
			<div class="drop-105-container drop-hidden">
				<div class="drop-105-box background-transparent margin-top-hide-1">
					<div class="drop-105-triangle"></div>
					<div style="clear: both;"></div>
					<div class="drop-105-container-links background-white drop-105-border drop-105-shadow">
						<div class="drop-105-divider-2"></div>
						<div class="drop-105-link-1 cursor-pointer" data-id="8">
							<div class="drop-105-1">
								<div class="drop-105-1-target">
									<div class="drop-105-1-target-text">
										<span class="drop-105-1-span-1">New Picture</span>
									</div>
								</div>
							</div>
						</div>
						<div class="drop-105-divider-2"></div>
					</div>
				</div>
			</div>
		</div>
	<% end %>
</div>
<script>
	var drop_visible_namespace105 = false;
	function drop_show_namespace105() {
		$(".drop-namespace105 .drop-105-container").removeClass('drop-hidden');
		$(".drop-namespace105 .drop-105-box").fadeIn(500).removeClass("margin-top-hide-1").addClass("margin-top-show-1");
		drop_visible_namespace105 = true;			
	}	
	function drop_hide_namespace105() {
		$(".drop-namespace105 .drop-105-box").removeClass("margin-top-show-1").addClass("margin-top-hide-1").fadeOut(50);		
		drop_visible_namespace105 = false;			
	}	
	function drop_toggle_namespace105() {
		if (drop_visible_namespace105) {
			drop_hide_namespace105();
		}
		else {
			drop_show_namespace105();
		}
	}	
	
	function dropCloseAll_namespace105() {
		drop_hide_namespace105();
	}

	$(document).ready(function () {				
	
		$(document).on('click', function(e) {
			var target_namespace105 = $(e.target).parents('.drop-namespace105').attr("class");
			if (target_namespace105 == null) {
				drop_hide_namespace105();
			}
		});
	
		$(".drop-namespace105 .drop-105-target").on('click', function() {
			drop_toggle_namespace105();
		});
		$(".drop-namespace105 .drop-105-link-1[data-id='5']").on("click", function() {
			dropCloseAll_namespace105();
			$(document).trigger("btn_user_bkgrnd_image_change_click");
		});
		$(".drop-namespace105 .drop-105-link-1[data-id='6']").on("click", function() {
			dropCloseAll_namespace105();
			$(document).trigger("btn_user_bkgrnd_image_crop_click");
		});
		$(".drop-namespace105 .drop-105-link-1[data-id='7']").on("click", function() {
			dropCloseAll_namespace105();
			$(document).trigger("btn_user_bkgrnd_image_delete_click");
		});
		$(".drop-namespace105 .drop-105-link-1[data-id='8']").on("click", function() {
			dropCloseAll_namespace105();
			$(document).trigger("btn_user_bkgrnd_image_new_click");
		});
	
	});
	
</script>
<script>
	$(document).ready( function () {				
	
	
		$("img").one("load", function() {
			if((this.id == "user_primary_bkgrnd") || (this.id == "user_generic_bkgrnd")) {
				var img_w = this.width;
				var img_h = this.height;
	
				$(".container-figure-image-3").css({
					// width : img_w + 4,
					// height : img_h + 4
					width : img_w,
					height : img_h						
				}).removeClass("container-figure-image-border-load")/*.addClass("container-figure-image-border")*/;													
			}					
		}).each(function() {
		  	if(this.complete) $(this).load();
		});
		
		var this_img;			
		$(".dialog-11-figure").on('click', function(e) {
			if ( e.target.nodeName == "IMG" ) {
	
				$("#dialog_overlay").jqmShow();
				$("#overlay_loading").removeClass("display-none");
	
				var src_img = $(this).data("src-600");
				$('<img src="'+ src_img +'">').load(function(){
					$("#profile_figure_dialog_11 img").remove();
					$("#profile_figure_dialog_11").append($(this));
					$("#overlay_loading").addClass("display-none");
					$("#dialog_overlay").jqmHide();
					$("#dialog_11").jqmShow();	
				}).error(function(){
					alert('error loading image');
				});
			}
		});
		$('#dialog_11').jqm({
			overlay: 84,
			onShow: function(hash) {
				hash.w.css('opacity', 1.0).fadeIn(10);
				hash.o.prependTo('body');
				hash.w.css('top', '10px');
			},
			onHide: function(hash) {
				hash.o.remove();
				hash.w.css('top', '-8000px');
				$("#profile_figure_dialog_11 img").remove();
				// hash.w.fadeOut('10',function(){ 
					// hash.o.remove(); 
				// });
			}
		}); 		
		$('#dialog_overlay').jqm({
			overlay: 84,
			onShow: function(hash) {
				hash.w.css('opacity', 1.0).fadeIn(10);
				hash.o.prependTo('body');
				// hash.w.css('top', '0px');
			},
			onHide: function(hash) {
				hash.o.remove();
				hash.w.css('top', '-8000px');
			}
		}); 		
		
		$('#dialog_15').jqm({
			onShow: function(hash) {
				hash.o.prependTo('body');
				hash.w.css('top', '-720px');
				hash.w.css('opacity', 1.0).fadeIn(200);
				// hash.w.show();
				$('#dialog_15').animate(
					{bottom:'-=740', top:'+=740'}, 
					500, 
					'easeInOutCirc', 
					function() {
						$('#dialog_15').animate(
							{bottom:'+=4', top:'-=4'}, 
							100, 
							'easeInBounce', 
							function() {
							}
						);
					}
				);
			}
		}); 		
		
	});
	 
	
</script>
