<% provide(:title, 'Publisher Product Manifest') %>

<style>
	
.btn-edit-options-container-outer {
	position: relative;
  	width: 100%;
  	height: 24px;
}
.btn-edit-options-container {
  	background: linear-gradient(#FBB040, #CA8E33);
  	border-radius: 10px;
  	width: 150px;
  	height: 24px;
}
.btn-edit-options {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 14px;
	font-weight: 700;		
  	color: #eee;
	text-align: center;	
  	width: 150px;
  	height: 24px;
  	padding-top: 4px;
  	text-decoration:none;
  	outline: none;
}
.btn-edit-options:focus {
}
.btn-edit-options-container:hover { 
  	box-shadow: 0 1px 1px rgba(255,255,255,0.1), 0 1.5em 1em rgba(255,255,255,0.2) inset;
  	cursor: pointer;
}
.btn-edit-options-container:active .btn-opt-edit { 
	color: transparent;
	text-shadow: 1px 1px #fff;
}
	
</style>


<div class="publisher-product-manifests">

	<div class="jqmWindow jqmWindow-overlay" id="dialog_overlay">
		<div id="overlay_loading" class="overlay-loading display-none"></div>
	</div>
	
	<div class="jqmWindow jqmWindow-1001" id="dialog_1001">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<!-- <img src="../assets_knowstory/knowstory-icon-2-w60-h63.png"> -->
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form1001" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row" style="height: 30px;"></div>
				<div class="row">
					<div id="dlg_info" class="cell-100percent dialog-msg-container" style="text-align: left;"></div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_1001_cancel" class="btn-pop-dialog" type="button" value="Close" tabindex="">
					</span>
				</div>
			</div>
			<div class="row" style="height: 10px;"></div>
		</div>
	</div>

	<div class="jqmWindow jqmWindow-101-1" id="dialog_101_1">
		<div class="jqmClose ks-tip-container close-container">
			<div class="ks-tip-target">
				<%= image_tag('jqModal/close_btn_round_white_w60_h60.png', alt: 'X', class: 'x-close-60-60' ) %>
			</div>
		    <div class="ks-tip ks-tip-pos-left-dialog-11 ks-tip-text-dialog-11">
				Close
		    </div>				
		</div>
		<div style="clear: both;"></div>
		<div style="width: 600px; margin: 0 auto;">
			<div class="figure-container" style="width: 100%; background-color: #000;">
				<figure id="figure_dialog_101_1" class="dialog-user-image-2">
					<figcaption id="figcaption_dialog_101_1" class="expand-image">												
						<div class="img-2-container image">
							<% if !@image_1.nil? %>
							<a rel="gallery" title="" href="<%= @image_1.image_url() + '?' + (rand(10..90) * rand(100..900)).to_s if @image_1.image? %>"></a>
							<% end %>
						</div>
					</figcaption>
				</figure>
			</div>
			<div style="width: 100%; min-height: 100px; background-color: #fff;"></div>
		</div>
	</div>

	<div class="jqmWindow jqmWindow-101-2" id="dialog_101_2">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form101_2" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_101_2_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_101_2_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_101_2" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos1Image.new, :url => upload_image_1_publisher_product_manifests_path(@publisher_product_pos1_image_new), :html => {:multipart => true, :id => 'new_image_1', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'new_image_1_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_1_new', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-101-3" id="dialog_101_3">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form101_3" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_101_3_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_101_3_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_13" class="dvLoading-13 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos1Image.new, :url => upload_image_1_change_publisher_product_manifests_path(@publisher_product_pos1_image_change), :html => {:multipart => true, :id => 'change_image_1', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'change_image_1_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_1_change', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-101-4" id="dialog_101_4">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form101_4" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>Delete this image?</span>
				</div>
			</div>
		</div>
		<div style="height: 16px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center;">
					<span><input id="btn_dlg_101_4_submit" class="btn-pop-dialog" type="button" value="Delete" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_101_4_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 20px;"></div>
	</div>

	<div class="jqmWindow jqmWindow-101-5" id="dialog_101_5">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div class="topbar-title">Photo Crop and Center</div>
			<div id="close_form101_5" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-3" style="padding: 10px 0 0 0;">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>600 X 600 pixels available for maximum size. Below, you may crop and center smaller sizes.</span>
				</div>
			</div>
		</div>
		<div style="height: 10px;"></div>
		<div style="width: 100%; padding: 0 0 0 10px;">
			<div id="render_image_1_crop"></div>
		</div>
	</div>



	<div class="jqmWindow jqmWindow-102-1" id="dialog_102_1">
		<div class="jqmClose ks-tip-container close-container">
			<div class="ks-tip-target">
				<%= image_tag('jqModal/close_btn_round_white_w60_h60.png', alt: 'X', class: 'x-close-60-60' ) %>
			</div>
		    <div class="ks-tip ks-tip-pos-left-dialog-11 ks-tip-text-dialog-11">
				Close
		    </div>				
		</div>
		<div style="clear: both;"></div>
		<div style="width: 600px; margin: 0 auto;">
			<div class="figure-container" style="width: 100%; background-color: #000;">
				<figure id="figure_dialog_102_1" class="dialog-user-image-2">
					<figcaption id="figcaption_dialog_102_1" class="expand-image">												
						<div class="img-2-container image">
							<% if !@image_2.nil? %>
							<a rel="gallery" title="" href="<%= @image_2.image_url() + '?' + (rand(10..90) * rand(100..900)).to_s if @image_2.image? %>"></a>
							<% end %>
						</div>
					</figcaption>
				</figure>
			</div>
			<div style="width: 100%; min-height: 100px; background-color: #fff;"></div>
		</div>
	</div>

	<div class="jqmWindow jqmWindow-102-2" id="dialog_102_2">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form102_2" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_102_2_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_102_2_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_102_2" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos2Image.new, :url => upload_image_2_publisher_product_manifests_path(@publisher_product_pos2_image_new), :html => {:multipart => true, :id => 'new_image_2', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'new_image_2_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_2_new', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-102-3" id="dialog_102_3">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form102_3" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_102_3_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_102_3_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_13" class="dvLoading-13 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos2Image.new, :url => upload_image_2_change_publisher_product_manifests_path(@publisher_product_pos2_image_change), :html => {:multipart => true, :id => 'change_image_2', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'change_image_2_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_2_change', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-102-4" id="dialog_102_4">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form102_4" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>Delete this image?</span>
				</div>
			</div>
		</div>
		<div style="height: 16px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center;">
					<span><input id="btn_dlg_102_4_submit" class="btn-pop-dialog" type="button" value="Delete" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_102_4_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 20px;"></div>
	</div>

	<div class="jqmWindow jqmWindow-102-5" id="dialog_102_5">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div class="topbar-title">Photo Crop and Center</div>
			<div id="close_form102_5" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-3" style="padding: 10px 0 0 0;">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>600 X 600 pixels available for maximum size. Below, you may crop and center smaller sizes.</span>
				</div>
			</div>
		</div>
		<div style="height: 10px;"></div>
		<div style="width: 100%; padding: 0 0 0 10px;">
			<div id="render_image_2_crop"></div>
		</div>
	</div>



	<div class="jqmWindow jqmWindow-103-1" id="dialog_103_1">
		<div class="jqmClose ks-tip-container close-container">
			<div class="ks-tip-target">
				<%= image_tag('jqModal/close_btn_round_white_w60_h60.png', alt: 'X', class: 'x-close-60-60' ) %>
			</div>
		    <div class="ks-tip ks-tip-pos-left-dialog-11 ks-tip-text-dialog-11">
				Close
		    </div>				
		</div>
		<div style="clear: both;"></div>
		<div style="width: 600px; margin: 0 auto;">
			<div class="figure-container" style="width: 100%; background-color: #000;">
				<figure id="figure_dialog_103_1" class="dialog-user-image-2">
					<figcaption id="figcaption_dialog_103_1" class="expand-image">												
						<div class="img-2-container image">
							<% if !@image_3.nil? %>
							<a rel="gallery" title="" href="<%= @image_3.image_url() + '?' + (rand(10..90) * rand(100..900)).to_s if @image_3.image? %>"></a>
							<% end %>
						</div>
					</figcaption>
				</figure>
			</div>
			<div style="width: 100%; min-height: 100px; background-color: #fff;"></div>
		</div>
	</div>

	<div class="jqmWindow jqmWindow-103-2" id="dialog_103_2">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form103_2" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_103_2_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_103_2_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_103_2" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos3Image.new, :url => upload_image_3_publisher_product_manifests_path(@publisher_product_pos3_image_new), :html => {:multipart => true, :id => 'new_image_3', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'new_image_3_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_3_new', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-103-3" id="dialog_103_3">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form103_3" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_103_3_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_103_3_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_13" class="dvLoading-13 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos3Image.new, :url => upload_image_3_change_publisher_product_manifests_path(@publisher_product_pos3_image_change), :html => {:multipart => true, :id => 'change_image_3', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'change_image_3_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_3_change', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-103-4" id="dialog_103_4">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form103_4" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>Delete this image?</span>
				</div>
			</div>
		</div>
		<div style="height: 16px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center;">
					<span><input id="btn_dlg_103_4_submit" class="btn-pop-dialog" type="button" value="Delete" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_103_4_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 20px;"></div>
	</div>

	<div class="jqmWindow jqmWindow-103-5" id="dialog_103_5">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div class="topbar-title">Photo Crop and Center</div>
			<div id="close_form103_5" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-3" style="padding: 10px 0 0 0;">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>600 X 600 pixels available for maximum size. Below, you may crop and center smaller sizes.</span>
				</div>
			</div>
		</div>
		<div style="height: 10px;"></div>
		<div style="width: 100%; padding: 0 0 0 10px;">
			<div id="render_image_3_crop"></div>
		</div>
	</div>



	<div class="jqmWindow jqmWindow-104-1" id="dialog_104_1">
		<div class="jqmClose ks-tip-container close-container">
			<div class="ks-tip-target">
				<%= image_tag('jqModal/close_btn_round_white_w60_h60.png', alt: 'X', class: 'x-close-60-60' ) %>
			</div>
		    <div class="ks-tip ks-tip-pos-left-dialog-11 ks-tip-text-dialog-11">
				Close
		    </div>				
		</div>
		<div style="clear: both;"></div>
		<div style="width: 600px; margin: 0 auto;">
			<div class="figure-container" style="width: 100%; background-color: #000;">
				<figure id="figure_dialog_104_1" class="dialog-user-image-2">
					<figcaption id="figcaption_dialog_104_1" class="expand-image">												
						<div class="img-2-container image">
							<% if !@image_4.nil? %>
							<a rel="gallery" title="" href="<%= @image_4.image_url() + '?' + (rand(10..90) * rand(100..900)).to_s if @image_4.image? %>"></a>
							<% end %>
						</div>
					</figcaption>
				</figure>
			</div>
			<div style="width: 100%; min-height: 100px; background-color: #fff;"></div>
		</div>
	</div>

	<div class="jqmWindow jqmWindow-104-2" id="dialog_104_2">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form104_2" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_104_2_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_104_2_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_104_2" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos4Image.new, :url => upload_image_4_publisher_product_manifests_path(@publisher_product_pos4_image_new), :html => {:multipart => true, :id => 'new_image_4', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'new_image_4_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_4_new', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-104-3" id="dialog_104_3">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form104_3" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_104_3_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_104_3_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_13" class="dvLoading-13 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos4Image.new, :url => upload_image_4_change_publisher_product_manifests_path(@publisher_product_pos4_image_change), :html => {:multipart => true, :id => 'change_image_4', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'change_image_4_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_4_change', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-104-4" id="dialog_104_4">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form104_4" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>Delete this image?</span>
				</div>
			</div>
		</div>
		<div style="height: 16px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center;">
					<span><input id="btn_dlg_104_4_submit" class="btn-pop-dialog" type="button" value="Delete" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_104_4_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 20px;"></div>
	</div>

	<div class="jqmWindow jqmWindow-104-5" id="dialog_104_5">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div class="topbar-title">Photo Crop and Center</div>
			<div id="close_form104_5" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-3" style="padding: 10px 0 0 0;">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>600 X 600 pixels available for maximum size. Below, you may crop and center smaller sizes.</span>
				</div>
			</div>
		</div>
		<div style="height: 10px;"></div>
		<div style="width: 100%; padding: 0 0 0 10px;">
			<div id="render_image_4_crop"></div>
		</div>
	</div>








	<% if false %>
	<div class="jqmWindow jqmWindow-105-1" id="dialog_105_1">
		<div class="jqmClose ks-tip-container close-container">
			<div class="ks-tip-target">
				<%= image_tag('jqModal/close_btn_round_white_w60_h60.png', alt: 'X', class: 'x-close-60-60' ) %>
			</div>
		    <div class="ks-tip ks-tip-pos-left-dialog-11 ks-tip-text-dialog-11">
				Close
		    </div>				
		</div>
		<div style="clear: both;"></div>
		<div style="width: 600px; margin: 0 auto;">
			<div class="figure-container" style="width: 100%; background-color: #000;">
				<figure id="figure_dialog_105_1" class="dialog-user-image-2">
					<figcaption id="figcaption_dialog_105_1" class="expand-image">												
						<div class="img-2-container image">
							<% if !@image_4.nil? %>
							<a rel="gallery" title="" href="<%= @image_4.image_url() + '?' + (rand(10..90) * rand(100..900)).to_s if @image_4.image? %>"></a>
							<% end %>
						</div>
					</figcaption>
				</figure>
			</div>
			<div style="width: 100%; min-height: 100px; background-color: #fff;"></div>
		</div>
	</div>
	<% end %>
	
	<div class="jqmWindow jqmWindow-105-2" id="dialog_105_2">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form105_2" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_105_2_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_105_2_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_105_2" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos5Image.new, :url => upload_image_5_publisher_product_manifests_path(@publisher_product_pos5_image_new), :html => {:multipart => true, :id => 'new_image_5', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'new_image_5_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_5_new', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-105-3" id="dialog_105_3">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form105_3" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
			<div class="tip-content">
				<div class="tooltiptext">
					Close
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
			<div class="table-dialog-1">
				<div class="row">
					<div class="cell-100percent dialog-msg-container">
						<span>Upload Photo</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent dialog-msg-container">
					<span>
						<input id="btn_dlg_105_3_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex="">
					</span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span>
						<input id="btn_dlg_105_3_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex="">
					</span>
				</div>
			</div>
		</div>
		<div style="height: 4px"></div>
		<div class="table-dialog-1">
			<div class="row">
				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_13" class="dvLoading-13 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPos5Image.new, :url => upload_image_5_change_publisher_product_manifests_path(@publisher_product_pos5_image_change), :html => {:multipart => true, :id => 'change_image_5', :class => 'hidden'}, :remote => true do |f| %>
			<p><%= f.file_field :image, :id => 'change_image_5_image' %></p>
			<%= f.hidden_field 'publisher_product_id', :value => @publisher_product_id %>
			<p><%= f.submit :id => 'btn_submit_image_5_change', :class => 'btn-submit hidden', :value => 'Upload Photo' %></p>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-105-4" id="dialog_105_4">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form105_4" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>Delete this image?</span>
				</div>
			</div>
		</div>
		<div style="height: 16px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center;">
					<span><input id="btn_dlg_105_4_submit" class="btn-pop-dialog" type="button" value="Delete" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_105_4_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 20px;"></div>
	</div>

	<div class="jqmWindow jqmWindow-105-5" id="dialog_105_5">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div class="topbar-title">Photo Crop and Center</div>
			<div id="close_form105_5" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-3" style="padding: 10px 0 0 0;">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>600 X 600 pixels available for maximum size. Below, you may crop and center smaller sizes.</span>
				</div>
			</div>
		</div>
		<div style="height: 10px;"></div>
		<div style="width: 100%; padding: 0 0 0 10px;">
			<div id="render_image_5_crop"><%= render 'publisher_product_manifests/image_5_crop' %></div>
		</div>
	</div>



























	<div class="jqmWindow jqmWindow-51" id="dialog_51">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form51" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="/assets/x_close_w20_h20.png" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
	   			<div class="row">
	   				<div class="cell-100percent dialog-msg-container">
						<span>Add a PDF cover image?</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent dialog-msg-container">
					<span><input id="btn_dlg_51_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_51_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 4px"></div>
   		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_51" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPdfImage.new, :url => upload_pdf_image_publisher_product_manifests_path(@publisher_product_pdf_image_new), :html => {:multipart => true, :class => 'hidden', :id => 'new_publisher_product_pdf_image'}, :remote => true do |f| %>
		  	<!-- <#%= f.file_field :image, :id => 'change_pdf_image_image', :onchange =>"validateImageFiles(this);", :data => { :max_file_size => 5.megabytes } %#> -->
		  	<%= f.file_field :image, :id => 'new_pdf_image_image' %>
		  	<%= hidden_field_tag :publisher_product_id, @publisher_product_id %>
			<%= hidden_field_tag :publisher_product_pdf_id %>
		  <%= f.submit :id => 'btn_submit_51', :class => 'btn-submit hidden', :value => '' %>
		<% end %>
		
	</div>
	
	<div class="jqmWindow jqmWindow-52" id="dialog_52">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form52" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="/assets/x_close_w20_h20.png" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
	   			<div class="row">
	   				<div class="cell-100percent dialog-msg-container">
						<span>Upload PDF</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent dialog-msg-container">
					<span><input id="btn_dlg_52_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_52_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 4px"></div>
   		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_52" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_tag url_for(:action => :upload_pdf), :id => 'new_publisher_product_pdf', :remote => true do %>	
		    <!-- <#%= file_field_tag :name_file, :onchange =>"validatePDFFiles(this);", :data => { :max_file_size => 5.megabytes }, :class => 'hidden' %#> -->
		    <%= file_field_tag :name_file, :data => { :max_file_size => 5.megabytes }, :class => 'hidden' %>
			<%= hidden_field_tag :publisher_product_id, @publisher_product_id %>
		  	<%= submit_tag '', :id => 'btn_submit_52', :class => 'btn-submit hidden' %>
		<% end %>
	</div>
	
	<div class="jqmWindow jqmWindow-53" id="dialog_53">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form53" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="/assets/x_close_w20_h20.png" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
	   			<div class="row">
	   				<div class="cell-100percent dialog-msg-container">
						<span>Change PDF cover image?</span>
					</div>
				</div>
			</div>
		</div>
		<div style="height: 12px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent dialog-msg-container">
					<span><input id="btn_dlg_53_submit" class="btn-pop-dialog" type="button" value="Upload" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_53_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 4px"></div>
   		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center; background-color: #f6f6f6;">
					<div id="dvLoading_53" class="dvLoading-12 dvLoading-display-none"></div>
				</div>
			</div>
		</div>
		<%= form_for PublisherProductPdfImage.new, :url => upload_pdf_image_change_publisher_product_manifests_path(@publisher_product_pdf_image_new), :html => {:multipart => true, :class => 'hidden', :id => 'change_publisher_product_pdf_image'}, :remote => true do |f| %>
		  	<!-- <#%= f.file_field :image, :id => 'change_pdf_image_image', :onchange =>"validateImageFiles(this);", :data => { :max_file_size => 5.megabytes } %#> -->
		  	<%= f.file_field :image, :id => 'change_pdf_image_image' %>
		  	<%= hidden_field_tag :publisher_product_id, @publisher_product_id %>
			<%= hidden_field_tag :publisher_product_pdf_id %>
		  <%= f.submit :id => 'btn_submit_53', :class => 'btn-submit hidden', :value => '' %>
		<% end %>
	</div>

	<div class="jqmWindow jqmWindow-54" id="dialog_54">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form54" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="/assets/x_close_w20_h20.png" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>Delete this PDF?</span>
				</div>
			</div>
		</div>
		<div style="height: 16px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center;">
					<span><input id="btn_dlg_54_submit" class="btn-pop-dialog" type="button" value="Delete" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_54_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 20px;"></div>
	</div>

	<div class="jqmWindow jqmWindow-55" id="dialog_55">
		<div class="dialog-topbar-1" style="margin-top:0px;">
			<div style="height: 63px; width: 60px; float: left; position: absolute;">
				<img src="<%= image_path('global/knowstory-icon-2-w60-h63.png') %>" alt="">
			</div>
			<div id="close_form55" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<img src="<%= image_path('global/x_close_w20_h20.png') %>" alt="X" height="20px">
			</div>
            <div class="tip-content">
                <div class="tooltiptext">Close</div>
            </div>																															   					   					
			<div style="clear: both;"></div>
		</div>
		<div class="background-table-dialog-1">
	   		<div class="table-dialog-1">
				<div class="dialog-msg-container">
					<span>Delete this PDF image?<br>This will not delete the PDF, and another image can be uploaded.</span>
				</div>
			</div>
		</div>
		<div style="height: 16px;"></div>
		<div class="table-dialog-1">
   			<div class="row">
   				<div class="cell-100percent" style="text-align: center;">
					<span><input id="btn_dlg_55_submit" class="btn-pop-dialog" type="button" value="Delete" tabindex=""></span>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<span><input id="btn_dlg_55_cancel" class="btn-pop-dialog" type="button" value="Cancel" tabindex=""></span>
   				</div>
			</div>
		</div>														   				
		<div style="height: 20px;"></div>
	</div>


<% if false %>
<!-- user background image - crop 18 -->
<div class="jqmWindow jqmWindow-18" id="dialog_18">
	<div class="dialog-topbar-1" style="margin-top:0px;">
		<div style="height: 63px; width: 60px; float: left; position: absolute;">
			<img src="../assets_knowstory/knowstory-icon-2-w60-h63.png">
		</div>
		<div class="topbar-title">Picture Crop and Center</div>
			<div id="close_form18" class="form-edit-close jqmClose tip-left-center" style="height: 20px; width: 20px; float: right;">
				<%= image_tag('global/x_close_w20_h20.png', alt: 'X', height: '20px' ) %>
			</div>
        <div class="tip-content">
            <div class="tooltiptext">Close</div>
        </div>																															   					   					
			<div style="clear: both;"></div>
	</div>
	<div class="background-table-dialog-3" style="padding: 10px 0 0 0;">
   		<div class="table-dialog-1">
			<div class="dialog-msg-container">
				<span>Below, you may crop and center background picture.</span>
			</div>
			</div>
		</div>
		<div style="height: 10px;"></div>
	<div style="width: 100%; padding: 0 0 0 10px;">
		<div id="render_user_bkgrnd_image_crop">
			<%= render 'users/user_bkgrnd_image_crop' %>
		</div>
	</div>
</div>
<% end %>


	<div style="height: 2px;"></div>
	<div style="width: 1200px;">
		<div class="title-bar" style="position: relative;">
			<div style="display: table; width: 1192px;">
				<div style="display: table-row;">
					<div style="display: table-cell; vertical-align: top; width: 300px; text-align: left;">
						<span class="title-bar-text-1">Product Story</span>
					</div>
					<div style="display: table-cell; vertical-align: top; width: 594px; text-align: center;">
						<span class="title-bar-text-1">id: <%= @publisher_product_gen_id %></span>
					</div>
					<div style="display: table-cell; vertical-align: top; width: 300px;">
						<div class="btn-edit-options-container-outer">
							
							<div class="btn-open-edit-mode-container">
								<div class="" style="display: table;">
									<div style="display: table-row;">
										<div style="display: table-cell; width: 300px;">
											<div class="btn-edit-options-container" style="float: right;">
												<div id="open_edit_mode" class="btn-edit-options" tabindex="">
													Show Edit Options
												</div>
											</div>
											<div style="clear: all;"></div>
										</div>
									</div>
								</div>
							</div>
							<div class="btn-close-edit-mode-container hidden">
								<div class="" style="display: table;">
									<div style="display: table-row;">
										<div style="display: table-cell; width: 300px;">
											<div class="btn-edit-options-container" style="float: right;">
												<div id="close_edit_mode" class="btn-edit-options" tabindex="">
													Hide Edit Options
												</div>
											</div>
											<div style="clear: all;"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div>
			<%= render 'publisher_product_manifests/index' %>			
		</div>
	</div>

</div>


	<script>

	 	// window load

		function arraysAreIdentical(arr1, arr2){
		    if (arr1.length !== arr2.length) return false;
		    for (var i = 0, len = arr1.length; i < len; i++){
		        if (arr1[i] !== arr2[i]){
		            return false;
		        }
		    }
		    return true; 
		}

		function set_updated(s_updated) {
			$("#render_updated").html(s_updated);
		}
		
		function countChar_1(val) {
	    	var len = val.value.length;
	        if (len > 150) {
	        	val.value = val.value.substring(0, 150);
	        } else {
	        	$('#char_num_1').text(150 - len);
	      	}
		}

		function countChar_2(val) {
	    	var len = val.value.length;
	        if (len > 150) {
	        	val.value = val.value.substring(0, 150);
	        } else {
	        	$('#char_num_2').text(150 - len);
	      	}
		}

		function set_control_required(cntrl, b) {
			var s_cntrl = "#required_" + cntrl;
			if(b) {
				$(s_cntrl).addClass("check-required").removeClass("display-none");	
			}
			else {
				$(s_cntrl).removeClass("check-required").addClass("display-none");
			}
		}

		function set_control_span(cntrl, s, b) {
			var s_cntrl = "#span_" + cntrl;
			$(s_cntrl).html(s);
			if (b) {
				$(s_cntrl).removeClass("color-no-record").addClass("color-record");
			}
			else {
				$(s_cntrl).removeClass("color-record").addClass("color-no-record");				
			}
		}

		function set_control(cntrl, s, b) {
			var s_cntrl = "#" + cntrl;
			$(s_cntrl).html(s);
		}

		function show_control(cntrl) {
			var s_edit = "#edit_" + cntrl;
			var s_show = "#show_" + cntrl;
			var s_open_edit = "#open_edit_" + cntrl;		
    		$(s_edit).fadeOut(300, function() {
    			$(s_edit).addClass("hidden");
    			$(s_show).fadeIn(1300).removeClass("hidden");
    			$(s_open_edit).fadeIn(1300).removeClass("visibility-hidden");
    		});
		}
		
		function show_control_class(cntrl, cntrl_class) {
			var s_edit = ".edit-" + cntrl_class;
			var s_show = "#show_" + cntrl;
			var s_open_edit = "#open_edit_" + cntrl;		
    		$(s_edit).fadeOut(300, function() {
    			$(s_edit).addClass("hidden");
    			$(s_show).fadeIn(1300).removeClass("hidden");
    			$(s_open_edit).fadeIn(1300).removeClass("visibility-hidden");
    		});
		}

		function show_control_standard(cntrl) {
			var s_1 = "#box_detail_" + cntrl;
			var s_2 = "#box_detail_table_" + cntrl;
			var s_3 = "#cell_outer_" + cntrl;
			var s_4 = "#cell_inner_" + cntrl;
		}
		
		function show_control_standard_edit(cntrl) {
			var s_1 = "#box_detail_" + cntrl;
			var s_2 = "#box_detail_table_" + cntrl;
			var s_3 = "#cell_outer_" + cntrl;
			var s_4 = "#cell_inner_" + cntrl;
		}

		function show_control_dbl(cntrl, cntrl1, cntrl2) {
			var s_edit = "#edit_" + cntrl1 + ", #edit_" + cntrl2;
			var s_show = "#show_" + cntrl1 + ", #show_" + cntrl2;		
			var s_open = "#open_edit_" + cntrl;		
    		$(s_edit).fadeOut(300, function(){
    			$(s_edit).addClass("hidden");
    			$(s_show).fadeIn(1300).removeClass("hidden");
    			$(s_open).fadeIn(1300).removeClass("visibility-hidden");
    		});
		}

		function set_cb_init(cb, cc) {
			var sb = "#" + cb;
			var sc = "#" + cc;
			if($(sb).is(':checked')) {
				$(sc).addClass("cb-background");
			}
			else {
				$(sc).removeClass("cb-background");
			}					
		}
		
		function set_cb(cb, cc) {
			var sb = "#" + cb;
			var sc = "#" + cc;
			if($(sb).is(':checked')) {
				$(sb).prop('checked', false);
				$(sc).removeClass("cb-background");
			}
			else {
				$(sb).prop('checked', true);
				$(sc).addClass("cb-background");
			}					
		}

		image_1_width  		= null;
		image_1_height 		= null;
		image_1_width_edit 	= null;
		image_1_height_edit = null;
		function editImage_1_init(w, h, w_edit, h_edit) {
			image_1_width 		= w;
			image_1_height 		= h;
			image_1_width_edit 	= w_edit;
			image_1_height_edit = h_edit;
		}
		function editImage_1_initDimensions(img_w_edit, img_h_edit) {
			$(".drop-namespace101 .figure-image-1-edit").css({
				// width : img_w_edit,
				height : img_h_edit						
			});
			$(".drop-namespace101 figcaption.edit-image-1").css({
				width : img_w_edit,
				height : img_h_edit						
			});
		}
	  	function showEditMode_image_1() {
			$(".edit-image-1").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-1 figure").addClass("figure-image-1-edit");				
			editImage_1_initDimensions(image_1_width_edit, image_1_height_edit);
		}
	  	function cancelEditMode_image_1() {
			$(".container-figure-image-1 figure").removeClass("figure-image-1-edit");
			$(".container-figure-image-1 figure").removeAttr("style");
			$(".edit-image-1").removeAttr("style");				
			$(".edit-image-1").fadeIn(200).addClass("hidden");			
		}
		
	  	// function showEditMode_image_1() {
			// editImage_1_initDimensions(image_1_width_edit, image_1_height_edit);
			// $(".edit-image-1").fadeIn(200).removeClass("hidden");
			// $(".container-figure-image-1 figure").addClass("figure-image-1-edit");				
		// }
	  	// function cancelEditMode_image_1() {
			// $(".container-figure-image-1 figure").removeClass("figure-image-1-edit");
			// $(".edit-image-1").removeAttr("style");				
			// $(".edit-image-1").fadeIn(200).addClass("hidden");			
		// }

		image_2_width  		= null;
		image_2_height 		= null;
		image_2_width_edit 	= null;
		image_2_height_edit = null;
		function editImage_2_init(w, h, w_edit, h_edit) {
			image_2_width 		= w;
			image_2_height 		= h;
			image_2_width_edit 	= w_edit;
			image_2_height_edit = h_edit;
		}
		function editImage_2_initDimensions(img_w_edit, img_h_edit) {
			$(".drop-namespace102 .figure-image-2-edit").css({
				// width : img_w_edit,
				height : img_h_edit						
			});
			$(".drop-namespace102 figcaption.edit-image-2").css({
				width : img_w_edit,
				height : img_h_edit						
			});
		}
	  	function showEditMode_image_2() {
			$(".edit-image-2").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-2 figure").addClass("figure-image-2-edit");				
			editImage_2_initDimensions(image_2_width_edit, image_2_height_edit);
		}
	  	function cancelEditMode_image_2() {
			$(".container-figure-image-2 figure").removeClass("figure-image-2-edit");
			$(".container-figure-image-2 figure").removeAttr("style");
			$(".edit-image-2").removeAttr("style");				
			$(".edit-image-2").fadeIn(200).addClass("hidden");			
		}

		image_3_width  		= null;
		image_3_height 		= null;
		image_3_width_edit 	= null;
		image_3_height_edit = null;
		function editImage_3_init(w, h, w_edit, h_edit) {
			image_3_width 		= w;
			image_3_height 		= h;
			image_3_width_edit 	= w_edit;
			image_3_height_edit = h_edit;
		}
		function editImage_3_initDimensions(img_w_edit, img_h_edit) {
			$(".drop-namespace103 .figure-image-3-edit").css({
				// width : img_w_edit,
				height : img_h_edit						
			});
			$(".drop-namespace103 figcaption.edit-image-3").css({
				width : img_w_edit,
				height : img_h_edit						
			});
		}
	  	function showEditMode_image_3() {
			$(".edit-image-3").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-3 figure").addClass("figure-image-3-edit");				
			editImage_3_initDimensions(image_3_width_edit, image_3_height_edit);
		}
	  	function cancelEditMode_image_3() {
			$(".container-figure-image-3 figure").removeClass("figure-image-3-edit");
			$(".container-figure-image-3 figure").removeAttr("style");
			$(".edit-image-3").removeAttr("style");				
			$(".edit-image-3").fadeIn(200).addClass("hidden");			
		}

		image_4_width  		= null;
		image_4_height 		= null;
		image_4_width_edit 	= null;
		image_4_height_edit = null;
		function editImage_4_init(w, h, w_edit, h_edit) {
			image_4_width 		= w;
			image_4_height 		= h;
			image_4_width_edit 	= w_edit;
			image_4_height_edit = h_edit;
		}
		function editImage_4_initDimensions(img_w_edit, img_h_edit) {
			$(".drop-namespace104 .figure-image-4-edit").css({
				// width : img_w_edit,
				height : img_h_edit						
			});
			$(".drop-namespace104 figcaption.edit-image-4").css({
				width : img_w_edit,
				height : img_h_edit						
			});
		}
	  	function showEditMode_image_4() {
			$(".edit-image-4").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-4 figure").addClass("figure-image-4-edit");				
			editImage_4_initDimensions(image_4_width_edit, image_4_height_edit);
		}
	  	function cancelEditMode_image_4() {
			$(".container-figure-image-4 figure").removeClass("figure-image-4-edit");
			$(".container-figure-image-4 figure").removeAttr("style");
			$(".edit-image-4").removeAttr("style");				
			$(".edit-image-4").fadeIn(200).addClass("hidden");			
		}
		
	  	function showEditMode() {
			// $("#open_edit_mode, .show-edit-mode").fadeOut(200, function(){
			$(".btn-open-edit-mode-container").fadeOut(200, function(){    			
				// $("#open_edit_mode").addClass("hidden");
				$(".btn-open-edit-mode-container").addClass("hidden");
				// $("#close_edit_mode").fadeIn(200).removeClass("hidden");
				$(".btn-close-edit-mode-container").fadeIn(200).removeClass("hidden");
    			// $(".show-edit-mode").addClass("hidden");
				$(".edit-image").fadeIn(200).removeClass("hidden");


				// $(".container-figure-image-1").removeClass("container-figure-image-border-101").addClass("container-figure-image-border-edit-101");
				// $(".container-figure-image-2").removeClass("container-figure-image-border-102").addClass("container-figure-image-border-edit-102");
				// $(".container-figure-image-3").removeClass("container-figure-image-border-103").addClass("container-figure-image-border-edit-103");
				// $(".container-figure-image-4").removeClass("container-figure-image-border-104").addClass("container-figure-image-border-edit-104");
				$(".edit-options").removeClass("hidden");
				$("#show_product_tagline_container").removeClass("width-show-1").addClass("width-show-edit-1");
				$("#show_product_name_container").removeClass("width-show-2").addClass("width-show-edit-2");
				$("#show_versions_container").removeClass("width-show-2").addClass("width-show-edit-2");
				$("#show_corporate_logo_url_container").removeClass("width-show-2").addClass("width-show-edit-2");
				$(".drop-namespace105").removeClass("hidden");
				$("#background_options").addClass("background-edit-border");
				
				$("#span_product_headline").addClass("box-detail-color-edit");
				
				$(".box-detail-title").removeClass("box-detail-title-color").addClass("box-detail-title-color-edit");
				$(".box-detail").removeClass("box-detail-color").addClass("box-detail-color-edit");
				$(".input-container-1").removeClass("input-container-1-color").addClass("input-container-1-color-edit-open");
				
				showEditMode_image_1();
				showEditMode_image_2();
				showEditMode_image_3();
				showEditMode_image_4();				
    		});
	  	}
	  
	  	function cancelEditMode() {

			hideEditId_10();
			hideEditId_11();
			
			// show_control("product_tagline");
			// $("#cancel_product_tagline").click();
			
			
			
			
			

			// $(".show-edit-mode").removeClass("hidden").fadeIn(300);
			// $("#open_edit_mode").removeClass("hidden").fadeIn(200);
			$(".btn-open-edit-mode-container").removeClass("hidden").fadeIn(200);
			// $("#close_edit_mode").addClass("hidden");
			$(".btn-close-edit-mode-container").addClass("hidden");
			$(".edit-image").removeAttr("style");				
			$(".edit-image").fadeIn(200).addClass("hidden");
			// $(".container-figure-image-1").removeClass("container-figure-image-border-edit-101").addClass("container-figure-image-border-101");
			// $(".container-figure-image-2").removeClass("container-figure-image-border-edit-102").addClass("container-figure-image-border-102");
			// $(".container-figure-image-3").removeClass("container-figure-image-border-edit-103").addClass("container-figure-image-border-103");
			// $(".container-figure-image-4").removeClass("container-figure-image-border-edit-104").addClass("container-figure-image-border-104");
			$(".edit-options").addClass("hidden");
			$("#show_product_tagline_container").removeClass("width-show-edit-1").addClass("width-show-1");
			$("#show_product_name_container").removeClass("width-show-edit-2").addClass("width-show-2");
			$("#show_versions_container").removeClass("width-show-edit-2").addClass("width-show-2");
			$("#show_corporate_logo_url_container").removeClass("width-show-edit-2").addClass("width-show-2");
			$(".drop-namespace105").addClass("hidden");
			$("#render_image_5").removeClass("background-edit-border");

			$("#span_product_headline").removeClass("box-detail-color-edit");
			
			$(".box-detail-title").removeClass("box-detail-title-color-edit").addClass("box-detail-title-color");
			$(".box-detail").removeClass("box-detail-color-edit").addClass("box-detail-color");
			$(".input-container-1").removeClass("input-container-1-color-edit-open").addClass("input-container-1-color");			
				
			cancelEditMode_image_1();
			cancelEditMode_image_2();
			cancelEditMode_image_3();
			cancelEditMode_image_4();
					
			hideEditId_1();
			// hideEditId_10();
			
			
	  	}

		var info_msg_1 = 	'<span>This is the way to do it...</span>';

		var info_msg_2 = 	'<span>Headline for product</span>';
		
		var info_msg_3 = 	'<span>Name or title of product</span>';
		
		var info_msg_4 = 	'<span>Product version(s)</span>';

		var info_msg_5 = 	'<span>Description</span>';

		var info_msg_6 = 	'<p><strong>Apps</strong></p>' +
							'<p>A self-contained program or piece of software designed to fulfill a particular educational purpose; an APPlication, especially as downloaded by a user to a mobile device.</p>' +
							'<br>' +
							'<p><strong>Assessment/Testing</strong></p>' +
							'<p>Formative or Summative Assessments, Tests</p>' +
							'<br>' +
							'<p><strong>Digital Content</strong></p>' +
							'<p>Any type of digital content in text that may be audio enhanced, courses, lesson plans</p>' +
							'<br>' +
							'<p><strong>Curriculum (Websites)</strong></p>' +
							'<p>Interactive multimedia curriculum which may have mutliple lessons crossing multiple grades; or other collections of resources like ebooks.</p>' +
							'<br>' +
							'<p><strong>eBook</strong></p>' +
							'<p>A book composed in or converted to digital format for display on a computer screen or handheld device; may contain multimedia including audio enhanced.</p>' +
							'<br>' +
							'<p><strong>Learning Games</strong></p>' +
							'<p>Game-based subject learning including but not limited to physical education.</p>' +
							'<br>' +
							'<p><strong>Service</strong></p>' +
							'<p>Educational services and staffing including special needs teachers, other therapy, trainers, etc. Does not include facilities management, food service, or things not related to teaching and learning.</p>' +
							'<br>' +
							'<p><strong>School Management Software</strong></p>' +
							'<p>Major systems including Learning Management Systems, Student Information Systems or Campus Management Systems related to student and teacher achievement or resources.</p>' +
							'<br>' +
							'<p><strong>Technical Skills Software</strong></p>' +
							'<p>Includes vocational softwares and the student or professional development to learn them.</p>' +
							'<br>' +
							'<p><strong>Software Tools (Collaboration, Creation, etc.)</strong></p>' +
							'<p>Includes collaboration, presentation, instructional creation tools.</p>' +
							'<br>' +
							'<p><strong>Video</strong></p>' +
							'<p>Any video created to be educational.</p>' +
							'<br>' +
							'<p><strong>Other</strong></p>' +
							'<p>Other type that does not fit will into the listed types.</p>' +
							'<br>';

		var info_msg_7 = 	'<span>General educational subject category</span>';

		var info_msg_8 = 	'<p>Topic area as a sub-section of a subject such as Math (Subject) "Fractions" (Topic),' +  
							'Social Studies (Subject) "Civil War" (Topic),' +  
							'History (Subject) "Ancient Greece" (Topic),' + 
							'or Management (Subject) "Personal Finance" (Topic).</p>'; 

		var info_msg_9 = 	'<span>Select an age range for which the content is appropriate.</span>';
		
		var info_msg_10 = 	'<span>Select a grade range for which the content is appropriate.</span>';
		
		var info_msg_11 = 	'<p><strong>Market</strong></p>' +
							'<p>Target buyers of this educational content or curriculum.</p>' +
							'<br>' +
							'<p><strong>Consumer</strong></p>' +
							'<p>Students, parents or individual teachers.</p>' +
							'<br>' +
							'<p><strong>Institutions</strong></p>' +
							'<p>Schools, districts or States.</p>' +
							'<br>';

		var info_msg_12 = 	'<p>Lesson plan area under the Subject and Topic such as Science (Subject),</p>' +
							'<p>Geologic Phenomena (Topic), "Volcanoes" (Lesson Plan Subject), etc.</p>' +
							'<br>';

		var info_msg_13 = 	'<span>Estimated lesson-time used for this product or lessons within it.</span>';

		var info_msg_14 = 	'<span>Platform</span>';

		var info_msg_15 = 	'<span>File Type</span>';

		var info_msg_16 = 	'<p><strong>Audio</strong></p>' +
							'<p>Contains any form of audio enhancement including voice-over reading or music.</p>' +
							'<br>' +
							'<p><strong>Visuals</strong></p>' +
							'<p>Contains pictures or graphics to illustrate the subject matter.</p>' +
							'<br>' +
							'<p><strong>Interactive Graphics</strong></p>' +
							'<p>Contains graphics that are interactive such as grids the student must place a</p>' +
							'<p>line in or draw or some element; or some drag-and-drop or matching that requires</p>' +
							'<p>manual manipulation or choice.</p>' +

							'<p><strong>Formative Assessments</strong></p>' +
							'<p>Questions or challenges that assess student learning or show student progress;</p>' +
							'<p>formative assessments can be used to provide ongoing feedback that can be used</p>' +
							'<p>adaptively to direct additional lessons, push the student up a level, or be used</p>' +
							'<p>to give metrics to teachers or for the publisher to further adapt the learning experience.</p>' +
							'<br>' +

							'<p><strong>Summative Assessments</strong></p>' +
							'<p>A summative assessment is used to evaluate student learning at the end of an instructional</p>' +
							'<p>unit by comparing it against some standard or benchmark. Examples include final exams,</p>' +
							'<p>final projects, final papers, final recitals, etc.</p>' +
							'<br>' +

							'<p><strong>Chunking</strong></p>' +
							'<p>Chunking refers to a content design approach of breaking up large amounts of information</p>' +
							'<p>into "chunks" in digital presentation such as a single HTML page or lessons.</p>' +
							'<br>' +

							'<p><strong>Labeled per Standard</strong></p>' +
							'<p>Is the content labeled-by-lesson or section as to what provides material towards which Standard.</p>' +
							'<br>' +

							'<p><strong>Video</strong></p>' +
							'<p>An educational video</p>' +
							'<br>' +

							'<p><strong>Gaming</strong></p>' +
							'<p>Contains one or more of the following: animation, rewards/bonus/prizes systems, levels, life-span,</p>' +
							'<p>timer-by-activity, opponents, false/true, alternate paths for additional lessons or remedies.</p>' +
							'<br>' +

							'<p><strong>Feedback</strong></p>' +
							'<p>Contains a means for student-teacher interaction or student-to-student project interaction;</p>' +
							'<p>student voting or answering.</p>' +
							'<br>' +

							'<p><strong>Metrics</strong></p>' +
							'<p>Contains a metering function for student progress, telling the student by timer or other element a progress grade.</p>' +
							'<br>' +

							'<p><strong>Terminology</strong></p>' +
							'<p>Contains a terminology appendix or hotlinks on words to their definitions.</p>' +
							'<br>';

		var info_msg_17 = 	'<span>Reviewed by...</span>';

		var info_msg_18 = 	'<p>A freemium product is provided with limited features for free and charges for full-feature functionality.</p>';

		var info_msg_19 = 	'<span>Price</span>';

		var info_msg_20 = 	'<span>Core Literacy Standard</span>';

		var info_msg_21 = 	'<span>Core Math Standard</span>';
		
		var info_msg_22 = 	'<span>Allow Teacher Ratings</span>';
		
		var info_msg_23 = 	'<span>Allow Comments</span>';
		
		var info_msg_24 = 	'<span>Allow Student Likes</span>';
		
		var info_msg_25 = 	"<p>Research based studies validating the publisher's approach or validating student achievement through use.</p>";

		var info_msg_26 = 	'<span>Corporate URL</span>';
		
		var info_msg_27 = 	'<span>Product Tagline</span>';
		
		var info_msg_28 = 	'<span>Poster Print Purchase</span>';
		
		var info_msg_29 = 	'<span>Poster Pin</span>';
		
		var info_msg_30 = 	'<span>Poster Pin Purchase</span>';
		
		var publisher_product_id = null;
		var divHeight_1001 = 0;
		var info_msg = null;

		
		$(window).load( function() {
		// $(document).ready(function(){

			publisher_product_id = gon.publisher_product_id;

			document.body.setAttribute('spellcheck', false);

			$(".chosen-select").chosen({
				disable_search_threshold: 100
			});

			$(document).on("click", '#btn_dlg_1001_cancel', function() {
				$("#close_form1001").trigger('click');
			});

			$('#dialog_1001').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_overlay').jqm({
				overlay: 84,
				onShow: function(hash) {
					hash.w.css('opacity', 1.0).fadeIn(10);
					hash.o.prependTo('body');
				},
				onHide: function(hash) {
					hash.o.remove();
					hash.w.css('top', '-8000px');
				}
			}); 		

			// btn-open-edit-mode-container
    		$(".btn-open-edit-mode-container").keypress(function(e){
      			if(e.keyCode==13)
      			$(".btn-open-edit-mode-container").click();
    		});			
		  	$(".btn-open-edit-mode-container").click(function(){
				showEditMode();
		  	});	
    		$(".btn-close-edit-mode-container").keypress(function(e){
      			if(e.keyCode==13)
      			$(".btn-close-edit-mode-container").click();
    		});			
		  	$(".btn-close-edit-mode-container").click(function(){
				cancelEditMode();
		  	});	

    		// $("#open_edit_mode").keypress(function(e){
      			// if(e.keyCode==13)
      			// $("#open_edit_mode").click();
    		// });			
		  	// $("#open_edit_mode").click(function(){
				// showEditMode();
		  	// });	
    		// $("#close_edit_mode").keypress(function(e){
      			// if(e.keyCode==13)
      			// $("#close_edit_mode").click();
    		// });			
		  	// $("#close_edit_mode").click(function(){
				// cancelEditMode();
		  	// });	

		});
	  
	</script>		


	<script>

	 	// validate / validation
		
		function validatePDFFiles(inputFile) {
		  var maxExceededMessage = "This file exceeds the maximum allowed file size (5 MB)";
		  var extErrorMessage = "Only PDF file with extension: .pdf is allowed";
		  var allowedExtension = ["pdf"];
		  
		  var extName;
		  var maxFileSize = $(inputFile).data('max-file-size');
		  var sizeExceeded = false;
		  var extError = false;
		  
		  $.each(inputFile.files, function() {
		    if (this.size && maxFileSize && this.size > parseInt(maxFileSize)) {sizeExceeded=true;};
		    extName = this.name.split('.').pop();
		    if ($.inArray(extName, allowedExtension) == -1) {extError=true;};
		  });
		  if (sizeExceeded) {
		    window.alert(maxExceededMessage);
		    $(inputFile).val('');
		  };
		  
		  if (extError) {
		    window.alert(extErrorMessage);
		    $(inputFile).val('');
		  };
		}
		
		function validateImageFiles(inputFile) {
		  var maxExceededMessage = "This file exceeds the maximum allowed file size (5 MB)";
		  var extErrorMessage = "Only image file with extension: .jpg, .jpeg, .gif or .png is allowed";
		  var allowedExtension = ["jpg", "jpeg", "gif", "png"];
		  
		  var extName;
		  var maxFileSize = $(inputFile).data('max-file-size');
		  var sizeExceeded = false;
		  var extError = false;
		  
		  $.each(inputFile.files, function() {
		    if (this.size && maxFileSize && this.size > parseInt(maxFileSize)) {sizeExceeded=true;};
		    extName = this.name.split('.').pop();
		    if ($.inArray(extName, allowedExtension) == -1) {extError=true;};
		  });
		  if (sizeExceeded) {
		    window.alert(maxExceededMessage);
		    $(inputFile).val('');
		  };
		  
		  if (extError) {
		    window.alert(extErrorMessage);
		    $(inputFile).val('');
		  };
		}

	</script>

	<script>

		// pdf
		
		function set_publisher_product_pdf_id(pdf_id) {
			alert('set_publisher_product_pdf_id(pdf_id)');
    		document.getElementById("id_publisher_product_pdf").value = pdf_id
			$("#form8").slideDown(400, function(){ $("#form8a").fadeIn( 2000 ) });
		}

		function closeAddPdf() {
			$("#close_form52").trigger('click');
			showEditMode();
		};	  

		function closeAddPdfImage() {
			$("#dvLoading_51").addClass("dvLoading-display-none");
			$("#close_form51").trigger('click');
			showEditMode();			
		};	  

		function closeAddPdfImageChange() {
			$("#dvLoading_53").addClass("dvLoading-display-none");
			$("#close_form53").trigger('click');
			showEditMode();			
		};	  
		
		function closeDeletePdfImage() {
			$("#dvLoading_53").addClass("dvLoading-display-none");
			$("#close_form55").trigger('click');
			showEditMode();
		};	  

		function closeDeletePdf() {
			$("#close_form54").trigger('click');
			showEditMode();
		};	  

		function closeEditPDFs() {
			alert('closeEditPDFs()');
			$("#form4a").fadeOut(700, function(){ 
				$("#form4").slideUp(400); 
			});
		}

		function closeEditPDFimages() {
			alert('closeEditPDFimages()');
			$("#form8a").fadeOut(700, function(){ 
				$("#form8").slideUp(400);
			});
		}

		function deletePDF(publisher_product_pdf_id) {
			var formData = { publisher_product_id: publisher_product_id, 
							 publisher_product_pdf_id: publisher_product_pdf_id 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/destroy_pdf',	
		    	// cache: false,		    	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            		if (!data.b_error) {
            		}
            		else {
						alert('An error occured while deleting this pdf.');	            			
            		}
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}

		function deletePDFImage(publisher_product_pdf_id) {
			var formData = { publisher_product_id: publisher_product_id, 
							 publisher_product_pdf_id: publisher_product_pdf_id 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/destroy_pdf_image',	
		    	// cache: false,		    	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            		if (!data.b_error) {
            		}
            		else {
						alert('An error occured while deleting this image.');	            			
            		}
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}


		$(document).ready(function () {				

			$(document).on('click', '#open_info_name_pdf', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_25);
				$("#dialog_1001").jqmShow();
			});

			$(".figure-pdf-image-generic").on('click', function() {
				$(".dialog-51").trigger('click');
			});			
			$(".dialog-51").on('click', function() {
				var s_id = $(this).attr("name");
				$("#publisher_product_pdf_id").val(s_id);
				$("#dialog_51").jqmShow();
			});
			$('#dialog_51').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		
			
			$("#title_pdfs").on('click', function() {
				$("#dialog_52").jqmShow();
			});
			
			$('#dialog_52').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		
			
			$('#dialog_53').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_54').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_55').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			
			var id_pdf_51 = null;
			$(document).on("btn_pdf_image_new_click", function(event, id_pdf) {
				id_pdf_51 = id_pdf
				$("#dialog_51").jqmShow();
			});	
			$(document).on("click", ".btn-image-5-new", function() {
				id_pdf_51 = $(this).attr("name");
				$("#dialog_51").jqmShow();
			});	
			$(document).on("click", "#btn_dlg_51_submit", function() {
				$("#dvLoading_51").removeClass("dvLoading-display-none");
				$("form#new_publisher_product_pdf_image input#new_pdf_image_image").click();
			});	
			$(document).on("change", "form#new_publisher_product_pdf_image input#new_pdf_image_image", function() {
				$("form#new_publisher_product_pdf_image input#publisher_product_pdf_id").val(id_pdf_51);
				$("#dvLoading_51").removeClass("dvLoading-display-none");
				// validatePDFFiles(this);
				$("form#new_publisher_product_pdf_image input#btn_submit_51").click();
			});
			$(document).on("click", "#btn_dlg_51_cancel", function() {
				$("#close_form51").trigger('click');
			});
					
			$(document).on("click", "#btn_dlg_52_submit", function() {
				$("form#new_publisher_product_pdf input#name_file").click();
			});	
			$(document).on("click", "#btn_dlg_52_cancel", function() {
				$("#close_form52").trigger('click');
			});
			$(document).on("change", "form#new_publisher_product_pdf input#name_file", function() {
				$("#dvLoading_52").removeClass("dvLoading-display-none");
				// validatePDFFiles(this);
				$("form#new_publisher_product_pdf input#btn_submit_52").click();
			});

			var id_pdf_53 = null;
			$(document).on("btn_pdf_image_change_click", function(event, id_pdf) {
				id_pdf_53 = id_pdf
				$("#dialog_53").jqmShow();
			});	
			$(document).on("click", "#btn_dlg_53_submit", function() {
				$("#dvLoading_53").removeClass("dvLoading-display-none");
				$("form#change_publisher_product_pdf_image input#change_pdf_image_image").click();
			});	
			$(document).on("change", "form#change_publisher_product_pdf_image input#change_pdf_image_image", function() {
				$("form#change_publisher_product_pdf_image input#publisher_product_pdf_id").val(id_pdf_53);
				$("#dvLoading_53").removeClass("dvLoading-display-none");
				// validatePDFFiles(this);
				$("form#change_publisher_product_pdf_image input#btn_submit_53").click();
			});
			$(document).on("click", "#btn_dlg_53_cancel", function() {
				$("#close_form53").trigger('click');
			});

			var id_pdf_54 = null;
			$(document).on("click", ".btn-pdf-delete", function() {
				id_pdf_54 = $(this).data('id-pdf');
				$("#dialog_54").jqmShow();
			});	
			$(document).on("click", "#btn_dlg_54_submit", function() {
				deletePDF(id_pdf_54);
			});	
			$(document).on("click", "#btn_dlg_54_cancel", function() {
				$("#close_form54").trigger('click');
			});

			var id_pdf_55 = null;
			$(document).on("btn_pdf_image_delete_click", function(event, id_pdf) {
				id_pdf_55 = id_pdf
				$("#dialog_55").jqmShow();
			});	
			$(document).on("click", "#btn_dlg_55_submit", function() {
				deletePDFImage(id_pdf_55);
			});	
			$(document).on("click", "#btn_dlg_55_cancel", function() {
				$("#close_form55").trigger('click');
			});	
			
		});
		

	</script>

	<script>
		
		// description

		var description_html = null;
		var savedRange_description,isInFocus_description;

 		function saveSelection_description()
		{
		    if(window.getSelection)//non IE Browsers
		    {
		        savedRange_description = window.getSelection().getRangeAt(0);
		    }
		    else if(document.selection)//IE
		    { 
		        savedRange_description = document.selection.createRange();  
		    } 
		}
		
		function restoreSelection_description()
		{
		    isInFocus_description = true;
		    document.getElementById("textarea_description_edit").focus();
		    if (savedRange_description != null) {
		        if (window.getSelection)//non IE and there is already a selection
		        {
		            var s = window.getSelection();
		            if (s.rangeCount > 0) 
		                s.removeAllRanges();
		            s.addRange(savedRange_description);
		        }
		        else if (document.createRange)//non IE and no selection
		        {
		            window.getSelection().addRange(savedRange_description);
		        }
		        else if (document.selection)//IE
		        {
		            savedRange_description.select();
		        }
		    }
		}
		
		//this part onwards is only needed if you want to restore selection onclick
		var isInFocus_description = false;
		function onDivBlur_description()
		{
		    isInFocus_description = false;
		}
		
		function cancelEvent_description(e)
		{
		    if (isInFocus_description == false && savedRange_description != null) {
		        if (e && e.preventDefault) {
		            e.stopPropagation(); // DOM style (return false doesn't always work in FF)
		            e.preventDefault();
		        }
		        else {
		            window.event.cancelBubble = true;//IE stopPropagation
		        }
		        restoreSelection_description();
		        return false; // false = IE style
		    }
		}
		
		function insertTextAtCursor_description(text) {
		    var sel, range, html;
		    if (window.getSelection) {
		        sel = window.getSelection();
		        if (sel.getRangeAt && sel.rangeCount) {
		            range = sel.getRangeAt(0);
		            range.deleteContents();
		            range.insertNode( document.createTextNode(text) );
		            range.collapse(false);
		        }
		    } else if (document.selection && document.selection.createRange) {
		        document.selection.createRange().text = text;
		    }
		}			  	

		function doGetCaretPosition (ctrl) {
			var CaretPos = 0;   // IE Support
			if (document.selection) {
				ctrl.focus ();
				var Sel = document.selection.createRange ();
				Sel.moveStart ('character', -ctrl.value.length);
				CaretPos = Sel.text.length;
			}
			// Firefox support
			else if (ctrl.selectionStart || ctrl.selectionStart == '0') {
				CaretPos = ctrl.selectionStart;
			}
			return (CaretPos);
		}
		
	  	// function showEditDescription() {
    		// $("#textarea_description_edit").html(description_html);
			// $("#textarea_description").focus();								    		
		// }
		
		function partialInitRenderTextareaDescription() {
			var v = $("#textarea_description").html();
			var w = "";
			if ( ((v == "<br>") || (v == "")) && ((w == "<br>") || (w == "")) ) {
				$("#textarea_description").addClass("textarea-description-empty");
			}
			else {
				$("#textarea_description").removeClass("textarea-description-empty");
			}			
		}
		
		function initRenderTextareaDescription() {
			$("#textarea_description").html(description_html);
			partialInitRenderTextareaDescription();
		}


		function showEditId_101() {
			$("#control_101_show").addClass("hidden");
			$("#control_101_edit").fadeIn(1300).removeClass("hidden");
			$("#textarea_description_edit").html(description_html);
			$("#textarea_description").focus();								    		
		}
	
		function hideEditId_101() {
			$('#control_101_edit').fadeOut(300, function() {
				$('#control_101_edit').addClass("hidden");
				$('#control_101_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function () {				


			$(document).on('click', '.control-101-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-101-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_101_edit').hasClass('hidden')) {
							$('.control-101-edit-options').removeClass('hidden');
							showEditId_101();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-101-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_101();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_description', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_5);
				$("#dialog_1001").jqmShow();
			});

			description_html = "<%= @publisher_product_description_description_text.html_safe %>";
			initRenderTextareaDescription();

			// onblur="onDivBlur();" 
			// onmousedown="return cancelEvent(event);" 
			// onclick="return cancelEvent(event);" 
			// contentEditable="true" 
			// onmouseup="saveSelection();" 
			// onkeyup="saveSelection();" 
			// onfocus="restoreSelection();"

		    $("#textarea_description_edit").on ('blur', function (e) {
				onDivBlur_description();
		    });
		    $("#textarea_description_edit").on ('mousedown', function (e) {
				return cancelEvent_description(e);
		    });
		    $("#textarea_description_edit").on ('click', function (e) {
				return cancelEvent_description(e);
		    });
		    $("#textarea_description_edit").on ('mouseup', function (e) {
				saveSelection_description();
		    });
		    $("#textarea_description_edit").on ('keyup', function (e) {
				saveSelection_description();
		    });
		    $("#textarea_description_edit").on ('focus', function (e) {
				restoreSelection_description();
		    });
		    $("#textarea_description_edit").on ('keydown', function (e) {
		    	if( e.keyCode == 9) {
		    		e.preventDefault();
					insertTextAtCursor_description("\t");
		    	}
		    });
    		$("#submit_description").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_description").click();
    		});
    		$("#cancel_description").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_description").click();
    		});	
			$("#cancel_description").on('click', function() {
				// show_control("description");
				control_101_cancel_clicked = true;
				hideEditId_101();
			});
			// $("#open_edit_description").click(function(){
	    		// $("#show_description, #open_edit_description").fadeOut(300, function(){
	    			// $("#show_description").addClass("hidden");
	    			// $("#edit_description").fadeIn(1300).removeClass("hidden");
	    			// showEditDescription();	    	
	    			// $("#textarea_description").focus();								
	    		// });
		  	// });    		
			$("#submit_description").on('click', function() {
				var input_publisher_product_description = $("#textarea_description_edit").html().replace(/\t/g, '\\t');
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "description":"' + input_publisher_product_description +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_description',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							description_html = data.description;
							initRenderTextareaDescription();
							// show_control("description");
							hideEditId_101();
	            		}
	            		else {
	            			hideEditId_101();
	            			// show_control("description");
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});
			

		});
		
				
	</script>

	<script>
		
		// topic

		var topic_html = null;
		var savedRange_topic,isInFocus_topic;

 		function saveSelection_topic()
		{
		    if(window.getSelection)//non IE Browsers
		    {
		        savedRange_topic = window.getSelection().getRangeAt(0);
		    }
		    else if(document.selection)//IE
		    { 
		        savedRange_topic = document.selection.createRange();  
		    } 
		}
		
		function restoreSelection_topic()
		{
		    isInFocus_topic = true;
		    document.getElementById("textarea_topic_edit").focus();
		    if (savedRange_topic != null) {
		        if (window.getSelection)//non IE and there is already a selection
		        {
		            var s = window.getSelection();
		            if (s.rangeCount > 0) 
		                s.removeAllRanges();
		            s.addRange(savedRange_topic);
		        }
		        else if (document.createRange)//non IE and no selection
		        {
		            window.getSelection().addRange(savedRange_topic);
		        }
		        else if (document.selection)//IE
		        {
		            savedRange_topic.select();
		        }
		    }
		}
		
		//this part onwards is only needed if you want to restore selection onclick
		var isInFocus_topic = false;
		function onDivBlur_topic()
		{
		    isInFocus_topic = false;
		}
		
		function cancelEvent_topic(e)
		{
		    if (isInFocus_topic == false && savedRange_topic != null) {
		        if (e && e.preventDefault) {
		            e.stopPropagation(); // DOM style (return false doesn't always work in FF)
		            e.preventDefault();
		        }
		        else {
		            window.event.cancelBubble = true;//IE stopPropagation
		        }
		        restoreSelection_topic();
		        return false; // false = IE style
		    }
		}
		
		function insertTextAtCursor_topic(text) {
		    var sel, range, html;
		    if (window.getSelection) {
		        sel = window.getSelection();
		        if (sel.getRangeAt && sel.rangeCount) {
		            range = sel.getRangeAt(0);
		            range.deleteContents();
		            range.insertNode( document.createTextNode(text) );
		            range.collapse(false);
		        }
		    } else if (document.selection && document.selection.createRange) {
		        document.selection.createRange().text = text;
		    }
		}			  	

		function doGetCaretPosition (ctrl) {
			var CaretPos = 0;   // IE Support
			if (document.selection) {
				ctrl.focus ();
				var Sel = document.selection.createRange ();
				Sel.moveStart ('character', -ctrl.value.length);
				CaretPos = Sel.text.length;
			}
			// Firefox support
			else if (ctrl.selectionStart || ctrl.selectionStart == '0') {
				CaretPos = ctrl.selectionStart;
			}
			return (CaretPos);
		}

	  	function showEditTopic() {
    		$("#textarea_topic_edit").html(topic_html);
		}
		
		function partialInitRenderTextareaTopic() {
			var v = $("#textarea_topic").html();
			var w = "";
			if ( ((v == "<br>") || (v == "")) && ((w == "<br>") || (w == "")) ) {
				$("#textarea_topic").addClass("textarea-topic-empty");
			}
			else {
				$("#textarea_topic").removeClass("textarea-topic-empty");
			}			
		}
		
		function initRenderTextareaTopic() {
			$("#textarea_topic").html(topic_html);
			partialInitRenderTextareaTopic();
		}


		function showEditId_102() {
			$("#control_102_show").addClass("hidden");
			$("#control_102_edit").fadeIn(1300).removeClass("hidden");
			$("#textarea_topic_edit").html(description_html);
			$("#textarea_topic").focus();								    		
		}
	
		function hideEditId_102() {
			$('#control_102_edit').fadeOut(300, function() {
				$('#control_102_edit').addClass("hidden");
				$('#control_102_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function () {				


			$(document).on('click', '.control-102-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-102-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_102_edit').hasClass('hidden')) {
							$('.control-102-edit-options').removeClass('hidden');
							showEditId_102();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-102-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_102();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_topic', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_8);
				$("#dialog_1001").jqmShow();
			});

			topic_html = "<%= @publisher_product_topic_topic_text.html_safe %>";
			initRenderTextareaTopic();

			// onblur="onDivBlur();" 
			// onmousedown="return cancelEvent(event);" 
			// onclick="return cancelEvent(event);" 
			// contentEditable="true" 
			// onmouseup="saveSelection();" 
			// onkeyup="saveSelection();" 
			// onfocus="restoreSelection();"

		    $("#textarea_topic_edit").on ('blur', function (e) {
				onDivBlur_topic();
		    });
		    $("#textarea_topic_edit").on ('mousedown', function (e) {
				return cancelEvent_topic(e);
		    });
		    $("#textarea_topic_edit").on ('click', function (e) {
				return cancelEvent_topic(e);
		    });
		    $("#textarea_topic_edit").on ('mouseup', function (e) {
				saveSelection_topic();
		    });
		    $("#textarea_topic_edit").on ('keyup', function (e) {
				saveSelection_topic();
		    });
		    $("#textarea_topic_edit").on ('focus', function (e) {
				restoreSelection_topic();
		    });
		    $("#textarea_topic_edit").on ('keydown', function (e) {
		    	if( e.keyCode == 9) {
		    		e.preventDefault();
					insertTextAtCursor_topic("\t");
		    	}
		    });
    		$("#submit_topic").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_topic").click();
    		});
    		$("#cancel_topic").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_topic").click();
    		});	
			$("#cancel_topic").on('click', function() {
				// show_control("topic");
				hideEditId_102();
			});
			// $("#open_edit_topic").click(function(){
	    		// $("#show_topic, #open_edit_topic").fadeOut(300, function(){
	    			// $("#show_topic").addClass("hidden");
	    			// $("#edit_topic").fadeIn(1300).removeClass("hidden");
	    			// showEditTopic();	    	
	    			// $("#textarea_topic").focus();								
	    		// });
		  	// });    		
			$("#submit_topic").on('click', function() {
				var input_publisher_product_topic = $("#textarea_topic_edit").html().replace(/\t/g, '\\t');
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "topic":"' + input_publisher_product_topic +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_topic',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							topic_html = data.topic;
							initRenderTextareaTopic();
							// show_control("topic");
							hideEditId_102();
	            		}
	            		else {
	            			// show_control("topic");
	            			hideEditId_102();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});
			

		});
		
				
	</script>

	<script>
		
		// lesson_plan_subject

		var lesson_plan_subject_html = null;
		var savedRange_lesson_plan_subject,isInFocus_lesson_plan_subject;

 		function saveSelection_lesson_plan_subject()
		{
		    if(window.getSelection)//non IE Browsers
		    {
		        savedRange_lesson_plan_subject = window.getSelection().getRangeAt(0);
		    }
		    else if(document.selection)//IE
		    { 
		        savedRange_lesson_plan_subject = document.selection.createRange();  
		    } 
		}
		
		function restoreSelection_lesson_plan_subject()
		{
		    isInFocus_lesson_plan_subject = true;
		    document.getElementById("textarea_lesson_plan_subject_edit").focus();
		    if (savedRange_lesson_plan_subject != null) {
		        if (window.getSelection)//non IE and there is already a selection
		        {
		            var s = window.getSelection();
		            if (s.rangeCount > 0) 
		                s.removeAllRanges();
		            s.addRange(savedRange_lesson_plan_subject);
		        }
		        else if (document.createRange)//non IE and no selection
		        {
		            window.getSelection().addRange(savedRange_lesson_plan_subject);
		        }
		        else if (document.selection)//IE
		        {
		            savedRange_lesson_plan_subject.select();
		        }
		    }
		}
		
		//this part onwards is only needed if you want to restore selection onclick
		var isInFocus_lesson_plan_subject = false;
		function onDivBlur_lesson_plan_subject()
		{
		    isInFocus_lesson_plan_subject = false;
		}
		
		function cancelEvent_lesson_plan_subject(e)
		{
		    if (isInFocus_lesson_plan_subject == false && savedRange_lesson_plan_subject != null) {
		        if (e && e.preventDefault) {
		            e.stopPropagation(); // DOM style (return false doesn't always work in FF)
		            e.preventDefault();
		        }
		        else {
		            window.event.cancelBubble = true;//IE stopPropagation
		        }
		        restoreSelection_lesson_plan_subject();
		        return false; // false = IE style
		    }
		}
		
		function insertTextAtCursor_lesson_plan_subject(text) {
		    var sel, range, html;
		    if (window.getSelection) {
		        sel = window.getSelection();
		        if (sel.getRangeAt && sel.rangeCount) {
		            range = sel.getRangeAt(0);
		            range.deleteContents();
		            range.insertNode( document.createTextNode(text) );
		            range.collapse(false);
		        }
		    } else if (document.selection && document.selection.createRange) {
		        document.selection.createRange().text = text;
		    }
		}			  	

		function doGetCaretPosition (ctrl) {
			var CaretPos = 0;   // IE Support
			if (document.selection) {
				ctrl.focus ();
				var Sel = document.selection.createRange ();
				Sel.moveStart ('character', -ctrl.value.length);
				CaretPos = Sel.text.length;
			}
			// Firefox support
			else if (ctrl.selectionStart || ctrl.selectionStart == '0') {
				CaretPos = ctrl.selectionStart;
			}
			return (CaretPos);
		}

	  	function showEditLessonPlanSubject() {
    		$("#textarea_lesson_plan_subject_edit").html(lesson_plan_subject_html);
		}
		
		function partialInitRenderTextareaLessonPlanSubject() {
			var v = $("#textarea_lesson_plan_subject").html();
			var w = "";
			if ( ((v == "<br>") || (v == "")) && ((w == "<br>") || (w == "")) ) {
				$("#textarea_lesson_plan_subject").addClass("textarea-lesson-plan-subject-empty");
			}
			else {
				$("#textarea_lesson_plan_subject").removeClass("textarea-lesson-plan-subject-empty");
			}			
		}
		
		function initRenderTextareaLessonPlanSubject() {
			$("#textarea_lesson_plan_subject").html(lesson_plan_subject_html);
			partialInitRenderTextareaLessonPlanSubject();
		}


		function showEditId_103() {
			$("#control_103_show").addClass("hidden");
			$("#control_103_edit").fadeIn(1300).removeClass("hidden");
			$("#textarea_lesson_plan_subject_edit").html(description_html);
			$("#textarea_lesson_plan_subject").focus();								    		
		}
	
		function hideEditId_103() {
			$('#control_103_edit').fadeOut(300, function() {
				$('#control_103_edit').addClass("hidden");
				$('#control_103_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function () {				


			$(document).on('click', '.control-103-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-103-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_103_edit').hasClass('hidden')) {
							$('.control-103-edit-options').removeClass('hidden');
							showEditId_103();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-103-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_103();
							}
						}
					}
				}
			});

			$(document).on('click', '#open_info_lesson_plan_subject', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_12);
				$("#dialog_1001").jqmShow();
			});

			lesson_plan_subject_html = "<%= @publisher_product_subject_subject_text.html_safe %>";
			initRenderTextareaLessonPlanSubject();

			// onblur="onDivBlur();" 
			// onmousedown="return cancelEvent(event);" 
			// onclick="return cancelEvent(event);" 
			// contentEditable="true" 
			// onmouseup="saveSelection();" 
			// onkeyup="saveSelection();" 
			// onfocus="restoreSelection();"

		    $("#textarea_lesson_plan_subject_edit").on ('blur', function (e) {
				onDivBlur_lesson_plan_subject();
		    });
		    $("#textarea_lesson_plan_subject_edit").on ('mousedown', function (e) {
				return cancelEvent_lesson_plan_subject(e);
		    });
		    $("#textarea_lesson_plan_subject_edit").on ('click', function (e) {
				return cancelEvent_lesson_plan_subject(e);
		    });
		    $("#textarea_lesson_plan_subject_edit").on ('mouseup', function (e) {
				saveSelection_lesson_plan_subject();
		    });
		    $("#textarea_lesson_plan_subject_edit").on ('keyup', function (e) {
				saveSelection_lesson_plan_subject();
		    });
		    $("#textarea_lesson_plan_subject_edit").on ('focus', function (e) {
				restoreSelection_lesson_plan_subject();
		    });
		    $("#textarea_lesson_plan_subject_edit").on ('keydown', function (e) {
		    	if( e.keyCode == 9) {
		    		e.preventDefault();
					insertTextAtCursor_lesson_plan_subject("\t");
		    	}
		    });
    		$("#submit_lesson_plan_subject").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_lesson_plan_subject").click();
    		});
    		$("#cancel_lesson_plan_subject").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_lesson_plan_subject").click();
    		});	
			$("#cancel_lesson_plan_subject").on('click', function() {
				// show_control("lesson_plan_subject");
				control_103_cancel_clicked = true;
				hideEditId_103();				
			});
			// $("#open_edit_lesson_plan_subject").click(function(){
	    		// $("#show_lesson_plan_subject, #open_edit_lesson_plan_subject").fadeOut(300, function(){
	    			// $("#show_lesson_plan_subject").addClass("hidden");
	    			// $("#edit_lesson_plan_subject").fadeIn(1300).removeClass("hidden");
	    			// showEditLessonPlanSubject();	    	
	    			// $("#textarea_lesson_plan_subject").focus();								
	    		// });
		  	// });    		
			$("#submit_lesson_plan_subject").on('click', function() {
				var input_publisher_product_subject = $("#textarea_lesson_plan_subject_edit").html().replace(/\t/g, '\\t');
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "subject":"' + input_publisher_product_subject +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_lesson_plan_subject',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							lesson_plan_subject_html = data.subject;
							initRenderTextareaLessonPlanSubject();
							// show_control("lesson_plan_subject");
							// show_control("description");
							hideEditId_103();							
	            		}
	            		else {
	            			// show_control("lesson_plan_subject");
	            			hideEditId_103();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});
			

		});
		
				
	</script>

	<script>

		// image_1
		
		var image_1_id = null;
		
		function closeAddImage1() {
			$("#dvLoading_101_2").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form101_2").trigger('click');
			$("form#new_image_1 input#new_image_1_image").val('');
		};	  

		function closeChangeImage1() {
			$("#dvLoading_101_3").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form101_3").trigger('click');
			$("form#change_image_1 input#change_image_1_image").val('');
		};	  

		function closeDeleteImage1() {			
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form101_4").trigger('click');
		};	  

		function closeCropImage1() {
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-1").removeClass("container-figure-image-border").addClass("container-figure-image-border-edit");
			$("#close_form101_5").trigger('click');
		};	  

		function deleteImage1(image_id) {
			var obj_list = '{  "publisher_product_id":' + publisher_product_id +
						   ',  "id":' + image_id +
						   '}';      
		  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
			// var formData = {id:image_id};
		  	$.ajax({
		    	type: 'POST',
		    	// data : formData,
		    	data : obj,
		    	url: '/publisher_product_manifests/destroy_image_1',			    	
		    	dataType: "script",
		    	contentType: "application/json",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            		if (!data.b_error) {
            		}
            		else {
						alert('An error occured while deleting this image.');	            			
            		}
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
		}

		function cropImage1() {
			var input_image_id = $("#cropbox_image_1").val();
			var input_crop_x = $("#id_crop_x_image_1").val();
			var input_crop_y = $("#id_crop_y_image_1").val();
			var input_crop_w = $("#id_crop_w_image_1").val();
			var input_crop_h = $("#id_crop_h_image_1").val();
			var formData = { image_id: input_image_id,
							 publisher_product_id: publisher_product_id, 
							 crop_x: input_crop_x, 
							 crop_y: input_crop_y,
							 crop_w: input_crop_w, 
							 crop_h: input_crop_h 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/crop_image_1',	
		    	// cache: false,		    	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}

		function renderCropImage1() {
			var input_image_id = $("#cropbox_image_1").val();
			var formData = { image_id: input_image_id,
							 publisher_product_id: publisher_product_id 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/crop_image_1_render',	
		    	// cache: false,		    	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}

		
		$(document).ready(function () {				

			image_1_id = gon.image_1_id;

			$('#render_image_1_crop').html("<%= j render('publisher_product_manifests/image_1_crop') %>");

			$("#dialog_101_1 .close-container").on('click', function() {
				$("#dialog_101_1 .close-container").css({ 'position' : 'absolute' });
			});

			// $(".dialog-101-1-figure").on('click', function(e) {
			$(document).on('click', '.dialog-101-1-figure', function(e) {
				if ( e.target.nodeName == "IMG" ) {
					$("#dialog_overlay").jqmShow();
					$("#overlay_loading").removeClass("display-none");
					var src_img = $(this).data("src-600");
					$('<img src="'+ src_img +'">').load(function(){
						$("#figure_dialog_101_1").append($(this));
						$("#overlay_loading").addClass("display-none");
						$("#dialog_overlay").jqmHide();
						$("#dialog_101_1").jqmShow();
					}).error(function(){
						alert('error loading image');
					});
				}
			});
	
			$('#dialog_101_1').jqm({
				overlay: 84,
				onShow: function(hash) {
					$("#dialog_101_1 .close-container").css({ 'position' : 'fixed' });
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				},
				onHide: function(hash) {
					$("#dialog_101_1 .close-container").css({ 'position' : 'absolute' });
					hash.o.remove();
					hash.w.css('top', '-8000px');
					$("#figure_dialog_101_1 img").remove();
				}
			}); 		
	
			$('#dialog_101_2').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_101_3').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_101_4').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_101_5').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$(document).on("btn_image_1_new_click", function() {				
				$("form#new_image_1 input#new_image_1_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_101_2").jqmShow();
				$("#btn_dlg_101_2_submit").focus();
			});		
			$(document).on("click", "#figcaption_image_1_generic", function() {
				$("form#new_image_1 input#new_image_1_image").val('');
				$("#dialog_101_2").jqmShow();
			});		
			$(document).on("click", "#btn_dlg_101_2_submit", function() {
				$("form#new_image_1 input#new_image_1_image").click();
			});	
			$(document).on("click", "#btn_dlg_101_2_cancel", function() {
				$("#close_form101_2").trigger('click');
			});
			$(document).on("change", "form#new_image_1 input#new_image_1_image", function() {
				$("#dvLoading_101_2").removeClass("dvLoading-display-none");
				$("form#new_image_1 input#btn_submit_image_1_new").click();
			});

			$(document).on("btn_image_1_change_click", function() {				
				$("form#change_image_1 input#change_image_1_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_101_3").jqmShow();
				$("#btn_dlg_101_3_submit").focus();
			});		
			$(document).on("click", "#btn_dlg_101_3_submit", function() {
				$("form#change_image_1 input#change_image_1_image").click();
			});	
			$(document).on("change", "form#change_image_1 input#change_image_1_image", function() {
				$("#dvLoading_101_3").removeClass("dvLoading-display-none");
				$("form#change_image_1 input#btn_submit_image_1_change").click();
			});
			$(document).on("click", "#btn_dlg_101_3_cancel", function() {
				$("#close_form101_3").trigger('click');
			});

			$(document).on("click", "#btn_dlg_101_4_submit", function() {
				deleteImage1(image_1_id);
			});
			$(document).on("click", "#btn_dlg_101_4_cancel", function() {
				$("#close_form101_4").trigger('click');
			});
			$(document).on("btn_image_1_delete_click", function() {
				$("#dialog_101_4").jqmShow();
				$("#btn_dlg_101_4_cancel").focus();
			});			

			$(document).on("btn_image_1_crop_click", function() {
				$("#dialog_101_5").jqmShow();
			});
			$(document).on("click", "#btn_dlg_submit_crop_image_1", function() {
				cropImage1();
			});
			$(document).on("click", "#btn_dlg_cancel_crop_image_1", function() {
				$("#close_form101_5").trigger('click');
			});
			

		});
		
	</script>

	<script>

		// image_2
		
		var image_2_id = null;
		
		function closeAddImage2() {
			$("#dvLoading_102_2").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form102_2").trigger('click');
			$("form#new_image_2 input#new_image_2_image").val('');
		};	  

		function closeChangeImage2() {
			$("#dvLoading_102_3").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form102_3").trigger('click');
			$("form#change_image_2 input#change_image_2_image").val('');
		};	  

		function closeDeleteImage2() {			
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form102_4").trigger('click');
		};	  

		function closeCropImage2() {
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-2").removeClass("container-figure-image-border").addClass("container-figure-image-border-edit");
			$("#close_form102_5").trigger('click');
		};	  

		function deleteImage2(image_id) {
			var obj_list = '{  "publisher_product_id":' + publisher_product_id +
						   ',  "id":' + image_id +
						   '}';      
		  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
		  	$.ajax({
		    	type: 'POST',
		    	data : obj,
		    	url: '/publisher_product_manifests/destroy_image_2',			    	
		    	dataType: "script",
		    	contentType: "application/json",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
		}

		function cropImage2() {
			var input_image_id = $("#cropbox_image_2").val();
			var input_crop_x = $("#id_crop_x_image_2").val();
			var input_crop_y = $("#id_crop_y_image_2").val();
			var input_crop_w = $("#id_crop_w_image_2").val();
			var input_crop_h = $("#id_crop_h_image_2").val();
			var formData = { image_id: input_image_id,
							 publisher_product_id: publisher_product_id, 
							 crop_x: input_crop_x, 
							 crop_y: input_crop_y,
							 crop_w: input_crop_w, 
							 crop_h: input_crop_h 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/crop_image_2',	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}

		
		$(document).ready(function () {				

			image_2_id = gon.image_2_id;

			$('#render_image_2_crop').html("<%= j render('publisher_product_manifests/image_2_crop') %>");

			$("#dialog_102_1 .close-container").on('click', function() {
				$("#dialog_102_1 .close-container").css({ 'position' : 'absolute' });
			});

			$(document).on('click', '.dialog-102-1-figure', function(e) {
				if ( e.target.nodeName == "IMG" ) {
					$("#dialog_overlay").jqmShow();
					$("#overlay_loading").removeClass("display-none");
					var src_img = $(this).data("src-600");
					$('<img src="'+ src_img +'">').load(function(){
						$("#figure_dialog_102_1").append($(this));
						$("#overlay_loading").addClass("display-none");
						$("#dialog_overlay").jqmHide();
						$("#dialog_102_1").jqmShow();
					}).error(function(){
						alert('error loading image');
					});
				}
			});
			
			$('#dialog_102_1').jqm({
				overlay: 84,
				onShow: function(hash) {
					$("#dialog_102_1 .close-container").css({ 'position' : 'fixed' });
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				},
				onHide: function(hash) {
					$("#dialog_102_1 .close-container").css({ 'position' : 'absolute' });
					hash.o.remove();
					hash.w.css('top', '-8000px');
					$("#figure_dialog_102_1 img").remove();
				}
			}); 		
			
			$('#dialog_102_2').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_102_3').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_102_4').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_102_5').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$(document).on("btn_image_2_new_click", function() {				
				$("form#new_image_2 input#new_image_2_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_102_2").jqmShow();
				$("#btn_dlg_102_2_submit").focus();
			});		
			$(document).on("click", "#figcaption_image_2_generic", function() {
				$("form#new_image_2 input#new_image_2_image").val('');
				$("#dialog_102_2").jqmShow();
			});		
			$(document).on("click", "#btn_dlg_102_2_submit", function() {
				$("form#new_image_2 input#new_image_2_image").click();
			});	
			$(document).on("click", "#btn_dlg_102_2_cancel", function() {
				$("#close_form102_2").trigger('click');
			});
			$(document).on("change", "form#new_image_2 input#new_image_2_image", function() {
				$("#dvLoading_102_2").removeClass("dvLoading-display-none");
				$("form#new_image_2 input#btn_submit_image_2_new").click();
			});

			$(document).on("btn_image_2_change_click", function() {				
				$("form#change_image_2 input#change_image_2_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_102_3").jqmShow();
				$("#btn_dlg_102_3_submit").focus();
			});		
			$(document).on("click", "#btn_dlg_102_3_submit", function() {
				$("form#change_image_2 input#change_image_2_image").click();
			});	
			$(document).on("change", "form#change_image_2 input#change_image_2_image", function() {
				$("#dvLoading_102_3").removeClass("dvLoading-display-none");
				$("form#change_image_2 input#btn_submit_image_2_change").click();
			});
			$(document).on("click", "#btn_dlg_102_3_cancel", function() {
				$("#close_form102_3").trigger('click');
			});

			$(document).on("click", "#btn_dlg_102_4_submit", function() {
				deleteImage2(image_2_id);
			});
			$(document).on("click", "#btn_dlg_102_4_cancel", function() {
				$("#close_form102_4").trigger('click');
			});
			$(document).on("btn_image_2_delete_click", function() {
				$("#dialog_102_4").jqmShow();
				$("#btn_dlg_102_4_cancel").focus();
			});			

			$(document).on("btn_image_2_crop_click", function() {
				$("#dialog_102_5").jqmShow();
			});
			$(document).on("click", "#btn_dlg_submit_crop_image_2", function() {
				cropImage2();
			});
			$(document).on("click", "#btn_dlg_cancel_crop_image_2", function() {
				$("#close_form102_5").trigger('click');
			});
			

		});
		
	</script>

	<script>

		// image_3
		
		var image_3_id = null;
		
		function closeAddImage3() {
			$("#dvLoading_103_2").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form103_2").trigger('click');
			$("form#new_image_3 input#new_image_3_image").val('');
		};	  

		function closeChangeImage3() {
			$("#dvLoading_103_3").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form103_3").trigger('click');
			$("form#change_image_3 input#change_image_3_image").val('');
		};	  

		function closeDeleteImage3() {			
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form103_4").trigger('click');
		};	  

		function closeCropImage3() {
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-3").removeClass("container-figure-image-border").addClass("container-figure-image-border-edit");
			$("#close_form103_5").trigger('click');
		};	  

		function deleteImage3(image_id) {
			var obj_list = '{  "publisher_product_id":' + publisher_product_id +
						   ',  "id":' + image_id +
						   '}';      
		  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
		  	$.ajax({
		    	type: 'POST',
		    	data : obj,
		    	url: '/publisher_product_manifests/destroy_image_3',			    	
		    	dataType: "script",
		    	contentType: "application/json",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
		}

		function cropImage3() {
			var input_image_id = $("#cropbox_image_3").val();
			var input_crop_x = $("#id_crop_x_image_3").val();
			var input_crop_y = $("#id_crop_y_image_3").val();
			var input_crop_w = $("#id_crop_w_image_3").val();
			var input_crop_h = $("#id_crop_h_image_3").val();
			var formData = { image_id: input_image_id,
							 publisher_product_id: publisher_product_id, 
							 crop_x: input_crop_x, 
							 crop_y: input_crop_y,
							 crop_w: input_crop_w, 
							 crop_h: input_crop_h 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/crop_image_3',	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}

		
		$(document).ready(function () {				

			image_3_id = gon.image_3_id;

			$('#render_image_3_crop').html("<%= j render('publisher_product_manifests/image_3_crop') %>");
			
			$("#dialog_103_1 .close-container").on('click', function() {
				$("#dialog_103_1 .close-container").css({ 'position' : 'absolute' });
			});
			
			$(document).on('click', '.dialog-103-1-figure', function(e) {
				if ( e.target.nodeName == "IMG" ) {
					$("#dialog_overlay").jqmShow();
					$("#overlay_loading").removeClass("display-none");
					var src_img = $(this).data("src-600");
					$('<img src="'+ src_img +'">').load(function(){
						$("#figure_dialog_103_1").append($(this));
						$("#overlay_loading").addClass("display-none");
						$("#dialog_overlay").jqmHide();
						$("#dialog_103_1").jqmShow();
					}).error(function(){
						alert('error loading image');
					});
				}
			});
			
			$('#dialog_103_1').jqm({
				overlay: 84,
				onShow: function(hash) {
					$("#dialog_103_1 .close-container").css({ 'position' : 'fixed' });
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				},
				onHide: function(hash) {
					$("#dialog_103_1 .close-container").css({ 'position' : 'absolute' });
					hash.o.remove();
					hash.w.css('top', '-8000px');
					$("#figure_dialog_103_1 img").remove();
				}
			}); 		
			
			$('#dialog_103_2').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_103_3').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_103_4').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_103_5').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$(document).on("btn_image_3_new_click", function() {				
				$("form#new_image_3 input#new_image_1_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_103_2").jqmShow();
				$("#btn_dlg_103_2_submit").focus();
			});		
			$(document).on("click", "#figcaption_image_3_generic", function() {
				$("form#new_image_3 input#new_image_3_image").val('');
				$("#dialog_103_2").jqmShow();
			});		
			$(document).on("click", "#btn_dlg_103_2_submit", function() {
				$("form#new_image_3 input#new_image_3_image").click();
			});	
			$(document).on("click", "#btn_dlg_103_2_cancel", function() {
				$("#close_form103_2").trigger('click');
			});
			$(document).on("change", "form#new_image_3 input#new_image_3_image", function() {
				$("#dvLoading_103_2").removeClass("dvLoading-display-none");
				$("form#new_image_3 input#btn_submit_image_3_new").click();
			});

			$(document).on("btn_image_3_change_click", function() {				
				$("form#change_image_3 input#change_image_3_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_103_3").jqmShow();
				$("#btn_dlg_103_3_submit").focus();
			});		
			$(document).on("click", "#btn_dlg_103_3_submit", function() {
				$("form#change_image_3 input#change_image_3_image").click();
			});	
			$(document).on("change", "form#change_image_3 input#change_image_3_image", function() {
				$("#dvLoading_103_3").removeClass("dvLoading-display-none");
				$("form#change_image_3 input#btn_submit_image_3_change").click();
			});
			$(document).on("click", "#btn_dlg_103_3_cancel", function() {
				$("#close_form103_3").trigger('click');
			});

			$(document).on("click", "#btn_dlg_103_4_submit", function() {
				deleteImage3(image_3_id);
			});
			$(document).on("click", "#btn_dlg_103_4_cancel", function() {
				$("#close_form103_4").trigger('click');
			});
			$(document).on("btn_image_3_delete_click", function() {
				$("#dialog_103_4").jqmShow();
				$("#btn_dlg_103_4_cancel").focus();
			});			

			$(document).on("btn_image_3_crop_click", function() {
				$("#dialog_103_5").jqmShow();
			});
			$(document).on("click", "#btn_dlg_submit_crop_image_3", function() {
				cropImage3();
			});
			$(document).on("click", "#btn_dlg_cancel_crop_image_3", function() {
				$("#close_form103_5").trigger('click');
			});
			

		});
		
	</script>

	<script>

		// image_4
		
		var image_4_id = null;
		
		function closeAddImage4() {
			$("#dvLoading_104_2").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form104_2").trigger('click');
			$("form#new_image_4 input#new_image_4_image").val('');
		};	  

		function closeChangeImage4() {
			$("#dvLoading_104_3").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form104_3").trigger('click');
			$("form#change_image_4 input#change_image_4_image").val('');
		};	  

		function closeDeleteImage4() {			
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form104_4").trigger('click');
		};	  

		function closeCropImage4() {
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-4").removeClass("container-figure-image-border").addClass("container-figure-image-border-edit");
			$("#close_form104_5").trigger('click');
		};	  

		function deleteImage4(image_id) {
			var obj_list = '{  "publisher_product_id":' + publisher_product_id +
						   ',  "id":' + image_id +
						   '}';      
		  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
		  	$.ajax({
		    	type: 'POST',
		    	data : obj,
		    	url: '/publisher_product_manifests/destroy_image_4',			    	
		    	dataType: "script",
		    	contentType: "application/json",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
		}

		function cropImage4() {
			var input_image_id = $("#cropbox_image_4").val();
			var input_crop_x = $("#id_crop_x_image_4").val();
			var input_crop_y = $("#id_crop_y_image_4").val();
			var input_crop_w = $("#id_crop_w_image_4").val();
			var input_crop_h = $("#id_crop_h_image_4").val();
			var formData = { image_id: input_image_id,
							 publisher_product_id: publisher_product_id, 
							 crop_x: input_crop_x, 
							 crop_y: input_crop_y,
							 crop_w: input_crop_w, 
							 crop_h: input_crop_h 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/crop_image_4',	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}

		
		$(document).ready(function () {				

			image_4_id = gon.image_4_id;

			$('#render_image_4_crop').html("<%= j render('publisher_product_manifests/image_4_crop') %>");
			
			$("#dialog_104_1 .close-container").on('click', function() {
				$("#dialog_104_1 .close-container").css({ 'position' : 'absolute' });
			});
			
			$(document).on('click', '.dialog-104-1-figure', function(e) {
				if ( e.target.nodeName == "IMG" ) {
					$("#dialog_overlay").jqmShow();
					$("#overlay_loading").removeClass("display-none");
					var src_img = $(this).data("src-600");
					$('<img src="'+ src_img +'">').load(function(){
						$("#figure_dialog_104_1").append($(this));
						$("#overlay_loading").addClass("display-none");
						$("#dialog_overlay").jqmHide();
						$("#dialog_104_1").jqmShow();
					}).error(function(){
						alert('error loading image');
					});
				}
			});
			
			$('#dialog_104_1').jqm({
				overlay: 84,
				onShow: function(hash) {
					$("#dialog_104_1 .close-container").css({ 'position' : 'fixed' });
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				},
				onHide: function(hash) {
					$("#dialog_104_1 .close-container").css({ 'position' : 'absolute' });
					hash.o.remove();
					hash.w.css('top', '-8000px');
					$("#figure_dialog_104_1 img").remove();
				}
			}); 		
			
			$('#dialog_104_2').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_104_3').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_104_4').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_104_5').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$(document).on("btn_image_4_new_click", function() {				
				$("form#new_image_4 input#new_image_4_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_104_2").jqmShow();
				$("#btn_dlg_104_2_submit").focus();
			});		
			$(document).on("click", "#figcaption_image_4_generic", function() {
				$("form#new_image_4 input#new_image_4_image").val('');
				$("#dialog_104_2").jqmShow();
			});		
			$(document).on("click", "#btn_dlg_104_2_submit", function() {
				$("form#new_image_4 input#new_image_4_image").click();
			});	
			$(document).on("click", "#btn_dlg_104_2_cancel", function() {
				$("#close_form104_2").trigger('click');
			});
			$(document).on("change", "form#new_image_4 input#new_image_4_image", function() {
				$("#dvLoading_104_2").removeClass("dvLoading-display-none");
				$("form#new_image_4 input#btn_submit_image_4_new").click();
			});

			$(document).on("btn_image_4_change_click", function() {				
				$("form#change_image_4 input#change_image_4_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_104_3").jqmShow();
				$("#btn_dlg_104_3_submit").focus();
			});		
			$(document).on("click", "#btn_dlg_104_3_submit", function() {
				$("form#change_image_4 input#change_image_4_image").click();
			});	
			$(document).on("change", "form#change_image_4 input#change_image_4_image", function() {
				$("#dvLoading_104_3").removeClass("dvLoading-display-none");
				$("form#change_image_4 input#btn_submit_image_4_change").click();
			});
			$(document).on("click", "#btn_dlg_104_3_cancel", function() {
				$("#close_form104_3").trigger('click');
			});

			$(document).on("click", "#btn_dlg_104_4_submit", function() {
				deleteImage4(image_4_id);
			});
			$(document).on("click", "#btn_dlg_104_4_cancel", function() {
				$("#close_form104_4").trigger('click');
			});
			$(document).on("btn_image_4_delete_click", function() {
				$("#dialog_104_4").jqmShow();
				$("#btn_dlg_104_4_cancel").focus();
			});			

			$(document).on("btn_image_4_crop_click", function() {
				$("#dialog_104_5").jqmShow();
			});
			$(document).on("click", "#btn_dlg_submit_crop_image_4", function() {
				cropImage4();
			});
			$(document).on("click", "#btn_dlg_cancel_crop_image_4", function() {
				$("#close_form104_5").trigger('click');
			});
			

		});
		
	</script>

	<script>

		// image_5
		
		var image_5_id = null;
		
		function closeAddImage5() {
			$("#dvLoading_105_2").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form105_2").trigger('click');
			$("form#new_image_5 input#new_image_5_image").val('');
		};	  

		function closeChangeImage5() {
			$("#dvLoading_105_3").addClass("dvLoading-display-none");
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form105_3").trigger('click');
			$("form#change_image_5 input#change_image_5_image").val('');
		};	  

		function closeDeleteImage5() {			
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$("#close_form105_4").trigger('click');
		};	  

		function closeCropImage5() {
			$(".edit-image").fadeIn(200).removeClass("hidden");
			$(".container-figure-image-5").removeClass("container-figure-image-border").addClass("container-figure-image-border-edit");
			$("#close_form105_5").trigger('click');
		};	  

		function deleteImage5(image_id) {
			var obj_list = '{  "publisher_product_id":' + publisher_product_id +
						   ',  "id":' + image_id +
						   '}';      
		  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
		  	$.ajax({
		    	type: 'POST',
		    	data : obj,
		    	url: '/publisher_product_manifests/destroy_image_5',			    	
		    	dataType: "script",
		    	contentType: "application/json",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
		}

		function cropImage5() {
			var input_image_id = $("#cropbox_image_5").val();
			var input_crop_x = $("#id_crop_x_image_5").val();
			var input_crop_y = $("#id_crop_y_image_5").val();
			var input_crop_w = $("#id_crop_w_image_5").val();
			var input_crop_h = $("#id_crop_h_image_5").val();
			var formData = { image_id: input_image_id,
							 publisher_product_id: publisher_product_id, 
							 crop_x: input_crop_x, 
							 crop_y: input_crop_y,
							 crop_w: input_crop_w, 
							 crop_h: input_crop_h 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: '/publisher_product_manifests/crop_image_5',	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
	  		// return false;
		}

		
		$(document).ready(function () {				

			image_5_id = gon.image_5_id;

			// $('#render_image_5_crop').html("<#%= j render('publisher_product_manifests/image_5_crop') %#>");
			// $('#render_image_5').css('background-image', 'url(<#%= j asset_path("avatars/background-1-w1200-h300.jpg") %#>)');
			// $('#render_image_5').css('background-image', 'url(<#%= j asset_path(@image_5.image_url(:image_1200_300)) %#>)');
			// $('#render_image_5').css('background-image', 'url("/assets/avatars/background-1-w1200-h300.jpg")');
			
			$("#dialog_105_1 .close-container").on('click', function() {
				$("#dialog_105_1 .close-container").css({ 'position' : 'absolute' });
			});
			
			$(document).on('click', '.dialog-105-1-figure', function(e) {
				if ( e.target.nodeName == "IMG" ) {
					$("#dialog_overlay").jqmShow();
					$("#overlay_loading").removeClass("display-none");
					var src_img = $(this).data("src-600");
					$('<img src="'+ src_img +'">').load(function(){
						$("#figure_dialog_105_1").append($(this));
						$("#overlay_loading").addClass("display-none");
						$("#dialog_overlay").jqmHide();
						$("#dialog_105_1").jqmShow();
					}).error(function(){
						alert('error loading image');
					});
				}
			});
			
			$('#dialog_105_1').jqm({
				overlay: 84,
				onShow: function(hash) {
					$("#dialog_105_1 .close-container").css({ 'position' : 'fixed' });
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				},
				onHide: function(hash) {
					$("#dialog_105_1 .close-container").css({ 'position' : 'absolute' });
					hash.o.remove();
					hash.w.css('top', '-8000px');
					$("#figure_dialog_105_1 img").remove();
				}
			}); 		
			
			$('#dialog_105_2').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_105_3').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_105_4').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$('#dialog_105_5').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', ($(window).scrollTop() + 10).toString() + 'px');
					hash.w.css('opacity', 1.0).fadeIn(100);
				}
			}); 		

			$(document).on("btn_image_5_new_click", function() {				
				$("form#new_image_5 input#new_image_5_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_105_2").jqmShow();
				$("#btn_dlg_105_2_submit").focus();
			});		
			$(document).on("click", "#figcaption_image_5_generic", function() {
				$("form#new_image_5 input#new_image_5_image").val('');
				$("#dialog_105_2").jqmShow();
			});		
			$(document).on("click", "#btn_dlg_105_2_submit", function() {
				$("form#new_image_5 input#new_image_5_image").click();
			});	
			$(document).on("click", "#btn_dlg_105_2_cancel", function() {
				$("#close_form105_2").trigger('click');
			});
			$(document).on("change", "form#new_image_5 input#new_image_5_image", function() {
				$("#dvLoading_105_2").removeClass("dvLoading-display-none");
				$("form#new_image_5 input#btn_submit_image_5_new").click();
			});

			$(document).on("btn_image_5_change_click", function() {				
				$("form#change_image_5 input#change_image_5_image").val('');
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dialog_105_3").jqmShow();
				$("#btn_dlg_105_3_submit").focus();
			});		
			$(document).on("click", "#btn_dlg_105_3_submit", function() {
				$("form#change_image_5 input#change_image_5_image").click();
			});	
			$(document).on("change", "form#change_image_5 input#change_image_5_image", function() {
				$("#dvLoading_105_3").removeClass("dvLoading-display-none");
				$("form#change_image_5 input#btn_submit_image_5_change").click();
			});
			$(document).on("click", "#btn_dlg_105_3_cancel", function() {
				$("#close_form105_3").trigger('click');
			});

			$(document).on("click", "#btn_dlg_105_4_submit", function() {
				deleteImage5(image_5_id);
			});
			$(document).on("click", "#btn_dlg_105_4_cancel", function() {
				$("#close_form105_4").trigger('click');
			});
			$(document).on("btn_image_5_delete_click", function() {
				$("#dialog_105_4").jqmShow();
				$("#btn_dlg_105_4_cancel").focus();
			});			

			$(document).on("btn_image_5_crop_click", function() {
				$("#dialog_105_5").jqmShow();
			});
			$(document).on("click", "#btn_dlg_submit_crop_image_5", function() {
				cropImage5();
			});
			$(document).on("click", "#btn_dlg_cancel_crop_image_5", function() {
				$("#close_form105_5").trigger('click');
			});
			

		});
		
	</script>
	
	<script>
		
		// product_headline
		
		function showEditId_16() {
			$("#control_16_show").addClass("hidden");
			$("#control_16_edit_1").fadeIn(1300).removeClass("hidden");
			$("#control_16_edit_2").fadeIn(1300).removeClass("hidden");
			// alert(product_headline);
			// set_control_span("product_headline", product_headline, b_product_headline);
			$("#publisher_product_manifest_product_headline").val(product_headline);		
			$("#publisher_product_manifest_product_headline").focus();	
		}
	
		function hideEditId_16() {
			$('#control_16_edit_1, #control_16_edit_2').fadeOut(300, function() {
				$('#control_16_edit_1').addClass("hidden");
				$('#control_16_edit_2').addClass("hidden");
				$('#control_16_show').fadeIn(1300).removeClass("hidden");
			});
		}

		var product_headline = null;
		var b_product_headline = null;
		var b_required_product_headline = null;

		
		$(document).ready(function(){

			product_headline = "<%= @publisher_product_manifest.product_headline %>";
			b_product_headline = <%= @b_product_headline %>;
			b_required_product_headline = <%= @b_required_product_headline %>;
	
			$(document).on('click', '.control-16-edit', function(event) {
				// alert($(".btn-open-edit-mode-container").hasClass("hidden"));
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-16-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_16_edit_1').hasClass('hidden')) {
							$('.control-16-edit-options').removeClass('hidden');
							showEditId_16();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-16-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_16();
							}
						}
					}
				}
			});

	
			$(document).on('click', '#open_info_product_headline', function() {
				$("#dlg_info").html(info_msg_2);
				divHeight_1001 = $("#dialog_1001").height();
				$("#dialog_1001").jqmShow();
			});
	
			// alert('gon.product_headline = ' + gon.product_headline);
			// set_control_span("product_headline", gon.product_headline, gon.b_product_headline);
			// set_control_required("product_headline", gon.b_required_product_headline);
	
			set_control_span("product_headline", product_headline, b_product_headline);
			set_control_required("product_headline", b_required_product_headline);
			// $("#open_edit_product_headline").click(function(){
	    		// $("#show_product_headline, #open_edit_product_headline").fadeOut(300, function(){
	    			// $("#show_product_headline").addClass("hidden");
	    			// $("#open_edit_product_headline").addClass("visibility-hidden");
	    			// $(".edit-product-headline").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });
			$("#submit_product_headline").keypress(function(e){
	  			if(e.keyCode==13)
	  			$("#submit_product_headline").click();
			});		
			$("#cancel_product_headline").keypress(function(e){
	  			if(e.keyCode==13)
	  			$("#cancel_product_headline").click();
			});		
			$("#cancel_product_headline").on('click', function() {
				show_control_class("product_headline", "product-headline");
				// hideEditId_16();
			});
			$("#submit_product_headline").on('click', function() {
				var input_publisher_product_manifest_product_headline = $("#publisher_product_manifest_product_headline").val();
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  		
						   	   ',  "product_headline":"' + input_publisher_product_manifest_product_headline +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
			  	$.ajax({
			    	type: 'POST',
			    	// data : JSON.stringify(obj),
			    	data : obj,
			    	url: '/publisher_product_manifests/update_product_headline',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	                	// 200:function() { alert("200"); }, 202:function() { alert("202"); }
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_control_span("product_headline", data.product_headline, data.b_product_headline);
							show_control_class("product_headline", "product-headline");
							hideEditId_16();
	            		}
	            		else {
							show_control_class("product_headline", "product-headline");
							hideEditId_16();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});
	
	
		});
				
	</script>

	<!-- <script>
		
		// product_headline
		
		$(document).ready(function(){

			$(document).on('click', '#open_info_product_headline', function() {
				$("#dlg_info").html(info_msg_2);
				divHeight_1001 = $("#dialog_1001").height();
				$("#dialog_1001").jqmShow();
			});

			set_control_span("product_headline", gon.product_headline, gon.b_product_headline);
			set_control_required("product_headline", gon.b_required_product_headline);
			$("#open_edit_product_headline").click(function(){
	    		$("#show_product_headline, #open_edit_product_headline").fadeOut(300, function(){
	    			$("#show_product_headline").addClass("hidden");
	    			$("#open_edit_product_headline").addClass("visibility-hidden");
	    			$(".edit-product-headline").fadeIn(1300).removeClass("hidden");
	    		});
		  	});
    		$("#submit_product_headline").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_product_headline").click();
    		});		
    		$("#cancel_product_headline").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_product_headline").click();
    		});		
			$("#cancel_product_headline").on('click', function() {
				show_control_class("product_headline", "product-headline");
			});
			$("#submit_product_headline").on('click', function() {
				var input_publisher_product_manifest_product_headline = $("#publisher_product_manifest_product_headline").val();
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  		
						   	   ',  "product_headline":"' + input_publisher_product_manifest_product_headline +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
			  	$.ajax({
			    	type: 'POST',
			    	// data : JSON.stringify(obj),
			    	data : obj,
			    	url: '/publisher_product_manifests/update_product_headline',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	                	// 200:function() { alert("200"); }, 202:function() { alert("202"); }
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_control_span("product_headline", data.product_headline, data.b_product_headline);
							show_control_class("product_headline", "product-headline");
	            		}
	            		else {
							show_control_class("product_headline", "product-headline");
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});


		});
				
	</script> -->

	<script>
		
		// product_tagline
		
		function showEditId_10() {
			$("#control_10_show").addClass("hidden");
			$("#control_10_edit").fadeIn(1300).removeClass("hidden");
			// alert(product_tagline);
			// set_control_span("product_tagline", product_tagline, b_product_tagline);
			$("#publisher_product_manifest_product_tagline").val(product_tagline);		
			$("#publisher_product_manifest_product_tagline").focus();	
		}
	
		function hideEditId_10() {
			$('#control_10_edit').fadeOut(300, function() {
				$('#control_10_edit').addClass("hidden");
				$('#control_10_show').fadeIn(1300).removeClass("hidden");
			});
		}


		// var product_tagline = gon.product_tagline;
		// var b_product_tagline = gon.b_product_tagline;
		var product_tagline = null;
		var b_product_tagline = null;
		var b_required_product_tagline = null;
		
		$(document).ready(function(){

			product_tagline = "<%= @publisher_product_manifest.product_tagline %>";
			b_product_tagline = <%= @b_product_tagline %>;
			b_required_product_tagline = <%= @b_required_product_tagline %>;

			$(document).on('click', '.control-10-edit', function(event) {
				// alert($(".btn-open-edit-mode-container").hasClass("hidden"));
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-10-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_10_edit').hasClass('hidden')) {
							$('.control-10-edit-options').removeClass('hidden');
							showEditId_10();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-10-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_10();
							}
						}
					}
				}
			});

			$(document).on('click', '#open_info_product_tagline', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_27);
				$("#dialog_1001").jqmShow();
			});

			// set_control_span("product_tagline", gon.product_tagline, gon.b_product_tagline);
			set_control_span("product_tagline", product_tagline, b_product_tagline);
			// set_control_required("product_tagline", gon.b_required_product_tagline);
			set_control_required("product_tagline", b_required_product_tagline);
			// $("#open_edit_product_tagline").click(function(){
	    		// $("#show_product_tagline, #open_edit_product_tagline").fadeOut(300, function(){
	    			// $("#show_product_tagline").addClass("hidden");
	    			// $("#open_edit_product_tagline").addClass("visibility-hidden");
	    			// $("#edit_product_tagline").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });
    		$("#submit_product_tagline").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_product_tagline").click();
    		});		
    		$("#cancel_product_tagline").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_product_tagline").click();
    		});		
			$("#cancel_product_tagline").on('click', function() {
				// show_control("product_tagline");
				hideEditId_10();
			});
			$("#submit_product_tagline").on('click', function() {
				var input_publisher_product_manifest_product_tagline = $("#publisher_product_manifest_product_tagline").val();
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  		
						   	   ',  "product_tagline":"' + input_publisher_product_manifest_product_tagline +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_product_tagline',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_control_span("product_tagline", data.product_tagline, data.b_product_tagline);
							// show_control("product_tagline");
							// $("#cancel_product_tagline").click();
							product_tagline = data.product_tagline;
							hideEditId_10();
	            		}
	            		else {
							// show_control("product_tagline");
							hideEditId_10();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// product_name

		function showEditId_11() {
			$("#control_11_show").addClass("hidden");
			$("#control_11_edit").fadeIn(1300).removeClass("hidden");
			$("#publisher_product_manifest_product_name").val(product_name);		
			$("#publisher_product_manifest_product_name").focus();	
		}
	
		function hideEditId_11() {
			$('#control_11_edit').fadeOut(300, function() {
				$('#control_11_edit').addClass("hidden");
				$('#control_11_show').fadeIn(1300).removeClass("hidden");
			});
		}


		var product_name = null;
		var b_product_name = null;
		var b_required_product_name = null;
		
		$(document).ready(function(){

			product_name = "<%= @publisher_product_manifest.product_name %>";
			b_product_name = <%= @b_product_name %>;
			b_required_product_name = <%= @b_required_product_name %>;

			$(document).on('click', '.control-11-edit', function(event) {
				// alert($(".btn-open-edit-mode-container").hasClass("hidden"));
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-11-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_11_edit').hasClass('hidden')) {
							$('.control-11-edit-options').removeClass('hidden');
							showEditId_11();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-11-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_11();
							}
						}
					}
				}
			});

			$(document).on('click', '#open_info_product_name', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_3);
				$("#dialog_1001").jqmShow();
			});

			set_control_span("product_name", product_name, b_product_name);
			set_control_required("product_name", b_required_product_name);
			$("#open_edit_product_name").click(function(){
	    		$("#show_product_name, #open_edit_product_name").fadeOut(300, function(){
	    			$("#show_product_name").addClass("hidden");
	    			$("#open_edit_product_name").addClass("visibility-hidden");
	    			$("#edit_product_name").fadeIn(1300).removeClass("hidden");
	    		});
		  	});
    		$("#submit_product_name").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_product_name").click();
    		});		
    		$("#cancel_product_name").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_product_name").click();
    		});		
			$("#cancel_product_name").on('click', function() {
				// show_control("product_name");
				hideEditId_11();
			});
			$("#close_info_product_name").click(function(){
		    	$("#form_info_product_name_a").fadeOut(700, function(){ $("#form_info_product_name").slideUp(400) });
		  	});
		  	$("#open_info_product_name").click(function(){
		    	$("#form_info_product_name").slideDown(400, function(){ $("#form_info_product_name_a").fadeIn( 2000 ) });
		  	});	    

			$("#submit_product_name").on('click', function() {
				var input_publisher_product_manifest_product_name = $("#publisher_product_manifest_product_name").val();
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  		
						   	   ',  "product_name":"' + input_publisher_product_manifest_product_name +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_product_name',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_control_span("product_name", data.product_name, data.b_product_name);
							// show_control("product_name");
							// $("#cancel_product_name").click();
							hideEditId_11();
							product_name = data.product_name;
	            		}
	            		else {
							// show_control("product_name");
							hideEditId_11();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// versions
		
		function showEditId_12() {
			$("#control_12_show").addClass("hidden");
			$("#control_12_edit").fadeIn(1300).removeClass("hidden");
			$("#publisher_product_manifest_versions").val(versions);		
			$("#publisher_product_manifest_versions").focus();	
		}
	
		function hideEditId_12() {
			$('#control_12_edit').fadeOut(300, function() {
				$('#control_12_edit').addClass("hidden");
				$('#control_12_show').fadeIn(1300).removeClass("hidden");
			});
		}


		var versions = null;
		var b_versions = null;
		var b_required_versions = null;
		
		$(document).ready(function(){

			versions = "<%= @publisher_product_manifest.versions %>";
			b_versions = <%= @b_versions %>;
			b_required_versions = <%= @b_required_versions %>;

			$(document).on('click', '.control-12-edit', function(event) {
				// alert($(".btn-open-edit-mode-container").hasClass("hidden"));
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-12-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_12_edit').hasClass('hidden')) {
							$('.control-12-edit-options').removeClass('hidden');
							showEditId_12();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-12-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_12();
							}
						}
					}
				}
			});

			$(document).on('click', '#open_info_versions', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_4);
				$("#dialog_1001").jqmShow();
			});

			set_control_span("versions", versions, b_versions);
			set_control_required("versions", b_required_versions);
			$("#open_edit_versions").click(function(){
	    		$("#show_versions, #open_edit_versions").fadeOut(300, function(){
	    			$("#show_versions").addClass("hidden");
	    			$("#open_edit_versions").addClass("visibility-hidden");
	    			$("#edit_versions").fadeIn(1300).removeClass("hidden");
	    		});
		  	});
    		$("#submit_versions").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_versions").click();
    		});		
    		$("#cancel_versions").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_versions").click();
    		});		
			$("#cancel_versions").on('click', function() {
				// show_control("versions");
				hideEditId_12();
			});
			$("#submit_versions").on('click', function() {
				var input_publisher_product_manifest_versions = $("#publisher_product_manifest_versions").val();
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  		
						   	   ',  "versions":"' + input_publisher_product_manifest_versions +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_versions',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_control_span("versions", data.versions, data.b_versions);
							// show_control("versions");
							// $("#cancel_versions").click();
							hideEditId_12();
							versions = data.versions;
	            		}
	            		else {
							// show_control("versions");
							hideEditId_12();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// corporate_logo_url
		
		function showEditId_13() {
			$("#control_13_show").addClass("hidden");
			$("#control_13_edit").fadeIn(1300).removeClass("hidden");
			$("#publisher_product_manifest_corporate_logo_url").val(corporate_logo_url);		
			$("#publisher_product_manifest_corporate_logo_url").focus();	
		}
	
		function hideEditId_13() {
			$('#control_13_edit').fadeOut(300, function() {
				$('#control_13_edit').addClass("hidden");
				$('#control_13_show').fadeIn(1300).removeClass("hidden");
			});
		}


		var corporate_logo_url = null;
		var b_corporate_logo_url = null;
		var b_required_corporate_logo_url = null;
		
		$(document).ready(function(){

			corporate_logo_url = "<%= @publisher_product_manifest.corporate_logo_url %>";
			b_corporate_logo_url = <%= @b_corporate_logo_url %>;
			b_required_corporate_logo_url = <%= @b_required_corporate_logo_url %>;

			$(document).on('click', '.control-13-edit', function(event) {
				// alert($(".btn-open-edit-mode-container").hasClass("hidden"));
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-13-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_13_edit').hasClass('hidden')) {
							$('.control-13-edit-options').removeClass('hidden');
							showEditId_13();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-13-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_13();
							}
						}
					}
				}
			});

			$(document).on('click', '#open_info_corporate_logo_url', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_26);
				$("#dialog_1001").jqmShow();
			});

			set_control_span("corporate_logo_url", corporate_logo_url, b_corporate_logo_url);
			set_control_required("corporate_logo_url", b_required_corporate_logo_url);
			$("#open_edit_corporate_logo_url").click(function(){
	    		$("#show_corporate_logo_url, #open_edit_corporate_logo_url").fadeOut(300, function(){
	    			$("#show_corporate_logo_url").addClass("hidden");
	    			$("#open_edit_corporate_logo_url").addClass("visibility-hidden");
	    			$("#edit_corporate_logo_url").fadeIn(1300).removeClass("hidden");
	    		});
		  	});
    		$("#submit_corporate_logo_url").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_corporate_logo_url").click();
    		});		
    		$("#cancel_corporate_logo_url").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_corporate_logo_url").click();
    		});		
			$("#cancel_corporate_logo_url").on('click', function() {
				// show_control("corporate_logo_url");
				hideEditId_13();
			});
			$("#submit_corporate_logo_url").on('click', function() {
				var input_publisher_product_manifest_corporate_logo_url = $("#publisher_product_manifest_corporate_logo_url").val();
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  		
						   	   ',  "corporate_logo_url":"' + input_publisher_product_manifest_corporate_logo_url +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';       
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_corporate_logo_url',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_control_span("corporate_logo_url", data.corporate_logo_url, data.b_corporate_logo_url);
							// show_control("corporate_logo_url");
							hideEditId_13();
							$("#cancel_corporate_logo_url").click();
	            		}
	            		else {
							// show_control("corporate_logo_url");
							hideEditId_13();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// pricing_model
		
		function set_pricing_model(pricing_model) {
			var e = document.getElementById("publisher_product_pricing_model");
			for(var i = 0; i < pricing_model.length; i++) {
				if( pricing_model[i] ) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			$("#publisher_product_pricing_model").trigger("chosen:updated");
		}
		
		function set_pricing_model_text(pricing_model_text) {
			s = "";
			s_html = "";
			s_html_default = "Pricing Model";
			for(var i = 0; i < pricing_model_text.length; i++) {
				s = pricing_model_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			$("#box_pricing_model").html(s_html);
			if (pricing_model_text.length > 0) {
				$("#box_pricing_model").addClass("box-detail-padding");
			}
			else {
				$("#box_pricing_model").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_14() {
			$("#control_14_show").addClass("hidden");
			$("#control_14_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_pricing_model_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_pricing_model").trigger("chosen:updated");
		}
	
		function hideEditId_14() {
			$('#control_14_edit').fadeOut(300, function() {
				$('#control_14_edit').addClass("hidden");
				$('#control_14_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-14-edit', function(event) {
				// alert($(".btn-open-edit-mode-container").hasClass("hidden"));
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-14-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_14_edit').hasClass('hidden')) {
							$('.control-14-edit-options').removeClass('hidden');
							showEditId_14();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-14-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_14();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_pricing_model', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_18);
				$("#dialog_1001").jqmShow();
			});

			var gon_pricing_model = gon.pricing_model;
			set_pricing_model(gon_pricing_model);
			var gon_pricing_model_text = gon.pricing_model_text;
			set_pricing_model_text(gon_pricing_model_text);
			set_control_required("pricing_model", gon.b_required_pricing_model);			
			// $("#open_edit_pricing_model").click(function(){
		    	// $("#publisher_product_pricing_model_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_pricing_model, #open_edit_pricing_model").fadeOut(300, function(){
	    			// $("#show_pricing_model").addClass("hidden");
	    			// $("#open_edit_pricing_model").addClass("visibility-hidden");
	    			// $("#edit_pricing_model").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_pricing_model").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_pricing_model").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_pricing_model").click();
    		});			
			$("#cancel_pricing_model").on('click', function() {
				// show_control("pricing_model");
				hideEditId_14();
			});
    		$("#cancel_pricing_model").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_pricing_model").click();
    		});		
			$("#close_info_pricing_model").click(function(){
		    	$("#form_info_pricing_model_a").fadeOut(700, function(){ $("#form_info_pricing_model").slideUp(400) });
		  	});
		  	$("#open_info_pricing_model").click(function(){
		    	$("#form_info_pricing_model").slideDown(400, function(){ $("#form_info_pricing_model_a").fadeIn( 2000 ) });
		  	});	
			$("#submit_pricing_model").on('click', function() {
				var input_publisher_product_pricing_model = $("#publisher_product_pricing_model").val();
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "pricing_model":"' + input_publisher_product_pricing_model + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_pricing_model',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_pricing_model(data.g_pricing_model);
							set_pricing_model_text(data.g_pricing_model_text);
							// show_control("pricing_model");
							hideEditId_14();
							set_control_required("pricing_model", data.b_required);
							// renderListingPreview("pricing_model");												
	            		}
	            		else {
							// show_control("pricing_model");
							hideEditId_14();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// price
		
		// function format_to_currency(n, currency) {
		    // return currency + " " + n.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, "$1,");
		// }

		var val_input_price_1_saved = 0;
		var val_input_price_2_saved = 0;
		var val_input_price_3_saved = 0;
		var val_input_price_4_saved = 0;
		var val_input_price_5_saved = 0;
		var val_input_price_6_saved = 0;
		var val_input_price_7_saved = 0;
		var val_input_price_8_saved = 0;
		var val_input_price_9_saved = 0;
		var val_input_price_10_saved = 0;
		
		function set_price(price) {
			val_input_price_1_saved = price[1][1];
			val_input_price_2_saved = price[2][1];
			val_input_price_3_saved = price[3][1];
			val_input_price_4_saved = price[4][1];
			val_input_price_5_saved = price[5][1];
			val_input_price_6_saved = price[6][1];
			val_input_price_7_saved = price[7][1];
			val_input_price_8_saved = price[8][1];
			val_input_price_9_saved = price[9][1];
			val_input_price_10_saved = price[10][1];
			for( var i = 1; i < 11; i++ ) {
				var s_ch = "#ch_price_" + i.toString();
				var s_cb = "#cb_price_" + i.toString();
				var s_input = "#publisher_product_price_price_" + i.toString() + "_dec";
				var s_text = "#price_" + i.toString() + "_dec";
				var s_row = "#row_price_" + i.toString();

				if (price[i][0]) {
					$(s_ch).attr('checked', true);
					$(s_cb).addClass("cb-background");
					$(s_input).removeAttr('disabled');
					$(s_input).val(Number(price[i][1]).toFixed(2));

					$(s_text).html(Number(price[i][1]).toFixed(2));
					$(s_row).removeClass("hidden");					
				}
				else {
					$(s_ch).attr('checked', false);
					$(s_cb).removeClass("cb-background");
					$(s_input).val('');
					$(s_input).attr('disabled', 'disabled');
					$(s_row).addClass("hidden");
				}
			}
			if (price[11][0]) {
				$("#ch_price_11").attr('checked', true);
				$("#cb_price_11").addClass("cb-background");
				$("#row_price_11").removeClass("hidden");
			}
			else {
				$("#ch_price_11").attr('checked', false);
				$("#cb_price_11").removeClass("cb-background");
				$("#row_price_11").addClass("hidden");
			}
		}
		
		function verify_price_numeric() {
			var val_ch_price_1 = $("#ch_price_1").is(':checked');
			var input_publisher_product_price_price_1_dec = $("#publisher_product_price_price_1_dec").val();
			var val_ch_price_2 = $("#ch_price_2").is(':checked');
			var input_publisher_product_price_price_2_dec = $("#publisher_product_price_price_2_dec").val();
			var val_ch_price_3 = $("#ch_price_3").is(':checked');
			var input_publisher_product_price_price_3_dec = $("#publisher_product_price_price_3_dec").val();
			var val_ch_price_4 = $("#ch_price_4").is(':checked');
			var input_publisher_product_price_price_4_dec = $("#publisher_product_price_price_4_dec").val();
			var val_ch_price_5 = $("#ch_price_5").is(':checked');
			var input_publisher_product_price_price_5_dec = $("#publisher_product_price_price_5_dec").val();
			var val_ch_price_6 = $("#ch_price_6").is(':checked');
			var input_publisher_product_price_price_6_dec = $("#publisher_product_price_price_6_dec").val();
			var val_ch_price_7 = $("#ch_price_7").is(':checked');
			var input_publisher_product_price_price_7_dec = $("#publisher_product_price_price_7_dec").val();
			var val_ch_price_8 = $("#ch_price_8").is(':checked');
			var input_publisher_product_price_price_8_dec = $("#publisher_product_price_price_8_dec").val();
			var val_ch_price_9 = $("#ch_price_9").is(':checked');
			var input_publisher_product_price_price_9_dec = $("#publisher_product_price_price_9_dec").val();
			var val_ch_price_10 = $("#ch_price_10").is(':checked');
			var input_publisher_product_price_price_10_dec = $("#publisher_product_price_price_10_dec").val();

			var b_verify_price_1_dec = false;
			if (val_ch_price_1) {
				if ($.isNumeric( input_publisher_product_price_price_1_dec )) {
					if ( input_publisher_product_price_price_1_dec > 0.009 ) {
						b_verify_price_1_dec = true;
						$("#render_price_1").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_1").removeClass("check-required");
				b_verify_price_1_dec = true;
			}
			var b_verify_price_2_dec = false;
			if (val_ch_price_2) {
				if ($.isNumeric( input_publisher_product_price_price_2_dec )) {
					if ( input_publisher_product_price_price_2_dec > 0.009 ) {
						b_verify_price_2_dec = true;
						$("#render_price_2").removeClass("check-required");						
					}
				} 
			}
			else {
				$("#render_price_2").removeClass("check-required");
				b_verify_price_2_dec = true;
			}
			var b_verify_price_3_dec = false;
			if (val_ch_price_3) {
				if ($.isNumeric( input_publisher_product_price_price_3_dec )) {
					if ( input_publisher_product_price_price_3_dec > 0.009 ) {
						b_verify_price_3_dec = true;
						$("#render_price_3").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_3").removeClass("check-required");
				b_verify_price_3_dec = true;
			}
			var b_verify_price_4_dec = false;
			if (val_ch_price_4) {
				if ($.isNumeric( input_publisher_product_price_price_4_dec )) {
					if ( input_publisher_product_price_price_4_dec > 0.009 ) {
						b_verify_price_4_dec = true;
						$("#render_price_4").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_4").removeClass("check-required");
				b_verify_price_4_dec = true;
			}
			var b_verify_price_5_dec = false;
			if (val_ch_price_5) {
				if ($.isNumeric( input_publisher_product_price_price_5_dec )) {
					if ( input_publisher_product_price_price_5_dec > 0.009 ) {
						b_verify_price_5_dec = true;
						$("#render_price_5").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_5").removeClass("check-required");
				b_verify_price_5_dec = true;
			}
			var b_verify_price_6_dec = false;
			if (val_ch_price_6) {
				if ($.isNumeric( input_publisher_product_price_price_6_dec )) {
					if ( input_publisher_product_price_price_6_dec > 0.009 ) {
						b_verify_price_6_dec = true;
						$("#render_price_6").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_6").removeClass("check-required");
				b_verify_price_6_dec = true;
			}
			var b_verify_price_7_dec = false;
			if (val_ch_price_7) {
				if ($.isNumeric( input_publisher_product_price_price_7_dec )) {
					if ( input_publisher_product_price_price_7_dec > 0.009 ) {
						b_verify_price_7_dec = true;
						$("#render_price_7").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_7").removeClass("check-required");
				b_verify_price_7_dec = true;
			}
			var b_verify_price_8_dec = false;
			if (val_ch_price_8) {
				if ($.isNumeric( input_publisher_product_price_price_8_dec )) {
					if ( input_publisher_product_price_price_8_dec > 0.009 ) {
						b_verify_price_8_dec = true;
						$("#render_price_8").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_8").removeClass("check-required");
				b_verify_price_8_dec = true;
			}
			var b_verify_price_9_dec = false;
			if (val_ch_price_9) {
				if ($.isNumeric( input_publisher_product_price_price_9_dec )) {
					if ( input_publisher_product_price_price_9_dec > 0.009 ) {
						b_verify_price_9_dec = true;
						$("#render_price_9").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_9").removeClass("check-required");
				b_verify_price_9_dec = true;
			}
			var b_verify_price_10_dec = false;
			if (val_ch_price_10) {
				if ($.isNumeric( input_publisher_product_price_price_10_dec )) {
					if ( input_publisher_product_price_price_10_dec > 0.009 ) {
						b_verify_price_10_dec = true;
						$("#render_price_10").removeClass("check-required");
					}
				} 
			}
			else {
				$("#render_price_10").removeClass("check-required");
				b_verify_price_10_dec = true;
			}

			if (b_verify_price_1_dec &&
				b_verify_price_2_dec &&
				b_verify_price_3_dec &&
				b_verify_price_4_dec &&
				b_verify_price_5_dec &&
				b_verify_price_6_dec &&
				b_verify_price_7_dec &&
				b_verify_price_8_dec &&
				b_verify_price_9_dec &&
				b_verify_price_10_dec) {
				$("#price_error_msg").addClass("display-hidden");
			}
		}
		
		
		function showEditId_15() {
			$("#control_15_show").addClass("hidden");
			$("#control_15_edit").fadeIn(1300).removeClass("hidden");
	    	$("#span_price_1").focus();	
    		// $("#show_price_model, #open_edit_price").fadeOut(300, function(){
    			// $("#show_price").addClass("hidden");
    			// $("#open_edit_price").addClass("visibility-hidden");
    			$("#edit_price").fadeIn(1300).removeClass("hidden");
    		// });
		}
	
		function hideEditId_15() {
			$('#control_15_edit').fadeOut(300, function() {
				$('#control_15_edit').addClass("hidden");
				$('#control_15_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-15-edit', function(event) {
				// alert($(".btn-open-edit-mode-container").hasClass("hidden"));
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-15-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_15_edit').hasClass('hidden')) {
							$('.control-15-edit-options').removeClass('hidden');
							showEditId_15();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-15-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_15();
							}
						}
					}
				}
			});


			var gon_price = gon.price;
			set_price(gon_price);

			$(document).on('click', '#open_info_price', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_19);
				$("#dialog_1001").jqmShow();
			});

    		$("#span_price_1").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_1").click();
    		});			
			$("#span_price_1").on('click', function() {
				$("#cb_price_1").click();
			});
			$("#cb_price_1").on('click', function() {
				set_cb("ch_price_1", "cb_price_1");
				if ( ($("#ch_price_1").is(':checked')) ) {
					$("#publisher_product_price_price_1_dec").removeAttr('disabled');
					$("#publisher_product_price_price_1_dec").focus();
				}
				else {
					$("#publisher_product_price_price_1_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});
			
    		$("#span_price_2").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_2").click();
    		});			
			$("#span_price_2").on('click', function() {
				$("#cb_price_2").click();
			});
			$("#cb_price_2").on('click', function() {
				set_cb("ch_price_2", "cb_price_2");
				if ( ($("#ch_price_2").is(':checked')) ) {
					$("#publisher_product_price_price_2_dec").removeAttr('disabled');
					$("#publisher_product_price_price_2_dec").focus();
				}
				else {
					$("#publisher_product_price_price_2_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_3").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_3").click();
    		});			
			$("#span_price_3").on('click', function() {
				$("#cb_price_3").click();
			});
			$("#cb_price_3").on('click', function() {
				set_cb("ch_price_3", "cb_price_3");
				if ( ($("#ch_price_3").is(':checked')) ) {
					$("#publisher_product_price_price_3_dec").removeAttr('disabled');
					$("#publisher_product_price_price_3_dec").focus();
				}
				else {
					$("#publisher_product_price_price_3_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_4").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_4").click();
    		});			
			$("#span_price_4").on('click', function() {
				$("#cb_price_4").click();
			});
			$("#cb_price_4").on('click', function() {
				set_cb("ch_price_4", "cb_price_4");
				if ( ($("#ch_price_4").is(':checked')) ) {
					$("#publisher_product_price_price_4_dec").removeAttr('disabled');
					$("#publisher_product_price_price_4_dec").focus();
				}
				else {
					$("#publisher_product_price_price_4_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_5").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_5").click();
    		});			
			$("#span_price_5").on('click', function() {
				$("#cb_price_5").click();
			});
			$("#cb_price_5").on('click', function() {
				set_cb("ch_price_5", "cb_price_5");
				if ( ($("#ch_price_5").is(':checked')) ) {
					$("#publisher_product_price_price_5_dec").removeAttr('disabled');
					$("#publisher_product_price_price_5_dec").focus();
				}
				else {
					$("#publisher_product_price_price_5_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_6").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_6").click();
    		});			
			$("#span_price_6").on('click', function() {
				$("#cb_price_6").click();
			});
			$("#cb_price_6").on('click', function() {
				set_cb("ch_price_6", "cb_price_6");
				if ( ($("#ch_price_6").is(':checked')) ) {
					$("#publisher_product_price_price_6_dec").removeAttr('disabled');
					$("#publisher_product_price_price_6_dec").focus();
				}
				else {
					$("#publisher_product_price_price_6_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_7").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_7").click();
    		});			
			$("#span_price_7").on('click', function() {
				$("#cb_price_7").click();
			});
			$("#cb_price_7").on('click', function() {
				set_cb("ch_price_7", "cb_price_7");
				if ( ($("#ch_price_7").is(':checked')) ) {
					$("#publisher_product_price_price_7_dec").removeAttr('disabled');
					$("#publisher_product_price_price_7_dec").focus();
				}
				else {
					$("#publisher_product_price_price_7_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_8").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_8").click();
    		});			
			$("#span_price_8").on('click', function() {
				$("#cb_price_8").click();
			});
			$("#cb_price_8").on('click', function() {
				set_cb("ch_price_8", "cb_price_8");
				if ( ($("#ch_price_8").is(':checked')) ) {
					$("#publisher_product_price_price_8_dec").removeAttr('disabled');
					$("#publisher_product_price_price_8_dec").focus();
				}
				else {
					$("#publisher_product_price_price_8_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_9").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_9").click();
    		});			
			$("#span_price_9").on('click', function() {
				$("#cb_price_9").click();
			});
			$("#cb_price_9").on('click', function() {
				set_cb("ch_price_9", "cb_price_9");
				if ( ($("#ch_price_9").is(':checked')) ) {
					$("#publisher_product_price_price_9_dec").removeAttr('disabled');
					$("#publisher_product_price_price_9_dec").focus();
				}
				else {
					$("#publisher_product_price_price_9_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_10").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_10").click();
    		});			
			$("#span_price_10").on('click', function() {
				$("#cb_price_10").click();
			});
			$("#cb_price_10").on('click', function() {
				set_cb("ch_price_10", "cb_price_10");
				if ( ($("#ch_price_10").is(':checked')) ) {
					$("#publisher_product_price_price_10_dec").removeAttr('disabled');
					$("#publisher_product_price_price_10_dec").focus();
				}
				else {
					$("#publisher_product_price_price_10_dec").attr('disabled', 'disabled');
				}
				verify_price_numeric();
			});

    		$("#span_price_11").keypress(function(e){
      			if(e.keyCode==13)
      			$("#span_price_11").click();
    		});			
			$("#span_price_11").on('click', function() {
				$("#cb_price_11").click();
			});
			$("#cb_price_11").on('click', function() {
				set_cb("ch_price_11", "cb_price_11");
			});

			set_control_required("price", gon.b_required_price);			
			$("#open_edit_price").click(function(){
		    	$("#span_price_1").focus();	
	    		$("#show_price_model, #open_edit_price").fadeOut(300, function(){
	    			$("#show_price").addClass("hidden");
	    			$("#open_edit_price").addClass("visibility-hidden");
	    			$("#edit_price").fadeIn(1300).removeClass("hidden");
	    		});
		  	});
    		$("#submit_price").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_price").click();
    		});			
			$("#cancel_price").on('click', function() {
				// show_control("price");
				hideEditId_15();
			});
    		$("#cancel_price").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_price").click();
    		});		
			$("#close_info_price").click(function(){
		    	$("#form_info_price_a").fadeOut(700, function(){ $("#form_info_price").slideUp(400) });
		  	});
		  	$("#open_info_price").click(function(){
		    	$("#form_info_price").slideDown(400, function(){ $("#form_info_price_a").fadeIn( 2000 ) });
		  	});	

			$("#submit_price").on('click', function() {
				$("#render_price_1").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_2").removeClass("check-required").removeClass("check-affirm");				
				$("#render_price_3").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_4").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_5").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_6").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_7").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_8").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_9").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_10").removeClass("check-required").removeClass("check-affirm");
				$("#render_price_11").removeClass("check-required").removeClass("check-affirm");

				$("#price_error_msg").addClass("display-hidden");

				var val_ch_price_1 = $("#ch_price_1").is(':checked');
				var input_publisher_product_price_price_1_dec = $("#publisher_product_price_price_1_dec").val();
				var val_ch_price_2 = $("#ch_price_2").is(':checked');
				var input_publisher_product_price_price_2_dec = $("#publisher_product_price_price_2_dec").val();
				var val_ch_price_3 = $("#ch_price_3").is(':checked');
				var input_publisher_product_price_price_3_dec = $("#publisher_product_price_price_3_dec").val();
				var val_ch_price_4 = $("#ch_price_4").is(':checked');
				var input_publisher_product_price_price_4_dec = $("#publisher_product_price_price_4_dec").val();
				var val_ch_price_5 = $("#ch_price_5").is(':checked');
				var input_publisher_product_price_price_5_dec = $("#publisher_product_price_price_5_dec").val();
				var val_ch_price_6 = $("#ch_price_6").is(':checked');
				var input_publisher_product_price_price_6_dec = $("#publisher_product_price_price_6_dec").val();
				var val_ch_price_7 = $("#ch_price_7").is(':checked');
				var input_publisher_product_price_price_7_dec = $("#publisher_product_price_price_7_dec").val();
				var val_ch_price_8 = $("#ch_price_8").is(':checked');
				var input_publisher_product_price_price_8_dec = $("#publisher_product_price_price_8_dec").val();
				var val_ch_price_9 = $("#ch_price_9").is(':checked');
				var input_publisher_product_price_price_9_dec = $("#publisher_product_price_price_9_dec").val();
				var val_ch_price_10 = $("#ch_price_10").is(':checked');
				var input_publisher_product_price_price_10_dec = $("#publisher_product_price_price_10_dec").val();
				var val_ch_price_11 = $("#ch_price_11").is(':checked');

				var val_ch_price_1_saved = gon.price[1][0];
				var val_input_price_1_saved_fixed = Number(val_input_price_1_saved).toFixed(2);
				var val_ch_price_2_saved = gon.price[2][0];
				var val_input_price_2_saved_fixed = Number(val_input_price_2_saved).toFixed(2);
				var val_ch_price_3_saved = gon.price[3][0];
				var val_input_price_3_saved_fixed = Number(val_input_price_3_saved).toFixed(2);
				var val_ch_price_4_saved = gon.price[4][0];
				var val_input_price_4_saved_fixed = Number(val_input_price_4_saved).toFixed(2);
				var val_ch_price_5_saved = gon.price[5][0];
				var val_input_price_5_saved_fixed = Number(val_input_price_5_saved).toFixed(2);
				var val_ch_price_6_saved = gon.price[6][0];
				var val_input_price_6_saved_fixed = Number(val_input_price_6_saved).toFixed(2);
				var val_ch_price_7_saved = gon.price[7][0];
				var val_input_price_7_saved_fixed = Number(val_input_price_7_saved).toFixed(2);
				var val_ch_price_8_saved = gon.price[8][0];
				var val_input_price_8_saved_fixed = Number(val_input_price_8_saved).toFixed(2);
				var val_ch_price_9_saved = gon.price[9][0];
				var val_input_price_9_saved_fixed = Number(val_input_price_9_saved).toFixed(2);
				var val_ch_price_10_saved = gon.price[10][0];
				var val_input_price_10_saved_fixed = Number(val_input_price_10_saved).toFixed(2);
				var val_ch_price_11_saved = gon.price[11][0];

				// price 1
				var price_1_dec_changed = false;
				if (val_input_price_1_saved_fixed !== input_publisher_product_price_price_1_dec) {
					price_1_dec_changed = true;
				}
				var b_verify_price_1_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_1_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_1_dec = input_publisher_product_price_price_1_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_1_dec > 0.009 ) {
						b_verify_price_1_dec = true;
					}
				} 
				var b_verified_1 = false;
				if (val_ch_price_1 && !b_verify_price_1_dec) {
					b_verified_1 = false;
					$("#render_price_1").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_1 && b_verify_price_1_dec) {
					b_verified_1 = true;
				}
				if (!val_ch_price_1) {
					input_publisher_product_price_price_1_dec = 0;
					b_verified_1 = true;	
				}

				// price 2
				var price_2_dec_changed = false;
				if (val_input_price_2_saved_fixed !== input_publisher_product_price_price_2_dec) {
					price_2_dec_changed = true;
				}
				var b_verify_price_2_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_2_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_2_dec = input_publisher_product_price_price_2_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_2_dec > 0.009 ) {
						b_verify_price_2_dec = true;
					}
				} 
				var b_verified_2 = false;
				if (val_ch_price_2 && !b_verify_price_2_dec) {
					b_verified_2 = false;
					$("#render_price_2").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_2 && b_verify_price_2_dec) {
					b_verified_2 = true;
				}
				if (!val_ch_price_2) {
					input_publisher_product_price_price_2_dec = 0;
					b_verified_2 = true;	
				}

				// price 3
				var price_3_dec_changed = false;
				if (val_input_price_3_saved_fixed !== input_publisher_product_price_price_3_dec) {
					price_3_dec_changed = true;
				}
				var b_verify_price_3_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_3_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_3_dec = input_publisher_product_price_price_3_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_3_dec > 0.009 ) {
						b_verify_price_3_dec = true;
					}
				} 
				var b_verified_3 = false;
				if (val_ch_price_3 && !b_verify_price_3_dec) {
					b_verified_3 = false;
					$("#render_price_3").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_3 && b_verify_price_3_dec) {
					b_verified_3 = true;
				}
				if (!val_ch_price_3) {
					input_publisher_product_price_price_3_dec = 0;
					b_verified_3 = true;	
				}

				// price 4
				var price_4_dec_changed = false;
				if (val_input_price_4_saved_fixed !== input_publisher_product_price_price_4_dec) {
					price_4_dec_changed = true;
				}
				var b_verify_price_4_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_4_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_4_dec = input_publisher_product_price_price_4_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_4_dec > 0.009 ) {
						b_verify_price_4_dec = true;
					}
				} 
				var b_verified_4 = false;
				if (val_ch_price_4 && !b_verify_price_4_dec) {
					b_verified_4 = false;
					$("#render_price_4").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_4 && b_verify_price_4_dec) {
					b_verified_4 = true;
				}
				if (!val_ch_price_4) {
					input_publisher_product_price_price_4_dec = 0;
					b_verified_4 = true;	
				}

				// price 5
				var price_5_dec_changed = false;
				if (val_input_price_5_saved_fixed !== input_publisher_product_price_price_5_dec) {
					price_5_dec_changed = true;
				}
				var b_verify_price_5_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_5_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_5_dec = input_publisher_product_price_price_5_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_5_dec > 0.009 ) {
						b_verify_price_5_dec = true;
					}
				} 
				var b_verified_5 = false;
				if (val_ch_price_5 && !b_verify_price_5_dec) {
					b_verified_5 = false;
					$("#render_price_5").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_5 && b_verify_price_5_dec) {
					b_verified_5 = true;
				}
				if (!val_ch_price_5) {
					input_publisher_product_price_price_5_dec = 0;
					b_verified_5 = true;	
				}

				// price 6
				var price_6_dec_changed = false;
				if (val_input_price_6_saved_fixed !== input_publisher_product_price_price_6_dec) {
					price_6_dec_changed = true;
				}
				var b_verify_price_6_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_6_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_6_dec = input_publisher_product_price_price_6_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_6_dec > 0.009 ) {
						b_verify_price_6_dec = true;
					}
				} 
				var b_verified_6 = false;
				if (val_ch_price_6 && !b_verify_price_6_dec) {
					b_verified_6 = false;
					$("#render_price_6").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_6 && b_verify_price_6_dec) {
					b_verified_6 = true;
				}
				if (!val_ch_price_6) {
					input_publisher_product_price_price_6_dec = 0;
					b_verified_6 = true;	
				}

				// price 7
				var price_7_dec_changed = false;
				if (val_input_price_7_saved_fixed !== input_publisher_product_price_price_7_dec) {
					price_7_dec_changed = true;
				}
				var b_verify_price_7_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_7_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_7_dec = input_publisher_product_price_price_7_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_7_dec > 0.009 ) {
						b_verify_price_7_dec = true;
					}
				} 
				var b_verified_7 = false;
				if (val_ch_price_7 && !b_verify_price_7_dec) {
					b_verified_7 = false;
					$("#render_price_7").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_7 && b_verify_price_7_dec) {
					b_verified_7 = true;
				}
				if (!val_ch_price_7) {
					input_publisher_product_price_price_7_dec = 0;
					b_verified_7 = true;	
				}

				// price 8
				var price_8_dec_changed = false;
				if (val_input_price_8_saved_fixed !== input_publisher_product_price_price_8_dec) {
					price_8_dec_changed = true;
				}
				var b_verify_price_8_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_8_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_8_dec = input_publisher_product_price_price_8_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_8_dec > 0.009 ) {
						b_verify_price_8_dec = true;
					}
				} 
				var b_verified_8 = false;
				if (val_ch_price_8 && !b_verify_price_8_dec) {
					b_verified_8 = false;
					$("#render_price_8").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_8 && b_verify_price_8_dec) {
					b_verified_8 = true;
				}
				if (!val_ch_price_8) {
					input_publisher_product_price_price_8_dec = 0;
					b_verified_8 = true;	
				}

				// price 9
				var price_9_dec_changed = false;
				if (val_input_price_9_saved_fixed !== input_publisher_product_price_price_9_dec) {
					price_9_dec_changed = true;
				}
				var b_verify_price_9_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_9_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_9_dec = input_publisher_product_price_price_9_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_9_dec > 0.009 ) {
						b_verify_price_9_dec = true;
					}
				} 
				var b_verified_9 = false;
				if (val_ch_price_9 && !b_verify_price_9_dec) {
					b_verified_9 = false;
					$("#render_price_9").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_9 && b_verify_price_9_dec) {
					b_verified_9 = true;
				}
				if (!val_ch_price_9) {
					input_publisher_product_price_price_9_dec = 0;
					b_verified_9 = true;	
				}

				// price 10
				var price_10_dec_changed = false;
				if (val_input_price_10_saved_fixed !== input_publisher_product_price_price_10_dec) {
					price_10_dec_changed = true;
				}
				var b_verify_price_10_dec = false;
				if ($.isNumeric( input_publisher_product_price_price_10_dec )) {
					var re = new RegExp("[.]$");
					input_publisher_product_price_price_10_dec = input_publisher_product_price_price_10_dec.replace(/[.]$/, ".00");
					if ( input_publisher_product_price_price_10_dec > 0.009 ) {
						b_verify_price_10_dec = true;
					}
				} 
				var b_verified_10 = false;
				if (val_ch_price_10 && !b_verify_price_10_dec) {
					b_verified_10 = false;
					$("#render_price_10").addClass("check-required").removeClass("check-affirm");
				}
				if (val_ch_price_10 && b_verify_price_10_dec) {
					b_verified_10 = true;
				}
				if (!val_ch_price_10) {
					input_publisher_product_price_price_10_dec = 0;
					b_verified_10 = true;	
				}

				var b_verified = false;
				if( b_verified_1 &&
					b_verified_2 &&
					b_verified_3 &&
					b_verified_4 &&
					b_verified_5 &&
					b_verified_6 &&
					b_verified_7 &&
					b_verified_8 &&
					b_verified_9 &&
					b_verified_10 ) {
						
					b_verified = true;
				}
				
				if (b_verified) {

					if (price_1_dec_changed && val_ch_price_1) {					
						$("#render_price_1").removeClass("check-required").addClass("check-affirm");
					}
					if (price_2_dec_changed && val_ch_price_2) {					
						$("#render_price_2").removeClass("check-required").addClass("check-affirm");
					}
					if (price_3_dec_changed && val_ch_price_3) {					
						$("#render_price_3").removeClass("check-required").addClass("check-affirm");
					}
					if (price_4_dec_changed && val_ch_price_4) {					
						$("#render_price_4").removeClass("check-required").addClass("check-affirm");
					}
					if (price_5_dec_changed && val_ch_price_5) {					
						$("#render_price_5").removeClass("check-required").addClass("check-affirm");
					}
					if (price_6_dec_changed && val_ch_price_6) {					
						$("#render_price_6").removeClass("check-required").addClass("check-affirm");
					}
					if (price_7_dec_changed && val_ch_price_7) {					
						$("#render_price_7").removeClass("check-required").addClass("check-affirm");
					}
					if (price_8_dec_changed && val_ch_price_8) {					
						$("#render_price_8").removeClass("check-required").addClass("check-affirm");
					}
					if (price_9_dec_changed && val_ch_price_9) {					
						$("#render_price_9").removeClass("check-required").addClass("check-affirm");
					}
					if (price_10_dec_changed && val_ch_price_10) {					
						$("#render_price_10").removeClass("check-required").addClass("check-affirm");
					}
					
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "price_1":' + val_ch_price_1 + 
								   ', "price_1_dec":' + input_publisher_product_price_price_1_dec + 
								   ', "price_2":' + val_ch_price_2 + 
								   ', "price_2_dec":' + input_publisher_product_price_price_2_dec + 
								   ', "price_3":' + val_ch_price_3 + 
								   ', "price_3_dec":' + input_publisher_product_price_price_3_dec + 
								   ', "price_4":' + val_ch_price_4 + 
								   ', "price_4_dec":' + input_publisher_product_price_price_4_dec + 
								   ', "price_5":' + val_ch_price_5 + 
								   ', "price_5_dec":' + input_publisher_product_price_price_5_dec + 
								   ', "price_6":' + val_ch_price_6 + 
								   ', "price_6_dec":' + input_publisher_product_price_price_6_dec + 
								   ', "price_7":' + val_ch_price_7 + 
								   ', "price_7_dec":' + input_publisher_product_price_price_7_dec + 
								   ', "price_8":' + val_ch_price_8 + 
								   ', "price_8_dec":' + input_publisher_product_price_price_8_dec + 
								   ', "price_9":' + val_ch_price_9 + 
								   ', "price_9_dec":' + input_publisher_product_price_price_9_dec + 
								   ', "price_10":' + val_ch_price_10 + 
								   ', "price_10_dec":' + input_publisher_product_price_price_10_dec + 
								   ', "price_11":' + val_ch_price_11 + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';              
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_price',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
		            		if (!data.b_error) {
								set_price(data.g_price);
								// show_control("price");
								hideEditId_15();
								set_control_required("price", data.b_required);				
		            		}
		            		else {
								// show_control("price");
								hideEditId_15();
								alert('An error occured while updating this field.');
							}	            			
	            		},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
			  }
			  else {
			  	$("#price_error_msg").removeClass("display-hidden");
			  }
			});

		});
				
	</script>

	<script>
		
	 	// content_type

		function other_selected_content_type(sel, des) {
			if (sel == 12) {
				$("#other_content_type").fadeIn(2000).removeClass("hidden");				
			}
			if (des == 12) {
				$("#publisher_product_content_type_other").val("");			
				$("#other_content_type").fadeOut(2000, function() {
					$(this).addClass("hidden");
				});	
			}
		}

		function set_content_type(content_type, has_content_type_other) {
			var e = document.getElementById("publisher_product_content_type");			
			for(var i = 0; i < content_type.length; i++) {
				if (content_type[i]) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			if (has_content_type_other) {
				e.options[11].setAttribute('selected','selected');
			}
			else {
				e.options[11].selected = false;
				$("#other_content_type").addClass("hidden");
			}
			$("#publisher_product_content_type").trigger("chosen:updated");
		}

		function set_content_type_text(content_type_text, has_content_type_other, content_type_other) {
			var s = "";
			var s_html = "";
			for(var i = 0; i < content_type_text.length; i++) {
				s = content_type_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			if (has_content_type_other) {
				s_html += '<span class="box-other">' + content_type_other.replace(/ /g, "&nbsp;") + '</span> ';
				$("#other_content_type").removeClass("hidden");
			}
			$("#box_content_type").html(s_html);
			if (s_html.length > 0) {					
				$("#box_content_type").addClass("box-detail-padding");
			}
			else {
				$("#box_content_type").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_104() {
			$("#control_104_show").addClass("hidden");
			$("#control_104_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_content_type_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_content_type").trigger("chosen:updated");
			
		}
	
		function hideEditId_104() {
			$('#control_104_edit').fadeOut(300, function() {
				$('#control_104_edit').addClass("hidden");
				$('#control_104_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-104-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-104-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_104_edit').hasClass('hidden')) {
							$('.control-104-edit-options').removeClass('hidden');
							showEditId_104();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-104-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_104();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_content_type', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_6);
				$("#dialog_1001").jqmShow();
			});

  			$("#publisher_product_content_type").on('change', function(evt, params) {
  				other_selected_content_type(params.selected, params.deselected);
  			});
  			
			var gon_content_type = gon.content_type;
			set_content_type(gon.content_type, gon.has_content_type_other);
			var gon_content_type_text = gon.content_type_text;
			set_content_type_text(gon_content_type_text, gon.has_content_type_other, gon.content_type_other);
			set_control_required("content_type", gon.b_required_content_type);			
			// $("#open_edit_content_type").click(function(){
		    	// $("#publisher_product_content_type_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_content_type, #open_edit_content_type").fadeOut(300, function(){
	    			// $("#show_content_type").addClass("hidden");
	    			// $("#open_edit_content_type").addClass("visibility-hidden");
	    			// $("#edit_content_type").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_content_type").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_content_type").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_content_type").click();
    		});		
    		$("#cancel_content_type").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_content_type").click();
    		});		
			$("#cancel_content_type").on('click', function() {
				// show_control("content_type");
				hideEditId_104();
			});
			$("#submit_content_type").on('click', function() {
				var input_publisher_product_content_type = $("#publisher_product_content_type").val();
				var input_publisher_product_content_type_other = $("#publisher_product_content_type_other").val();
				var content_type_other_b = false;
				if (input_publisher_product_content_type_other.length > 0) {
					content_type_other_b = true;
				}
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  
							   ',  "content_type":"' + input_publisher_product_content_type + 
							   '", "content_type_other_b":' + content_type_other_b + 
							   ',  "content_type_other":"' + input_publisher_product_content_type_other +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_content_type',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_content_type(data.content_type, data.has_content_type_other);
							set_content_type_text(data.content_type_text, data.has_content_type_other, data.content_type_other);
							// show_control("content_type");
							// showEditId_104();
							hideEditId_104();
							set_control_required("content_type", data.b_required);						
	            		}
	            		else {
							// show_control("content_type");
							hideEditId_104();
							alert('An error occured while updating this field.');
						}	            			
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// category_subject
		
		function other_selected_category_subject(sel, des) {
			if (sel == 40) {
				$("#other_category_subject").fadeIn(2000).removeClass("hidden");				
			}
			if (des == 40) {
				$("#publisher_product_category_subject_other").val("");			
				$("#other_category_subject").fadeOut(2000, function() {
					$(this).addClass("hidden");
				});	
			}
		}

		function set_category_subject(category_subject, has_category_subject_other) {
			var e = document.getElementById("publisher_product_category_subject");			
			for(var i = 0; i < category_subject.length; i++) {
				if (category_subject[i]) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			if (has_category_subject_other) {
				e.options[39].setAttribute('selected','selected');
			}
			else {
				e.options[39].selected = false;
				$("#other_category_subject").addClass("hidden");
			}
			$("#publisher_product_category_subject").trigger("chosen:updated");
		}

		function set_category_subject_text(category_subject_text, has_category_subject_other, category_subject_other) {
			var s = "";
			var s_html = "";
			var s_html_default = "Subject";
			for(var i = 0; i < category_subject_text.length; i++) {
				s = category_subject_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			if (has_category_subject_other) {
				s_html += '<span class="box-other">' + category_subject_other.replace(/ /g, "&nbsp;") + '</span> ';
				$("#other_category_subject").removeClass("hidden");
			}
			$("#box_category_subject").html(s_html);
			if (s_html.length > 0) {					
				$("#box_category_subject").addClass("box-detail-padding");
			}
			else {
				$("#box_category_subject").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_105() {
			$("#control_105_show").addClass("hidden");
			$("#control_105_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_category_subject_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_category_subject").trigger("chosen:updated");
		}
	
		function hideEditId_105() {
			$('#control_105_edit').fadeOut(300, function() {
				$('#control_105_edit').addClass("hidden");
				$('#control_105_show').fadeIn(1300).removeClass("hidden");
			});
		}
		
		
		$(document).ready(function(){


			$(document).on('click', '.control-105-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-105-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_105_edit').hasClass('hidden')) {
							$('.control-105-edit-options').removeClass('hidden');
							showEditId_105();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-105-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_105();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_category_subject', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_7);
				$("#dialog_1001").jqmShow();
			});

  			$("#publisher_product_category_subject").on('change', function(evt, params) {
  				other_selected_category_subject(params.selected, params.deselected);
  			});
			var gon_category_subject = gon.category_subject;
			set_category_subject(gon.category_subject, gon.has_category_subject_other);
			var gon_category_subject_text = gon.category_subject_text;
			set_category_subject_text(gon_category_subject_text, gon.has_category_subject_other, gon.category_subject_other);
			set_control_required("category_subject", gon.b_required_category_subject);			
			// $("#open_edit_category_subject").click(function(){
		    	// $("#publisher_product_category_subject_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_category_subject, #open_edit_category_subject").fadeOut(300, function(){
	    			// $("#show_category_subject").addClass("hidden");
	    			// $("#open_edit_category_subject").addClass("visibility-hidden");
	    			// $("#edit_category_subject").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_category_subject").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_category_subject").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_category_subject").click();
    		});		
    		$("#cancel_category_subject").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_category_subject").click();
    		});	
			$("#cancel_category_subject").on('click', function() {
				// show_control("category_subject");
				hideEditId_105();
			});    			
			$("#close_info_category_subject").click(function(){
		    	$("#form_info_category_subject_a").fadeOut(700, function(){ $("#form_info_category_subject").slideUp(400) });
		  	});
		  	$("#open_info_category_subject").click(function(){
		    	$("#form_info_category_subject").slideDown(400, function(){ $("#form_info_category_subject_a").fadeIn( 2000 ) });
		  	});	    		
			$("#submit_category_subject").on('click', function() {
				var input_publisher_product_category_subject = $("#publisher_product_category_subject").val();
				var input_publisher_product_category_subject_other = $("#publisher_product_category_subject_other").val();
				var category_subject_other_b = false;
				if (input_publisher_product_category_subject_other.length > 0) {
					category_subject_other_b = true;
				}				
				var obj_list = '{  "publisher_product_id":' + publisher_product_id +  
							   ',  "category_subject":"' + input_publisher_product_category_subject +
							   '", "category_subject_other_b":' + category_subject_other_b + 
							   ',  "category_subject_other":"' + input_publisher_product_category_subject_other +
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_category_subject',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_category_subject(data.category_subject, data.has_category_subject_other);
							set_category_subject_text(data.category_subject_text, data.has_category_subject_other, data.category_subject_other);
							// show_control("category_subject");
							set_control_required("category_subject", data.b_required);		
							// renderListingPreview("category_subject");
							hideEditId_105();
	            		}
	            		else {
							// show_control("category_subject");
							hideEditId_105();
							alert('An error occured while updating this field.');
						}	            			
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// from_age to_age
		
		function set_from_age(from_age) {
			var elmnt = document.getElementById("publisher_product_from_age");
			for(var i = 0; i < from_age.length; i++) {
				if( from_age[i] ) {
					k = i + 1;
					for(var j = 0; j < elmnt.options.length; j++) {
				      if(elmnt.options[j].value == k)
				        elmnt.selectedIndex = j;
				    }			
				}
			}
			$("#publisher_product_from_age").trigger("chosen:updated");
		}
		
		function set_from_age_text(from_age_text) {
			s = "";
			s_html = "";
			s_html_default = "Age Range";
			for(var i = 0; i < from_age_text.length; i++) {
				s = from_age_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">Ages: ' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			$("#box_from_age").html(s_html);
			if (from_age_text.length > 0) {
				$("#box_from_age").addClass("box-detail-padding");
			}
			else {
				$("#box_from_age").removeClass("box-detail-padding");
			}
		}

		function set_age_range_text(from_age_text, to_age_text) {
			var s = "";
			var s_html = "";
			s_html_default = "";
			var s_from_age = "";
			var s_to_age = "";
			for(var i = 0; i < from_age_text.length; i++) {
				s = from_age_text[i];
				if (s != "") {
					s_from_age = s;
				}
			}
			for(var i = 0; i < to_age_text.length; i++) {
				s = to_age_text[i];
				if (s != "") {
					s_to_age = s;
				}
			}

			if ((s_from_age.length > 0) && (s_to_age.length > 0)) {
				s_html = '<span class="box-odd">Ages: ' + s_from_age + ' to ' + s_to_age + '</span> ';
				$("#box_age_range").addClass("box-detail-padding");
				$("#box_age_range").html(s_html);
			}
			else if ((s_from_age.length > 0) && !(s_to_age.length > 0)) {
				s_html = '<span class="box-odd">Ages: ' + s_from_age + '</span> ';
				$("#box_age_range").html(s_html);
				$("#box_age_range").addClass("box-detail-padding");
			}
			else {
				$("#box_age_range").html(s_html_default);
				$("#box_age_range").removeClass("box-detail-padding");
			}	
		}
		
		function set_to_age(to_age) {
			var b_zero = true;			
			var elmnt = document.getElementById("publisher_product_to_age");
			for(var i = 0; i < to_age.length; i++) {
				if( to_age[i] ) {
					k = i + 1;
					for(var j = 0; j < elmnt.options.length; j++) {
				      if(elmnt.options[j].value == k)
				        elmnt.selectedIndex = j;
				    }		
				    b_zero = false;	
				}
			}
			if (b_zero) {
				elmnt.selectedIndex = 0;
			}
			$("#publisher_product_to_age").trigger("chosen:updated");
		}
		
		function set_to_age_text(to_age_text) {
			s = "";
			s_html = "";
			s_html_default = "Age Range";
			for(var i = 0; i < to_age_text.length; i++) {
				s = to_age_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd"> to ' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			$("#box_to_age").html(s_html);
			if (to_age_text.length > 0) {
				$("#box_to_age").addClass("box-detail-padding");
			}
			else {
				$("#box_to_age").removeClass("box-detail-padding");
			}
		}
		
		
		$("#open_edit_age_range").click(function(){
	    	$("#publisher_product_from_age_chosen").css({
	    		'width':'314px'
	    	});				
	    	$("#publisher_product_to_age_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#show_age_range, #open_edit_age_range").fadeOut(300, function(){
    			$("#show_from_age").addClass("hidden");
    			$("#show_to_age").addClass("hidden");
    			$("#open_edit_age_range").addClass("visibility-hidden");
    			$("#edit_age_range").fadeIn(1300).removeClass("hidden");
    			$("#publisher_product_from_age").trigger("chosen:updated");
    			$("#publisher_product_to_age").trigger("chosen:updated");	    			
    		});
	  	});
		
		function showEditId_106() {
			$("#control_106_show").addClass("hidden");
			$("#control_106_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_from_age_chosen").css({
	    		'width':'314px'
	    	});				
	    	$("#publisher_product_to_age_chosen").css({
	    		'width':'314px'
	    	});				
    		// $("#show_age_range, #open_edit_age_range").fadeOut(300, function(){
    			// $("#show_from_age").addClass("hidden");
    			// $("#show_to_age").addClass("hidden");
    			// $("#open_edit_age_range").addClass("visibility-hidden");
    			// $("#edit_age_range").fadeIn(1300).removeClass("hidden");
    			$("#publisher_product_from_age").trigger("chosen:updated");
    			$("#publisher_product_to_age").trigger("chosen:updated");	    			
    		// });
		}
	
		function hideEditId_106() {
			$('#control_106_edit').fadeOut(300, function() {
				$('#control_106_edit').addClass("hidden");
				$('#control_106_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-106-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-106-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_106_edit').hasClass('hidden')) {
							$('.control-106-edit-options').removeClass('hidden');
							showEditId_106();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-106-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_106();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_age_range', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_9);
				$("#dialog_1001").jqmShow();
			});

			var gon_from_age = gon.from_age;
			set_from_age(gon_from_age);
			var gon_from_age_text = gon.from_age_text;
			var gon_to_age = gon.to_age;
			set_to_age(gon_to_age);
			var gon_to_age_text = gon.to_age_text;
			set_age_range_text(gon_from_age_text, gon_to_age_text);
			set_control_required("age_range", (gon.b_required_from_age || gon.b_required_to_age));
			// $("#open_edit_age_range").click(function(){
		    	// $("#publisher_product_from_age_chosen").css({
		    		// 'width':'314px'
		    	// });				
		    	// $("#publisher_product_to_age_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_age_range, #open_edit_age_range").fadeOut(300, function(){
	    			// $("#show_from_age").addClass("hidden");
	    			// $("#show_to_age").addClass("hidden");
	    			// $("#open_edit_age_range").addClass("visibility-hidden");
	    			// $("#edit_age_range").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_from_age").trigger("chosen:updated");
	    			// $("#publisher_product_to_age").trigger("chosen:updated");	    			
	    		// });
		  	// });
    		$("#submit_from_age").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_from_age").click();
    		});			
			$("#cancel_age_range").on('click', function() {
				// show_control("age_range");
				hideEditId_106();
			});
    		$("#cancel_age_range").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_age_range").click();
    		});		
			$("#submit_age_range").on('click', function() {
				var input_publisher_product_from_age = $("#publisher_product_from_age").val();
				var input_publisher_product_to_age = $("#publisher_product_to_age").val();
				var obj_list = '{ "from_age":"' + input_publisher_product_from_age +
							   '", "to_age":"' + input_publisher_product_to_age + 
							   '", "publisher_product_id":' + publisher_product_id + 							   
							   '}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_age_range',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_from_age(data.g_from_age);
							set_to_age(data.g_to_age);
							// show_control("age_range");
							hideEditId_106();
							set_age_range_text(data.g_from_age_text, data.g_to_age_text);
							set_control_required("age_range", (data.b_required_from_age || data.b_required_to_age));
							// renderListingPreview("age_range");
	            		}
	            		else {
							// show_control("age_range");
							hideEditId_106();
							alert('An error occured while updating this field.');
						}	            			
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// from_grade to_grade
		
		function set_from_grade(from_grade) {
			var elmnt = document.getElementById("publisher_product_from_grade");
			for(var i = 0; i < from_grade.length; i++) {
				if( from_grade[i] ) {
					k = i + 1;
					for(var j = 0; j < elmnt.options.length; j++) {
				      if(elmnt.options[j].value == k)
				        elmnt.selectedIndex = j;
				    }			
				}
			}
			$("#publisher_product_from_grade").trigger("chosen:updated");
		}
		
		function set_from_grade_text(from_grade_text) {
			s = "";
			s_html = "";
			s_html_default = "Grade Range";
			for(var i = 0; i < from_grade_text.length; i++) {
				s = from_grade_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			$("#box_from_grade").html(s_html);
			if (from_grade_text.length > 0) {
				$("#box_from_grade").addClass("box-detail-padding");
			}
			else {
				$("#box_from_grade").removeClass("box-detail-padding");
			}
		}

		function set_grade_range_text(from_grade_text, to_grade_text) {
			var s = "";
			var s_html = "";
			var s_html_default = "";
			var s_from_grade = "";
			var s_to_grade = "";
			for(var i = 0; i < from_grade_text.length; i++) {
				s = from_grade_text[i];
				if (s != "") {
					s_from_grade = s;
				}
			}
			for(var i = 0; i < to_grade_text.length; i++) {
				s = to_grade_text[i];
				if (s != "") {
					s_to_grade = s;
				}
			}

			if ((s_from_grade.length > 0) && (s_to_grade.length > 0)) {
				s_html = '<span class="box-odd">Grades: ' + s_from_grade + ' to ' + s_to_grade + '</span> ';
				$("#box_grade_range").addClass("box-detail-padding");
				$("#box_grade_range").html(s_html);
			}
			else if ((s_from_grade.length > 0) && !(s_to_grade.length > 0)) {
				s_html = '<span class="box-odd">Grades: ' + s_from_grade + '</span> ';
				$("#box_grade_range").html(s_html);
				$("#box_grade_range").addClass("box-detail-padding");
			}
			else {
				$("#box_grade_range").html(s_html_default);
				$("#box_grade_range").removeClass("box-detail-padding");
			}	
		}
		
		function set_to_grade(to_grade) {
			var b_zero = true;
			var elmnt = document.getElementById("publisher_product_to_grade");
			for(var i = 0; i < to_grade.length; i++) {
				if( to_grade[i] ) {
					k = i + 1;
					for(var j = 0; j < elmnt.options.length; j++) {
				      if(elmnt.options[j].value == k)
				        elmnt.selectedIndex = j;
				    }			
				    b_zero = false;					    
				}
			}
			if (b_zero) {
				elmnt.selectedIndex = 0;
			}			
			$("#publisher_product_to_grade").trigger("chosen:updated");
		}
		
		function set_to_grade_text(to_grade_text) {
			s = "";
			s_html = "";
			s_html_default = "Grade Range";
			for(var i = 0; i < to_grade_text.length; i++) {
				s = to_grade_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			$("#box_to_grade").html(s_html);
			if (to_grade_text.length > 0) {
				$("#box_to_grade").addClass("box-detail-padding");
			}
			else {
				$("#box_to_grade").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_107() {
			$("#control_107_show").addClass("hidden");
			$("#control_107_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_from_grade_chosen").css({
	    		'width':'314px'
	    	});				
	    	$("#publisher_product_to_grade_chosen").css({
	    		'width':'314px'
	    	});				
    		// $("#show_grade_range, #open_edit_grade_range").fadeOut(300, function(){
    			// $("#show_from_grade").addClass("hidden");
    			// $("#show_to_grade").addClass("hidden");
    			// $("#open_edit_grade_range").addClass("visibility-hidden");
    			// $("#edit_grade_range").fadeIn(1300).removeClass("hidden");
    			$("#publisher_product_from_grade").trigger("chosen:updated");
    			$("#publisher_product_to_grade").trigger("chosen:updated");	    			
    		// });
		}
	
		function hideEditId_107() {
			$('#control_107_edit').fadeOut(300, function() {
				$('#control_107_edit').addClass("hidden");
				$('#control_107_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-107-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-107-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_107_edit').hasClass('hidden')) {
							$('.control-107-edit-options').removeClass('hidden');
							showEditId_107();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-107-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_107();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_grade_range', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_10);
				$("#dialog_1001").jqmShow();
			});

			var gon_from_grade = gon.from_grade;
			set_from_grade(gon_from_grade);
			var gon_from_grade_text = gon.from_grade_text;
			var gon_to_grade = gon.to_grade;
			set_to_grade(gon_to_grade);
			var gon_to_grade_text = gon.to_grade_text;
			set_grade_range_text(gon_from_grade_text, gon_to_grade_text);
			set_control_required("grade_range", (gon.b_required_from_grade || gon.b_required_to_grade));
			
			// $("#open_edit_grade_range").click(function(){
		    	// $("#publisher_product_from_grade_chosen").css({
		    		// 'width':'314px'
		    	// });				
		    	// $("#publisher_product_to_grade_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_grade_range, #open_edit_grade_range").fadeOut(300, function(){
	    			// $("#show_from_grade").addClass("hidden");
	    			// $("#show_to_grade").addClass("hidden");
	    			// $("#open_edit_grade_range").addClass("visibility-hidden");
	    			// $("#edit_grade_range").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_from_grade").trigger("chosen:updated");
	    			// $("#publisher_product_to_grade").trigger("chosen:updated");	    			
	    		// });
		  	// });
    		$("#submit_from_grade").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_from_grade").click();
    		});			
			$("#cancel_grade_range").on('click', function() {
				// show_control("grade_range");
				hideEditId_107();
			});
    		$("#cancel_grade_range").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_grade_range").click();
    		});		
			$("#submit_grade_range").on('click', function() {
				var input_publisher_product_from_grade = $("#publisher_product_from_grade").val();
				var input_publisher_product_to_grade = $("#publisher_product_to_grade").val();
				var obj_list = '{ "from_grade":"' + input_publisher_product_from_grade + 
							   '", "to_grade":"' + input_publisher_product_to_grade + 				
							   '", "publisher_product_id":' + publisher_product_id + 							   							   
							   '}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_grade_range',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_from_grade(data.g_from_grade);
							set_to_grade(data.g_to_grade);
							// show_control("grade_range");
							hideEditId_107();
							set_grade_range_text(data.g_from_grade_text, data.g_to_grade_text);
							set_control_required("grade_range", (data.b_required_from_grade || data.b_required_to_grade));
							// renderListingPreview("grade_range");
	            		}
	            		else {
							// show_control("grade_range");
							hideEditId_107();
							alert('An error occured while updating this field.');
						}	            			
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		function set_market_target(market_target) {
			var e = document.getElementById("publisher_product_market_target");
			for(var i = 0; i < market_target.length; i++) {
				if( market_target[i] ) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			$("#publisher_product_market_target").trigger("chosen:updated");
		}
		
		function set_market_target_text(market_target_text) {
			s = "";
			s_html = "";
			s_html_default = "Market";
			for(var i = 0; i < market_target_text.length; i++) {
				s = market_target_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			$("#box_market_target").html(s_html);
			if (market_target_text.length > 0) {
				$("#box_market_target").addClass("box-detail-padding");
			}
			else {
				$("#box_market_target").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_108() {
			$("#control_108_show").addClass("hidden");
			$("#control_108_edit").fadeIn(1300).removeClass("hidden");

			// $("#open_edit_market_target").click(function(){
		    	$("#publisher_product_market_target_chosen").css({
		    		'width':'314px'
		    	});				
	    		// $("#show_market_target, #open_edit_market_target").fadeOut(300, function(){
	    			// $("#show_market_target").addClass("hidden");
	    			// $("#open_edit_market_target").addClass("visibility-hidden");
	    			// $("#edit_market_target").fadeIn(1300).removeClass("hidden");
	    			$("#publisher_product_market_target").trigger("chosen:updated");
	    		// });
		  	// });
		}
	
		function hideEditId_108() {
			$('#control_108_edit').fadeOut(300, function() {
				$('#control_108_edit').addClass("hidden");
				$('#control_108_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-108-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-108-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_108_edit').hasClass('hidden')) {
							$('.control-108-edit-options').removeClass('hidden');
							showEditId_108();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-108-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_108();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_market_target', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_11);
				$("#dialog_1001").jqmShow();
			});

			var gon_market_target = gon.market_target;
			set_market_target(gon_market_target);
			var gon_market_target_text = gon.market_target_text;
			set_market_target_text(gon_market_target_text);
			set_control_required("market_target", gon.b_required_market_target);			
			// $("#open_edit_market_target").click(function(){
		    	// $("#publisher_product_market_target_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_market_target, #open_edit_market_target").fadeOut(300, function(){
	    			// $("#show_market_target").addClass("hidden");
	    			// $("#open_edit_market_target").addClass("visibility-hidden");
	    			// $("#edit_market_target").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_market_target").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_market_target").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_market_target").click();
    		});			
			$("#cancel_market_target").on('click', function() {
				// show_control("market_target");
				hideEditId_108();
			});
    		$("#cancel_market_target").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_market_target").click();
    		});		
			$("#close_info_market_target").click(function(){
		    	$("#form_info_market_target_a").fadeOut(700, function(){ $("#form_info_market_target").slideUp(400) });
		  	});
		  	$("#open_info_market_target").click(function(){
		    	$("#form_info_market_target").slideDown(400, function(){ $("#form_info_market_target_a").fadeIn(2000) });
		  	});	
			$("#submit_market_target").on('click', function() {
				var input_publisher_product_market_target = $("#publisher_product_market_target").val();
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "market_target":"' + input_publisher_product_market_target + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_market_target',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_market_target(data.g_market_target);
							set_market_target_text(data.g_market_target_text);
							// show_control("market_target");
							hideEditId_108();
							set_control_required("market_target", data.b_required);			
							// renderListingPreview("market_target");									
	            		}
	            		else {
							// show_control("market_target");
							hideEditId_108();
							alert('An error occured while updating this field.');
						}	            			
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// lesson_time course_time
		
		function set_lesson_time(time_per_lesson, lesson_time_hours, lesson_time_minutes) {
			var s_hours = "";
			var s_minutes = "";
			var s_html =  "";
			if( time_per_lesson ) {
				$("#number_lesson_time_hours").val(lesson_time_hours);
				$("#number_lesson_time_minutes").val(lesson_time_minutes);
				var s_hours = lesson_time_hours.toString();
				var s_minutes = lesson_time_minutes.toString();
				var s_html =  '<div style="height: 4px;"></div>' +
							  '<div class="box-lesson-time">' +
								'<div class="box-lesson-time-1"><span>Lesson Time</span></div>' +
								'<div class="box-lesson-time-2"><span>Hours:</span></div>' +
								'<div class="box-lesson-time-3"><span>' + s_hours + '</span></div>' +
								'<div class="box-lesson-time-4"><span>Minutes:</span></div>' +
								'<div class="box-lesson-time-5"><span>' + s_minutes + '</span></div>' +
							  '</div>';
			}
			$("#box_lesson_time").html(s_html);
		}
		
		function set_course_time(time_per_course, course_time_months, course_time_days) {
			var s_months = "";
			var s_days = "";
			var s_html =  "";
			if( time_per_course ) {
				$("#number_course_time_months").val(course_time_months);
				$("#number_course_time_days").val(course_time_days);
				var s_months = course_time_months.toString();
				var s_days = course_time_days.toString();
				var s_html =  '<div style="height: 4px;"></div>' +
							  '<div class="box-course-time">' +
								'<div class="box-course-time-1"><span>Course Time</span></div>' +
								'<div class="box-course-time-2"><span>Months:</span></div>' +
								'<div class="box-course-time-3"><span>' + s_months + '</span></div>' +
								'<div class="box-course-time-4"><span>Days:</span></div>' +
								'<div class="box-course-time-5"><span>' + s_days + '</span></div>' +
							  '</div>';
			}
			$("#box_course_time").html(s_html);
		}
		
		
		function showEditId_109() {
			$("#control_109_show").addClass("hidden");
			$("#control_109_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_market_target_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_market_target").trigger("chosen:updated");
		}
	
		function hideEditId_109() {
			$('#control_109_edit').fadeOut(300, function() {
				$('#control_109_edit').addClass("hidden");
				$('#control_109_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-109-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-109-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_109_edit').hasClass('hidden')) {
							$('.control-109-edit-options').removeClass('hidden');
							showEditId_109();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-109-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_109();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_lesson_time', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_13);
				$("#dialog_1001").jqmShow();
			});

			$("#cancel_lesson_time").on('click', function() {
				// show_control("lesson_time");
				hideEditId_109();
			});
			// $("#open_edit_lesson_time").click(function(){
	    		// $("#show_lesson_time, #open_edit_lesson_time").fadeOut(300, function(){
	    			// $("#show_lesson_time").addClass("hidden");
	    			// $("#open_edit_lesson_time").addClass("visibility-hidden");
	    			// $("#edit_lesson_time").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });    		
			$("#close_info_lesson_time").click(function(){
		    	$("#form_info_lesson_time_a").fadeOut(700, function(){ $("#form_info_lesson_time").slideUp(400) });
		  	});
		  	$("#open_info_lesson_time").click(function(){
		    	$("#form_info_lesson_time").slideDown(400, function(){ $("#form_info_lesson_time_a").fadeIn( 2000 ) });
		  	});	
			var gon_time_per_lesson = gon.time_per_lesson;
			var gon_lesson_time_hours = gon.lesson_time_hours;
			var gon_lesson_time_minutes = gon.lesson_time_minutes;
			set_lesson_time(gon_time_per_lesson, gon_lesson_time_hours, gon_lesson_time_minutes);
			$("#cb_publisher_product_manifest_time_per_lesson").attr('checked', gon_time_per_lesson);
			set_cb_init("cb_publisher_product_manifest_time_per_lesson", "cb_time_per_lesson");			
			if( !gon_time_per_lesson) {
				$("#label_lesson_time_hours").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");
				$("#label_lesson_time_minutes").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");	
				$("#number_lesson_time_hours").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");
				$("#number_lesson_time_minutes").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");				
				$("#number_lesson_time_hours").attr("disabled", true);
				$("#number_lesson_time_minutes").attr("disabled", true);
				$("#number_lesson_time_hours").val(0);
				$("#number_lesson_time_minutes").val(0);				
			}
			var gon_time_per_course = gon.time_per_course;
			var gon_course_time_months = gon.course_time_months;
			var gon_course_time_days = gon.course_time_days;
			set_course_time(gon_time_per_course, gon_course_time_months, gon_course_time_days);
			$("#cb_publisher_product_manifest_time_per_course").attr('checked', gon_time_per_course);
			set_cb_init("cb_publisher_product_manifest_time_per_course", "cb_time_per_course");			
			if( !gon_time_per_course) {
				$("#label_course_time_months").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");
				$("#label_course_time_days").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");	
				$("#number_course_time_months").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");
				$("#number_course_time_days").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");				
				$("#number_course_time_months").attr("disabled", true);
				$("#number_course_time_days").attr("disabled", true);
				$("#number_course_time_months").val(0);
				$("#number_course_time_days").val(0);				
			}
			$("#cb_container_time_per_lesson").on('click', function() {
				set_cb("cb_publisher_product_manifest_time_per_lesson", "cb_time_per_lesson");
				if( $("#cb_time_per_lesson").hasClass("cb-background") ) {
					$("#label_lesson_time_hours").removeClass("label-lesson-time-disabled").addClass("label-lesson-time-enabled");
					$("#label_lesson_time_minutes").removeClass("label-lesson-time-disabled").addClass("label-lesson-time-enabled");	
					$("#number_lesson_time_hours").removeClass("number-lesson-time-disabled").addClass("number-lesson-time-enabled");
					$("#number_lesson_time_minutes").removeClass("number-lesson-time-disabled").addClass("number-lesson-time-enabled");
					$("#number_lesson_time_hours").attr("disabled", false);
					$("#number_lesson_time_minutes").attr("disabled", false);
				}
				else {
					$("#label_lesson_time_hours").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");
					$("#label_lesson_time_minutes").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");
					$("#number_lesson_time_hours").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");
					$("#number_lesson_time_minutes").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");
					$("#number_lesson_time_hours").attr("disabled", true);
					$("#number_lesson_time_minutes").attr("disabled", true);
					$("#number_lesson_time_hours").val(0);
					$("#number_lesson_time_minutes").val(0);
				}
			});
			$("#cb_container_time_per_course").on('click', function() {
				set_cb("cb_publisher_product_manifest_time_per_course", "cb_time_per_course");
				if( $("#cb_time_per_course").hasClass("cb-background") ) {
					$("#label_course_time_months").removeClass("label-lesson-time-disabled").addClass("label-lesson-time-enabled");
					$("#label_course_time_days").removeClass("label-lesson-time-disabled").addClass("label-lesson-time-enabled");	
					$("#number_course_time_months").removeClass("number-lesson-time-disabled").addClass("number-lesson-time-enabled");
					$("#number_course_time_days").removeClass("number-lesson-time-disabled").addClass("number-lesson-time-enabled");
					$("#number_course_time_months").attr("disabled", false);
					$("#number_course_time_days").attr("disabled", false);
				}
				else {
					$("#label_course_time_months").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");
					$("#label_course_time_days").removeClass("label-lesson-time-enabled").addClass("label-lesson-time-disabled");
					$("#number_course_time_months").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");
					$("#number_course_time_days").removeClass("number-lesson-time-enabled").addClass("number-lesson-time-disabled");
					$("#number_course_time_months").attr("disabled", true);
					$("#number_course_time_days").attr("disabled", true);
					$("#number_course_time_months").val(0);
					$("#number_course_time_days").val(0);
				}
			});
			$("#submit_lesson_time").on('click', function() {
				var b_time_per_lesson = $("#cb_publisher_product_manifest_time_per_lesson").is(':checked');
				var input_lesson_time_hours = 0;
				var input_lesson_time_minutes = 0;
				if( b_time_per_lesson) {
					input_lesson_time_hours = $("#number_lesson_time_hours").val();
					input_lesson_time_minutes = $("#number_lesson_time_minutes").val();					
				}
				var b_time_per_course = $("#cb_publisher_product_manifest_time_per_course").is(':checked');
				var input_course_time_months = 0;
				var input_course_time_days = 0;
				if( b_time_per_course) {
					input_course_time_months = $("#number_course_time_months").val();
					input_course_time_days = $("#number_course_time_days").val();					
				}
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "time_per_lesson":' + b_time_per_lesson +
							   ', "lesson_time_hours":' + input_lesson_time_hours +
							   ', "lesson_time_minutes":' + input_lesson_time_minutes +
							   ', "time_per_course":' + b_time_per_course +
							   ', "course_time_months":' + input_course_time_months +
							   ', "course_time_days":' + input_course_time_days +
							   '}';      								    
				obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_lesson_time',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_lesson_time(data.time_per_lesson, data.lesson_time_hours, data.lesson_time_minutes);
							set_course_time(data.time_per_course, data.course_time_months, data.course_time_days);
							// show_control("lesson_time");
							hideEditId_109();
	            		}
	            		else {
							// show_control("lesson_time");
							hideEditId_109();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// platform
		
		function other_selected_platform(sel, des) {
			if (sel == 14) {
				$("#other_platform").fadeIn(2000).removeClass("hidden");				
			}
			if (des == 14) {
				$("#publisher_product_platform_other").val("");			
				$("#other_platform").fadeOut(2000, function() {
					$(this).addClass("hidden");
				});	
			}
		}

		function set_platform(platform, has_platform_other) {
			var e = document.getElementById("publisher_product_platform");			
			for(var i = 0; i < platform.length; i++) {
				if (platform[i]) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			if (has_platform_other) {
				e.options[13].setAttribute('selected','selected');
			}
			else {
				e.options[13].selected = false;
				$("#other_platform").addClass("hidden");
			}
			$("#publisher_product_platform").trigger("chosen:updated");
		}

		function set_platform_text(platform_text, has_platform_other, platform_other) {
			var s = "";
			var s_html = "";
			var s_html_default = "Platform";
			for(var i = 0; i < platform_text.length; i++) {
				s = platform_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			if (has_platform_other) {
				s_html += '<span class="box-other">' + platform_other.replace(/ /g, "&nbsp;") + '</span> ';
				$("#other_platform").removeClass("hidden");
			}
			$("#box_platform").html(s_html);
			if (s_html.length > 0) {					
				$("#box_platform").addClass("box-detail-padding");
			}
			else {
				$("#box_platform").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_110() {
			$("#control_110_show").addClass("hidden");
			$("#control_110_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_platform_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_platform").trigger("chosen:updated");
		}
	
		function hideEditId_110() {
			$('#control_110_edit').fadeOut(300, function() {
				$('#control_110_edit').addClass("hidden");
				$('#control_110_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-110-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-110-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_110_edit').hasClass('hidden')) {
							$('.control-110-edit-options').removeClass('hidden');
							showEditId_110();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-110-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_110();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_platform', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_14);
				$("#dialog_1001").jqmShow();
			});

  			$("#publisher_product_platform").on('change', function(evt, params) {
  				other_selected_platform(params.selected, params.deselected);
  			});
			var gon_platform = gon.platform;
			set_platform(gon.platform, gon.has_platform_other);
			var gon_platform_text = gon.platform_text;
			set_platform_text(gon_platform_text, gon.has_platform_other, gon.platform_other);
			set_control_required("platform", gon.b_required_platform);			
			// $("#open_edit_platform").click(function(){
		    	// $("#publisher_product_platform_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_platform, #open_edit_platform").fadeOut(300, function(){
	    			// $("#show_platform").addClass("hidden");
	    			// $("#open_edit_platform").addClass("visibility-hidden");
	    			// $("#edit_platform").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_platform").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_platform").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_platform").click();
    		});				
    		$("#cancel_platform").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_platform").click();
    		});		
			$("#cancel_platform").on('click', function() {
				// show_control("platform");
				hideEditId_110();
			});
			$("#close_info_platform").click(function(){
		    	$("#form_info_platform_a").fadeOut(700, function(){ $("#form_info_platform").slideUp(400) });
		  	});
		  	$("#open_info_platform").click(function(){
		    	$("#form_info_platform").slideDown(400, function(){ $("#form_info_platform_a").fadeIn( 2000 ) });
		  	});	
			$("#submit_platform").on('click', function() {
				var input_publisher_product_platform = $("#publisher_product_platform").val();
				var input_publisher_product_platform_other = $("#publisher_product_platform_other").val();
				var platform_other_b = false;
				if (input_publisher_product_platform_other.length > 0) {
					platform_other_b = true;
				}				
				var obj_list = '{  "publisher_product_id":' + publisher_product_id + 
							   ',  "platform":"' + input_publisher_product_platform + 
							   '", "platform_other_b":' + platform_other_b + 
							   ',  "platform_other":"' + input_publisher_product_platform_other + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_platform',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_platform(data.platform, data.has_platform_other);
							set_platform_text(data.platform_text, data.has_platform_other, data.platform_other);
							// show_control("platform");
							hideEditId_110();
							set_control_required("platform", data.b_required);		
							// renderListingPreview("platform");
	            		}
	            		else {
							// show_control("platform");
							hideEditId_110();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// file_type
		
		function other_selected_file_type(sel, des) {
			if (sel == 22) {
				$("#other_file_type").fadeIn(2000).removeClass("hidden");				
			}
			if (des == 22) {
				$("#publisher_product_file_type_other").val("");			
				$("#other_file_type").fadeOut(2000, function() {
					$(this).addClass("hidden");
				});	
			}
		}
		
		function set_file_type(file_type, has_file_type_other) {
			var e = document.getElementById("publisher_product_file_type");			
			for(var i = 0; i < file_type.length; i++) {
				if (file_type[i]) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			if (has_file_type_other) {
				e.options[21].setAttribute('selected','selected');
			}
			else {
				e.options[21].selected = false;
				$("#other_file_type").addClass("hidden");
			}
			$("#publisher_product_file_type").trigger("chosen:updated");
		}

		function set_file_type_text(file_type_text, has_file_type_other, file_type_other) {
			var s = "";
			var s_html = "";
			var s_html_default = "File Type";
			for(var i = 0; i < file_type_text.length; i++) {
				s = file_type_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			if (has_file_type_other) {
				s_html += '<span class="box-other">' + file_type_other.replace(/ /g, "&nbsp;") + '</span> ';
				$("#other_file_type").removeClass("hidden");
			}
			$("#box_file_type").html(s_html);
			if (s_html.length > 0) {					
				$("#box_file_type").addClass("box-detail-padding");
			}
			else {
				$("#box_file_type").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_111() {
			$("#control_111_show").addClass("hidden");
			$("#control_111_edit").fadeIn(1300).removeClass("hidden");
			// $("#open_edit_file_type").click(function(){
		    	$("#publisher_product_file_type_chosen").css({
		    		'width':'314px'
		    	});				
	    		// $("#show_file_type, #open_edit_file_type").fadeOut(300, function(){
	    			// $("#show_file_type").addClass("hidden");
	    			// $("#open_edit_file_type").addClass("visibility-hidden");
	    			// $("#edit_file_type").fadeIn(1300).removeClass("hidden");
	    			$("#publisher_product_file_type").trigger("chosen:updated");
	    		// });
		  	// });
		}
	
		function hideEditId_111() {
			$('#control_111_edit').fadeOut(300, function() {
				$('#control_111_edit').addClass("hidden");
				$('#control_111_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-111-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-111-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_111_edit').hasClass('hidden')) {
							$('.control-111-edit-options').removeClass('hidden');
							showEditId_111();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-111-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_111();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_file_type', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_15);
				$("#dialog_1001").jqmShow();
			});

  			$("#publisher_product_file_type").on('change', function(evt, params) {
  				other_selected_file_type(params.selected, params.deselected);
  			});
			var gon_file_type = gon.file_type;
			set_file_type(gon.file_type, gon.has_file_type_other);
			var gon_file_type_text = gon.file_type_text;
			set_file_type_text(gon_file_type_text, gon.has_file_type_other, gon.file_type_other);
			set_control_required("file_type", gon.b_required_file_type);			
			$("#open_edit_file_type").click(function(){
		    	$("#publisher_product_file_type_chosen").css({
		    		'width':'314px'
		    	});				
	    		$("#show_file_type, #open_edit_file_type").fadeOut(300, function(){
	    			$("#show_file_type").addClass("hidden");
	    			$("#open_edit_file_type").addClass("visibility-hidden");
	    			$("#edit_file_type").fadeIn(1300).removeClass("hidden");
	    			$("#publisher_product_file_type").trigger("chosen:updated");
	    		});
		  	});
    		$("#submit_file_type").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_file_type").click();
    		});				
    		$("#cancel_file_type").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_file_type").click();
    		});		
			$("#cancel_file_type").on('click', function() {
				// show_control("file_type");
				hideEditId_111();
			});
			$("#close_info_file_type").click(function(){
		    	$("#form_info_file_type_a").fadeOut(700, function(){ $("#form_info_file_type").slideUp(400) });
		  	});
		  	$("#open_info_file_type").click(function(){
		    	$("#form_info_file_type").slideDown(400, function(){ $("#form_info_file_type_a").fadeIn( 2000 ) });
		  	});	
			$("#submit_file_type").on('click', function() {
				var input_publisher_product_file_type = $("#publisher_product_file_type").val();
				var input_publisher_product_file_type_other = $("#publisher_product_file_type_other").val();
				var file_type_other_b = false;
				if (input_publisher_product_file_type_other.length > 0) {
					file_type_other_b = true;
				}				
				var obj_list = '{  "publisher_product_id":' + publisher_product_id + 
							   ',  "file_type":"' + input_publisher_product_file_type + 
							   '", "file_type_other_b":' + file_type_other_b + 
							   ',  "file_type_other":"' + input_publisher_product_file_type_other + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_file_type',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_file_type(data.file_type, data.has_file_type_other);
							set_file_type_text(data.file_type_text, data.has_file_type_other, data.file_type_other);
							// show_control("file_type");
							hideEditId_111();
							set_control_required("file_type", data.b_required);	
							// renderListingPreview("file_type");											
	            		}
	            		else {
							// show_control("file_type");
							hideEditId_111();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// enhancement
		
		function other_selected_enhancement(sel, des) {
			if (sel == 13) {
				$("#other_enhancement").fadeIn(2000).removeClass("hidden");				
			}
			if (des == 13) {
				$("#publisher_product_enhancement_other").val("");			
				$("#other_enhancement").fadeOut(2000, function() {
					$(this).addClass("hidden");
				});	
			}
		}
		
		function set_enhancement(enhancement, has_enhancement_other) {
			var e = document.getElementById("publisher_product_enhancement");			
			for(var i = 0; i < enhancement.length; i++) {
				if (enhancement[i]) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			if (has_enhancement_other) {
				e.options[12].setAttribute('selected','selected');
			}
			else {
				e.options[12].selected = false;
				$("#other_enhancement").addClass("hidden");
			}
			$("#publisher_product_enhancement").trigger("chosen:updated");
		}

		function set_enhancement_text(enhancement_text, has_enhancement_other, enhancement_other) {
			var s = "";
			var s_html = "";
			var s_html_default = "Enhancement";
			for(var i = 0; i < enhancement_text.length; i++) {
				s = enhancement_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			if (has_enhancement_other) {
				s_html += '<span class="box-other">' + enhancement_other.replace(/ /g, "&nbsp;") + '</span> ';
				$("#other_enhancement").removeClass("hidden");
			}
			$("#box_enhancement").html(s_html);
			if (s_html.length > 0) {					
				$("#box_enhancement").addClass("box-detail-padding");
			}
			else {
				$("#box_enhancement").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_112() {
			$("#control_112_show").addClass("hidden");
			$("#control_112_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_enhancement_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_enhancement").trigger("chosen:updated");
		}
	
		function hideEditId_112() {
			$('#control_112_edit').fadeOut(300, function() {
				$('#control_112_edit').addClass("hidden");
				$('#control_112_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-112-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-112-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_112_edit').hasClass('hidden')) {
							$('.control-112-edit-options').removeClass('hidden');
							showEditId_112();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-112-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_112();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_enhancement', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_16);
				$("#dialog_1001").jqmShow();
			});

  			$("#publisher_product_enhancement").on('change', function(evt, params) {
  				other_selected_enhancement(params.selected, params.deselected);
  			});
			var gon_enhancement = gon.enhancement;
			set_enhancement(gon.enhancement, gon.has_enhancement_other);
			var gon_enhancement_text = gon.enhancement_text;
			set_enhancement_text(gon_enhancement_text, gon.has_enhancement_other, gon.enhancement_other);
			set_control_required("enhancement", gon.b_required_enhancement);			
			// $("#open_edit_enhancement").click(function(){
		    	// $("#publisher_product_enhancement_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_enhancement, #open_edit_enhancement").fadeOut(300, function(){
	    			// $("#show_enhancement").addClass("hidden");
	    			// $("#open_edit_enhancement").addClass("visibility-hidden");
	    			// $("#edit_enhancement").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_enhancement").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_enhancement").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_enhancement").click();
    		});			
			$("#cancel_enhancement").on('click', function() {
				// show_control("enhancement");
				hideEditId_112();
			});
    		$("#cancel_enhancement").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_enhancement").click();
    		});		
			$("#submit_enhancement").on('click', function() {
				var input_publisher_product_enhancement = $("#publisher_product_enhancement").val();
				var input_publisher_product_enhancement_other = $("#publisher_product_enhancement_other").val();
				var enhancement_other_b = false;
				if (input_publisher_product_enhancement_other.length > 0) {
					enhancement_other_b = true;
				}				
				var obj_list = '{  "publisher_product_id":' + publisher_product_id + 
							   ',  "enhancement":"' + input_publisher_product_enhancement + 
							   '", "enhancement_other_b":' + enhancement_other_b + 
							   ',  "enhancement_other":"' + input_publisher_product_enhancement_other + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_enhancement',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_enhancement(data.enhancement, data.has_enhancement_other);
							set_enhancement_text(data.enhancement_text, data.has_enhancement_other, data.enhancement_other);
							// show_control("enhancement");
							hideEditId_112();
							set_control_required("enhancement", data.b_required);		
							// renderListingPreview("enhancement");										
	            		}
	            		else {
							// show_control("enhancement");
							hideEditId_112();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// by_review
		
		function other_selected_by_review(sel, des) {
			if (sel == 3) {
				$("#other_by_review").fadeIn(2000).removeClass("hidden");				
			}
			if (des == 3) {
				$("#publisher_product_by_review_other").val("");			
				$("#other_by_review").fadeOut(2000, function() {
					$(this).addClass("hidden");
				});	
			}
		}
		
		function set_by_review(by_review, has_by_review_other) {
			var e = document.getElementById("publisher_product_by_review");			
			for(var i = 0; i < by_review.length; i++) {
				if (by_review[i]) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			if (has_by_review_other) {
				e.options[2].setAttribute('selected','selected');
			}
			else {
				e.options[2].selected = false;
				$("#other_by_review").addClass("hidden");
			}
			$("#publisher_product_by_review").trigger("chosen:updated");
		}

		function set_by_review_text(by_review_text, has_by_review_other, by_review_other) {
			var s = "";
			var s_html = "";
			for(var i = 0; i < by_review_text.length; i++) {
				s = by_review_text[i];
				s = s.replace(/ /g, "&nbsp;");
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span> ';
	 			}
			}
			if (has_by_review_other) {
				s_html += '<span class="box-other">' + by_review_other.replace(/ /g, "&nbsp;") + '</span> ';
				$("#other_by_review").removeClass("hidden");
			}
			$("#box_by_review").html(s_html);
			if (s_html.length > 0) {					
				$("#box_by_review").addClass("box-detail-padding");
			}
			else {
				$("#box_by_review").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_113() {
			$("#control_113_show").addClass("hidden");
			$("#control_113_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_by_review_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_by_review").trigger("chosen:updated");
		}
	
		function hideEditId_113() {
			$('#control_113_edit').fadeOut(300, function() {
				$('#control_113_edit').addClass("hidden");
				$('#control_113_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-113-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-113-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_113_edit').hasClass('hidden')) {
							$('.control-113-edit-options').removeClass('hidden');
							showEditId_113();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-113-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_113();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_by_review', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_17);
				$("#dialog_1001").jqmShow();
			});

  			$("#publisher_product_by_review").on('change', function(evt, params) {
  				other_selected_by_review(params.selected, params.deselected);
  			});
			var gon_by_review = gon.by_review;
			set_by_review(gon.by_review, gon.has_by_review_other);
			var gon_by_review_text = gon.by_review_text;
			set_by_review_text(gon_by_review_text, gon.has_by_review_other, gon.by_review_other);
			set_control_required("by_review", gon.b_required_by_review);			
			// $("#open_edit_by_review").click(function(){
		    	// $("#publisher_product_by_review_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_by_review, #open_edit_by_review").fadeOut(300, function(){
	    			// $("#show_by_review").addClass("hidden");
	    			// $("#open_edit_by_review").addClass("visibility-hidden");
	    			// $("#edit_by_review").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_by_review").trigger("chosen:updated");
	    		// });
		  	// });
			$("#cancel_by_review").on('click', function() {
				// show_control("by_review");
				hideEditId_113();
			});
    		$("#submit_by_review").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_by_review").click();
    		});		
    		$("#cancel_by_review").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_by_review").click();
    		});		
			$("#close_info_by_review").click(function(){
		    	$("#form_info_by_review_a").fadeOut(700, function(){ $("#form_info_by_review").slideUp(400) });
		  	});
		  	$("#open_info_by_review").click(function(){
		    	$("#form_info_by_review").slideDown(400, function(){ $("#form_info_by_review_a").fadeIn( 2000 ) });
		  	});	    		
			$("#submit_by_review").on('click', function() {
				var input_publisher_product_by_review = $("#publisher_product_by_review").val();
				var input_publisher_product_by_review_other = $("#publisher_product_by_review_other").val();
				var by_review_other_b = false;
				if (input_publisher_product_by_review_other.length > 0) {
					by_review_other_b = true;
				}				
				var obj_list = '{  "publisher_product_id":' + publisher_product_id + 
							   ',  "by_review":"' + input_publisher_product_by_review + 
							   '", "by_review_other_b":' + by_review_other_b + 
							   ',  "by_review_other":"' + input_publisher_product_by_review_other + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_by_review',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							set_by_review(data.by_review, data.has_by_review_other);
							set_by_review_text(data.by_review_text, data.has_by_review_other, data.by_review_other);
							// show_control("by_review");
							hideEditId_113();
							set_control_required("by_review", data.b_required);			
							// renderListingPreview("by_review");			
	            		}
	            		else {
							// show_control("by_review");
							hideEditId_113();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// allow_teacher_rating
		
		function set_allow_teacher_rating(b_allow_teacher_rating) {
			var s_html ="";
			if(b_allow_teacher_rating) {
				s_html = "Yes";
			}
			else {
				s_html = "No";
			}
			$("#box_allow_teacher_rating span").html(s_html);
			if (s_html.length > 0) {
				$("#box_allow_teacher_rating").addClass("box-detail-padding");
			}
			else {
				$("#box_allow_teacher_rating").removeClass("box-detail-padding");
			}
		}
		
		function set_user_rating(user_rating) {
			var ii = 0;
			for(var i = 0; i < user_rating.length; i++) {
				ii = i + 1;
				if( user_rating[i] ) {
					$("#publisher_product_manifest_user_rating option[value='"+ ii.toString() +"']").prop("selected", true);
				}
				else {
					$("#publisher_product_manifest_user_rating option[value='"+ ii.toString() +"']").prop("selected", false);
				}
			}
			$("#publisher_product_manifest_user_rating").trigger("chosen:updated");
		}
		
		
		function showEditId_114() {
			$("#control_114_show").addClass("hidden");
			$("#control_114_edit").fadeIn(1300).removeClass("hidden");
	    	$("#publisher_product_allow_teacher_rating").trigger("chosen:updated");
		}
	
		function hideEditId_114() {
			$('#control_114_edit').fadeOut(300, function() {
				$('#control_114_edit').addClass("hidden");
				$('#control_114_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-114-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-114-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_114_edit').hasClass('hidden')) {
							$('.control-114-edit-options').removeClass('hidden');
							showEditId_114();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-114-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_114();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_allow_teacher_rating', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_22);
				$("#dialog_1001").jqmShow();
			});

			var gon_user_rating = gon.user_rating;
			set_user_rating(gon_user_rating);
			var gon_allow_teacher_rating = gon.allow_teacher_rating;
			set_allow_teacher_rating(gon_allow_teacher_rating);
			$("#cb_publisher_product_manifest_allow_teacher_rating").attr('checked', gon_allow_teacher_rating);
			set_cb_init("cb_publisher_product_manifest_allow_teacher_rating", "cb_allow_teacher_rating");			
			// $("#open_edit_allow_teacher_rating").click(function(){
	    		// $("#show_allow_teacher_rating, #open_edit_allow_teacher_rating").fadeOut(300, function(){
	    			// $("#show_allow_teacher_rating").addClass("hidden");
	    			// $("#open_edit_allow_teacher_rating").addClass("visibility-hidden");
	    			// $("#edit_allow_teacher_rating").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_allow_teacher_rating").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_allow_teacher_rating").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_allow_teacher_rating").click();
    		});		
    		$("#cancel_allow_teacher_rating").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_allow_teacher_rating").click();
    		});		
			$("#cancel_allow_teacher_rating").on('click', function() {
				// show_control("allow_teacher_rating");
				hideEditId_114();
			});
			$("#cb_container_allow_teacher_rating").on('click', function() {
				set_cb("cb_publisher_product_manifest_allow_teacher_rating", "cb_allow_teacher_rating");
			});
			$("#submit_allow_teacher_rating").on('click', function() {
				var b_allow_teacher_rating_changed = false;
				var b_user_rating_changed = false;
				var s_user_rating = "";
				var obj_list = "";
				var obj = "";
				var obj_1 = "";
				var obj_2 = "";
				var cb_publisher_product_manifest_allow_teacher_rating = $("#cb_publisher_product_manifest_allow_teacher_rating").is(':checked');
				var input_publisher_product_manifest_user_rating = $("#publisher_product_manifest_user_rating").val();
				var ar_publisher_product_manifest_user_rating = [];
				for( var i = 1; i < 4; i++ ) {
					if( $.inArray( i.toString(), input_publisher_product_manifest_user_rating) !== -1 ) {
						ar_publisher_product_manifest_user_rating.push(true);
					}
					else {
						ar_publisher_product_manifest_user_rating.push(false);
					}
				}
				if(cb_publisher_product_manifest_allow_teacher_rating !== gon_allow_teacher_rating) {
					b_allow_teacher_rating_changed = true;
				}
		  		else {
		  			$("#render_allow_teacher_rating").removeClass("check-affirm");
		  			$("#render_allow_teacher_rating").removeClass("check-required");
		  		}
				if(arraysAreIdentical(ar_publisher_product_manifest_user_rating, gon_user_rating)) {
		  			$("#render_user_rating").removeClass("check-affirm");
		  			$("#render_user_rating").removeClass("check-required");
				}
		  		else {
					b_user_rating_changed = true;
		  		}
				if(b_allow_teacher_rating_changed || b_user_rating_changed) {
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "allow_teacher_rating":' + cb_publisher_product_manifest_allow_teacher_rating + 
								   ', "user_rating":"' + input_publisher_product_manifest_user_rating + 
								   '"}';      
					obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_allow_teacher_rating',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
		            		if (!data.b_error) {
								if (b_allow_teacher_rating_changed) {
									$("#render_allow_teacher_rating").addClass("check-affirm");
								}
								if (b_user_rating_changed) {
									$("#render_user_rating").addClass("check-affirm");
								}
								gon_allow_teacher_rating = data.allow_teacher_rating;
								set_allow_teacher_rating(gon_allow_teacher_rating);
								// show_control("allow_teacher_rating");			
								hideEditId_114();							
		            		}
		            		else {
								// show_control("allow_teacher_rating");
								hideEditId_114();										
								alert('An error occured while updating this field.');	            			
		            		}
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
				}
			});

		});
				
	</script>

	<script>
		
		// allow_comments
		
		function set_allow_comments(b_allow_comments) {
			var s_html ="";
			if(b_allow_comments) {
				s_html = "Yes";
			}
			else {
				s_html = "No";
			}
			$("#box_allow_comments span").html(s_html);
			if (s_html.length > 0) {
				$("#box_allow_comments").addClass("box-detail-padding");
			}
			else {
				$("#box_allow_comments").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_115() {
			$("#control_115_show").addClass("hidden");
			$("#control_115_edit").fadeIn(1300).removeClass("hidden");
			$("#edit_allow_comments").fadeIn(1300).removeClass("hidden");
		}
	
		function hideEditId_115() {
			$('#control_115_edit').fadeOut(300, function() {
				$('#control_115_edit').addClass("hidden");
				$('#control_115_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-115-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-115-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_115_edit').hasClass('hidden')) {
							$('.control-115-edit-options').removeClass('hidden');
							showEditId_115();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-115-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_115();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_allow_comments', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_23);
				$("#dialog_1001").jqmShow();
			});

			var gon_allow_comments = gon.allow_comments;
			set_allow_comments(gon_allow_comments);
			$("#cb_publisher_product_manifest_allow_comments").attr('checked', gon_allow_comments);
			set_cb_init("cb_publisher_product_manifest_allow_comments", "cb_allow_comments");			
			// $("#open_edit_allow_comments").click(function(){
	    		// $("#show_allow_comments, #open_edit_allow_comments").fadeOut(300, function(){
	    			// $("#show_allow_comments").addClass("hidden");
	    			// $("#open_edit_allow_comments").addClass("visibility-hidden");
	    			// $("#edit_allow_comments").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });
    		$("#submit_allow_comments").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_allow_comments").click();
    		});		
    		$("#cancel_allow_comments").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_allow_comments").click();
    		});		
			$("#cancel_allow_comments").on('click', function() {
				// show_control("allow_comments");
				hideEditId_115();
			});
			$("#cb_container_allow_comments").on('click', function() {
				set_cb("cb_publisher_product_manifest_allow_comments", "cb_allow_comments");
			});
			$("#submit_allow_comments").on('click', function() {
				var cb_publisher_product_manifest_allow_comments = $("#cb_publisher_product_manifest_allow_comments").is(':checked');
				if( cb_publisher_product_manifest_allow_comments !== gon_allow_comments ) {
					gon_allow_comments = cb_publisher_product_manifest_allow_comments;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "allow_comments":' + cb_publisher_product_manifest_allow_comments + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_allow_comments',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
		            		if (!data.b_error) {
								gon_allow_comments = data.allow_comments;
								set_allow_comments(gon_allow_comments);
								// show_control("allow_comments");				
								hideEditId_115();						
		            		}
		            		else {
								// show_control("allow_comments");
								hideEditId_115();										
								alert('An error occured while updating this field.');	            			
		            		}
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			$("#render_allow_comments").removeClass("check-affirm");
		  			$("#render_allow_comments").removeClass("check-required");
		  		}
			});

		});
				
	</script>

	<script>
		
		// allow_student_likes
		
		function set_allow_student_likes(b_allow_student_likes) {
			var s_html ="";
			if(b_allow_student_likes) {
				s_html = "Yes";
			}
			else {
				s_html = "No";
			}
			$("#box_allow_student_likes span").html(s_html);
			if (s_html.length > 0) {
				$("#box_allow_student_likes").addClass("box-detail-padding");
			}
			else {
				$("#box_allow_student_likes").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_116() {
			$("#control_116_show").addClass("hidden");
			$("#control_116_edit").fadeIn(1300).removeClass("hidden");
			$("#edit_allow_student_likes").fadeIn(1300).removeClass("hidden");
		}
	
		function hideEditId_116() {
			$('#control_116_edit').fadeOut(300, function() {
				$('#control_116_edit').addClass("hidden");
				$('#control_116_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-116-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-116-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_116_edit').hasClass('hidden')) {
							$('.control-116-edit-options').removeClass('hidden');
							showEditId_116();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-116-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_116();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_allow_student_likes', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_24);
				$("#dialog_1001").jqmShow();
			});

			var gon_allow_student_likes = gon.allow_student_likes;
			set_allow_student_likes(gon_allow_student_likes);
			$("#cb_publisher_product_manifest_allow_student_likes").attr('checked', gon_allow_student_likes);
			set_cb_init("cb_publisher_product_manifest_allow_student_likes", "cb_allow_student_likes");			
			// $("#open_edit_allow_student_likes").click(function(){
	    		// $("#show_allow_student_likes, #open_edit_allow_student_likes").fadeOut(300, function(){
	    			// $("#show_allow_student_likes").addClass("hidden");
	    			// $("#open_edit_allow_student_likes").addClass("visibility-hidden");
	    			// $("#edit_allow_student_likes").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });
    		$("#submit_allow_student_likes").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_allow_student_likes").click();
    		});		
    		$("#cancel_allow_student_likes").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_allow_student_likes").click();
    		});		
			$("#cancel_allow_student_likes").on('click', function() {
				// show_control("allow_student_likes");
				hideEditId_116();
			});
			$("#cb_container_allow_student_likes").on('click', function() {
				set_cb("cb_publisher_product_manifest_allow_student_likes", "cb_allow_student_likes");
			});
			$("#submit_allow_student_likes").on('click', function() {
				var cb_publisher_product_manifest_allow_student_likes = $("#cb_publisher_product_manifest_allow_student_likes").is(':checked');
				if( cb_publisher_product_manifest_allow_student_likes !== gon_allow_student_likes ) {
					gon_allow_student_likes = cb_publisher_product_manifest_allow_student_likes;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "allow_student_likes":' + cb_publisher_product_manifest_allow_student_likes + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_allow_student_likes',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
		            		if (!data.b_error) {
								gon_allow_student_likes = data.allow_student_likes;
								set_allow_student_likes(gon_allow_student_likes);
								// show_control("allow_student_likes");			
								hideEditId_116();							
		            		}
		            		else {
								// show_control("allow_student_likes");
								hideEditId_116();										
								alert('An error occured while updating this field.');	            			
		            		}
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			$("#render_allow_student_likes").removeClass("check-affirm");
		  			$("#render_allow_student_likes").removeClass("check-required");
		  		}
			});

		});
				
	</script>

	<script>
		
		// core_literacy_standards
		
		function set_core_literacy_standard(standard) {
			var e = "";
			var s = "";
			var sb = "";
			for(var i = 0; i < standard.length; i++) {
				s = "ch_core_literacy_standard_" + standard[i].toString();
				sb = "#cb_core_literacy_standard_" + standard[i].toString();
				e = document.getElementById(s);
				e.setAttribute('checked','checked');
				$(sb).addClass("cb-background");
			}
		}	
		
		function set_core_literacy_standard_text(core_literacy_standard_text) {
			s = "";
			s_html = "";
			for(var i = 0; i < core_literacy_standard_text.length; i++) {
				s = core_literacy_standard_text[i];
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span><br> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span><br> ';
	 			}
			}
			
			$("#box_core_literacy_standard").html(s_html);
			
			if (core_literacy_standard_text.length > 0) {
				$("#box_core_literacy_standard").addClass("box-detail-padding");
			}
			else {
				$("#box_core_literacy_standard").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_117() {
			$("#control_117_show").addClass("hidden");
			$("#control_117_edit").fadeIn(1300).removeClass("hidden");
			show_control_standard_edit("core_literacy_standard");
	    	$("#publisher_product_core_literacy_standard_chosen").css({
	    		'width':'314px'
	    	});				
    		// $("#show_core_literacy_standard, #open_edit_core_literacy_standard").fadeOut(300, function(){
    			// $("#show_core_literacy_standard").addClass("hidden");
    			// $("#open_edit_core_literacy_standard").addClass("visibility-hidden");
    			// $("#edit_core_literacy_standard").fadeIn(1300).removeClass("hidden");
    			$("#publisher_product_core_literacy_standard").trigger("chosen:updated");
    		// });
		}
	
		function hideEditId_117() {
			$('#control_117_edit').fadeOut(300, function() {
				$('#control_117_edit').addClass("hidden");
				$('#control_117_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-117-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-117-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_117_edit').hasClass('hidden')) {
							$('.control-117-edit-options').removeClass('hidden');
							showEditId_117();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-117-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_117();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_core_literacy_standard', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_20);
				$("#dialog_1001").jqmShow();
			});

			show_control_standard("core_literacy_standard");
			var gon_core_literacy_standard = gon.core_literacy_standard;
			set_core_literacy_standard(gon_core_literacy_standard);
			var gon_core_literacy_standard_text = gon.core_literacy_standard_text;
			set_core_literacy_standard_text(gon_core_literacy_standard_text);
			// $("#open_edit_core_literacy_standard").click(function(){
				// show_control_standard_edit("core_literacy_standard");
		    	// $("#publisher_product_core_literacy_standard_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_core_literacy_standard, #open_edit_core_literacy_standard").fadeOut(300, function(){
	    			// $("#show_core_literacy_standard").addClass("hidden");
	    			// $("#open_edit_core_literacy_standard").addClass("visibility-hidden");
	    			// $("#edit_core_literacy_standard").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_core_literacy_standard").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_core_literacy_standard").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_core_literacy_standard").click();
    		});			
			$("#cancel_core_literacy_standard").on('click', function() {
				show_control_standard("core_literacy_standard");
				// show_control("core_literacy_standard");
				hideEditId_117();
			});
    		$("#cancel_core_literacy_standard").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_core_literacy_standard").click();
    		});		
			$("#submit_core_literacy_standard").on('click', function() {
				var val = "";
				var s = "";				
				var core_literacy_standards_count = <%= @core_literacy_standards.count %>;
				for(var i = 1; i < core_literacy_standards_count + 1; i++ )
				{
					s = "#ch_core_literacy_standard_" + i.toString();
					if ($(s).is(':checked')) {
						val += "," + i.toString();
					}
				}
				if (val.length > 1) {
					val = val.slice(1, val.length);
				}
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "core_literacy_standard":"' + val + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_core_literacy_standard',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							show_control_standard("core_literacy_standard");	            		
							set_core_literacy_standard(data.g_core_literacy_standard);
							set_core_literacy_standard_text(data.g_core_literacy_standard_text);
							// show_control("core_literacy_standard");
							hideEditId_117();
	            		}
	            		else {
							// show_control("core_literacy_standard");
							hideEditId_117();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// core_math_standards
		
		function set_core_math_standard(standard) {
			var e = "";
			var s = "";
			var sb = "";
			for(var i = 0; i < standard.length; i++) {
				s = "ch_core_math_standard_" + standard[i].toString();
				sb = "#cb_core_math_standard_" + standard[i].toString();
				e = document.getElementById(s);
				e.setAttribute('checked','checked');
				$(sb).addClass("cb-background");
			}
		}	
		
		function set_core_math_standard_text(core_math_standard_text) {
			s = "";
			s_html = "";
			for(var i = 0; i < core_math_standard_text.length; i++) {
				s = core_math_standard_text[i];
	 			if (i%2 == 0 ? true : false) {
	 				s_html += '<span class="box-odd">' + s + '</span><br> ';
	 			}
	 			else {
	 				s_html += '<span class="box-even">' + s + '</span><br> ';
	 			}
			}
			
			$("#box_core_math_standard").html(s_html);
			
			if (core_math_standard_text.length > 0) {
				$("#box_core_math_standard").addClass("box-detail-padding");
			}
			else {
				$("#box_core_math_standard").removeClass("box-detail-padding");
			}
		}
		
		
		function showEditId_118() {
			$("#control_118_show").addClass("hidden");
			$("#control_118_edit").fadeIn(1300).removeClass("hidden");
			show_control_standard_edit("core_math_standard");
	    	$("#publisher_product_core_math_standard_chosen").css({
	    		'width':'314px'
	    	});				
    		$("#publisher_product_core_math_standard").trigger("chosen:updated");
		}
	
		function hideEditId_118() {
			$('#control_118_edit').fadeOut(300, function() {
				$('#control_118_edit').addClass("hidden");
				$('#control_118_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-118-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-118-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_118_edit').hasClass('hidden')) {
							$('.control-118-edit-options').removeClass('hidden');
							showEditId_118();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-118-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_118();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_core_math_standard', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_21);
				$("#dialog_1001").jqmShow();
			});

			show_control_standard("core_math_standard");
			var gon_core_math_standard = gon.core_math_standard;
			set_core_math_standard(gon_core_math_standard);
			var gon_core_math_standard_text = gon.core_math_standard_text;
			set_core_math_standard_text(gon_core_math_standard_text);
			// $("#open_edit_core_math_standard").click(function(){
				// show_control_standard_edit("core_math_standard");
		    	// $("#publisher_product_core_math_standard_chosen").css({
		    		// 'width':'314px'
		    	// });				
	    		// $("#show_core_math_standard, #open_edit_core_math_standard").fadeOut(300, function(){
	    			// $("#show_core_math_standard").addClass("hidden");
	    			// $("#open_edit_core_math_standard").addClass("visibility-hidden");
	    			// $("#edit_core_math_standard").fadeIn(1300).removeClass("hidden");
	    			// $("#publisher_product_core_math_standard").trigger("chosen:updated");
	    		// });
		  	// });
    		$("#submit_core_math_standard").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_core_math_standard").click();
    		});			
			$("#cancel_core_math_standard").on('click', function() {
				show_control_standard("core_math_standard");
				// show_control("core_math_standard");
				hideEditId_118();
			});
    		$("#cancel_core_math_standard").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_core_math_standard").click();
    		});		
			$("#submit_core_math_standard").on('click', function() {
				var val = "";
				var s = "";				
				var core_math_standards_count = <%= @core_math_standards.count %>;
				for(var i = 1; i < core_math_standards_count + 1; i++ )
				{
					s = "#ch_core_math_standard_" + i.toString();
					if ($(s).is(':checked')) {
						val += "," + i.toString();
					}
				}
				if (val.length > 1) {
					val = val.slice(1, val.length);
				}
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "core_math_standard":"' + val + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';     
			  	             
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_core_math_standard',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		if (!data.b_error) {
							show_control_standard("core_math_standard");	            		
							set_core_math_standard(data.g_core_math_standard);
							set_core_math_standard_text(data.g_core_math_standard_text);
							// show_control("core_math_standard");
							hideEditId_118();
	            		}
	            		else {
							// show_control("core_math_standard");
							hideEditId_118();
							alert('An error occured while updating this field.');	            			
	            		}
	            	},
	            	error: function(xhr){ alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script>

	<script>
		
		// poster_print_purchase
		
		function set_poster_print_purchase(b_poster_print_purchase) {
			var s_html ="";
			if(b_poster_print_purchase) {
				s_html = "Yes";
			}
			else {
				s_html = "No";
			}
			$("#box_poster_print_purchase span").html(s_html);
			if (s_html.length > 0) {
				$("#box_poster_print_purchase").addClass("box-detail-padding");
			}
			else {
				$("#box_poster_print_purchase").removeClass("box-detail-padding");
			}
			
			var s_purchased = "n/a";
			var s_public = "n/a";
			var s_options = "n/a";
			if(b_poster_print_purchase) {
				//
			}
			else {
				//
			}
			$("#box_status_square").html(s_html);		
			$("#box_status_square_purchased").html(s_purchased);
			$("#box_status_square_public").html(s_public);
			$("#box_status_square_options").html(s_options);
		}
		
		
		function showEditId_119() {
			$("#control_119_show").addClass("hidden");
			$("#control_119_edit").fadeIn(1300).removeClass("hidden");
			$("#edit_poster_print_purchase").fadeIn(1300).removeClass("hidden");
		}
	
		function hideEditId_119() {
			$('#control_119_edit').fadeOut(300, function() {
				$('#control_119_edit').addClass("hidden");
				$('#control_119_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-119-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-119-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_119_edit').hasClass('hidden')) {
							$('.control-119-edit-options').removeClass('hidden');
							showEditId_119();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-119-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_119();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_poster_print_purchase', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_28);
				$("#dialog_1001").jqmShow();
			});

			var gon_poster_print_purchase = gon.poster_print_purchase;
			set_poster_print_purchase(gon_poster_print_purchase);
			$("#cb_publisher_product_manifest_poster_print_purchase").attr('checked', gon_poster_print_purchase);
			set_cb_init("cb_publisher_product_manifest_poster_print_purchase", "cb_poster_print_purchase");			
			// $("#open_edit_poster_print_purchase").click(function(){
	    		// $("#show_poster_print_purchase, #open_edit_poster_print_purchase").fadeOut(300, function(){
	    			// $("#show_poster_print_purchase").addClass("hidden");
	    			// $("#open_edit_poster_print_purchase").addClass("visibility-hidden");
	    			// $("#edit_poster_print_purchase").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });
    		$("#submit_poster_print_purchase").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_poster_print_purchase").click();
    		});		
    		$("#cancel_poster_print_purchase").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_poster_print_purchase").click();
    		});		
			$("#cancel_poster_print_purchase").on('click', function() {
				// show_control("poster_print_purchase");
				hideEditId_119();
			});
			$("#cb_container_poster_print_purchase").on('click', function() {
				set_cb("cb_publisher_product_manifest_poster_print_purchase", "cb_poster_print_purchase");
			});
			$("#submit_poster_print_purchase").on('click', function() {
				var cb_publisher_product_manifest_poster_print_purchase = $("#cb_publisher_product_manifest_poster_print_purchase").is(':checked');
				if( cb_publisher_product_manifest_poster_print_purchase !== gon_poster_print_purchase ) {
					gon_poster_print_purchase = cb_publisher_product_manifest_poster_print_purchase;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "poster_print_purchase":' + cb_publisher_product_manifest_poster_print_purchase + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_poster_print_purchase',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
		            		if (!data.b_error) {
								gon_poster_print_purchase = data.poster_print_purchase;
								set_poster_print_purchase(gon_poster_print_purchase);
								// show_control("poster_print_purchase");		
								hideEditId_119();								
		            		}
		            		else {
								// show_control("poster_print_purchase");
								hideEditId_119();										
								alert('An error occured while updating this field.');	            			
		            		}
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			$("#render_poster_print_purchase").removeClass("check-affirm");
		  			$("#render_poster_print_purchase").removeClass("check-required");
		  		}
			});


		});
				
	</script>

	<script>
		
		// poster_pin_web
		
		function set_poster_pin_web(b_poster_pin_web) {
			var s_html ="";
			if(b_poster_pin_web) {
				s_html = "Yes";
			}
			else {
				s_html = "No";
			}
			$("#box_poster_pin_web span").html(s_html);
			if (s_html.length > 0) {
				$("#box_poster_pin_web").addClass("box-detail-padding");
			}
			else {
				$("#box_poster_pin_web").removeClass("box-detail-padding");
			}
			
			var s_purchased = "n/a";
			var s_public = "n/a";
			var s_options = "n/a";
			if(b_poster_pin_web) {
				//
			}
			else {
				//
			}
			$("#box_status_pin_web").html(s_html);		
			$("#box_status_pin_web_purchased").html(s_purchased);
			$("#box_status_pin_web_public").html(s_public);
			$("#box_status_pin_web_options").html(s_options);			
		}
		
		
		function showEditId_120() {
			$("#control_120_show").addClass("hidden");
			$("#control_120_edit").fadeIn(1300).removeClass("hidden");
			$("#edit_poster_pin_web").fadeIn(1300).removeClass("hidden");
		}
	
		function hideEditId_120() {
			$('#control_120_edit').fadeOut(300, function() {
				$('#control_120_edit').addClass("hidden");
				$('#control_120_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-120-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-120-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_120_edit').hasClass('hidden')) {
							$('.control-120-edit-options').removeClass('hidden');
							showEditId_120();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-120-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_120();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_poster_pin_web', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_29);
				$("#dialog_1001").jqmShow();
			});

			var gon_poster_pin_web = gon.poster_pin_web;
			set_poster_pin_web(gon_poster_pin_web);
			$("#cb_publisher_product_manifest_poster_pin_web").attr('checked', gon_poster_pin_web);
			set_cb_init("cb_publisher_product_manifest_poster_pin_web", "cb_poster_pin_web");			
			// $("#open_edit_poster_pin_web").click(function(){
	    		// $("#show_poster_pin_web, #open_edit_poster_pin_web").fadeOut(300, function(){
	    			// $("#show_poster_pin_web").addClass("hidden");
	    			// $("#open_edit_poster_pin_web").addClass("visibility-hidden");
	    			// $("#edit_poster_pin_web").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });
    		$("#submit_poster_pin_web").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_poster_pin_web").click();
    		});		
    		$("#cancel_poster_pin_web").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_poster_pin_web").click();
    		});		
			$("#cancel_poster_pin_web").on('click', function() {
				// show_control("poster_pin_web");
				hideEditId_120();
			});
			$("#cb_container_poster_pin_web").on('click', function() {
				set_cb("cb_publisher_product_manifest_poster_pin_web", "cb_poster_pin_web");
			});
			$("#submit_poster_pin_web").on('click', function() {
				var cb_publisher_product_manifest_poster_pin_web = $("#cb_publisher_product_manifest_poster_pin_web").is(':checked');
				if( cb_publisher_product_manifest_poster_pin_web !== gon_poster_pin_web ) {
					gon_poster_pin_web = cb_publisher_product_manifest_poster_pin_web;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "poster_pin_web":' + cb_publisher_product_manifest_poster_pin_web + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_poster_pin_web',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
		            		if (!data.b_error) {
								gon_poster_pin_web = data.poster_pin_web;
								set_poster_pin_web(gon_poster_pin_web);
								// show_control("poster_pin_web");					
								hideEditId_120();					
		            		}
		            		else {
								// show_control("poster_pin_web");
								hideEditId_120();										
								alert('An error occured while updating this field.');	            			
		            		}
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			$("#render_poster_pin_web").removeClass("check-affirm");
		  			$("#render_poster_pin_web").removeClass("check-required");
		  		}
			});

		});
				
	</script>

	<script>
		
		// poster_pin_purchase
		
		function set_poster_pin_purchase(b_poster_pin_purchase) {
			var s_html ="";
			if(b_poster_pin_purchase) {
				s_html = "Yes";
			}
			else {
				s_html = "No";
			}
			$("#box_poster_pin_purchase span").html(s_html);
			if (s_html.length > 0) {
				$("#box_poster_pin_purchase").addClass("box-detail-padding");
			}
			else {
				$("#box_poster_pin_purchase").removeClass("box-detail-padding");
			}
			
			var s_purchased = "n/a";
			var s_public = "n/a";
			var s_options = "n/a";
			if(b_poster_pin_purchase) {
				//
			}
			else {
				//
			}
			$("#box_status_pin_print").html(s_html);		
			$("#box_status_pin_print_purchased").html(s_purchased);
			$("#box_status_pin_print_public").html(s_public);
			$("#box_status_pin_print_options").html(s_options);						
		}
		
		
		function showEditId_121() {
			$("#control_121_show").addClass("hidden");
			$("#control_121_edit").fadeIn(1300).removeClass("hidden");
	    	$("#edit_poster_pin_purchase").fadeIn(1300).removeClass("hidden");
		}
	
		function hideEditId_121() {
			$('#control_121_edit').fadeOut(300, function() {
				$('#control_121_edit').addClass("hidden");
				$('#control_121_show').fadeIn(1300).removeClass("hidden");
			});
		}

		
		$(document).ready(function(){


			$(document).on('click', '.control-121-edit', function(event) {
				if ($(".btn-open-edit-mode-container").hasClass("hidden")) {
					var b_info_button_clicked   = $(event.target).hasClass('control-121-info-button');
					if (!b_info_button_clicked) {
						if ($('#control_121_edit').hasClass('hidden')) {
							$('.control-121-edit-options').removeClass('hidden');
							showEditId_121();
						}
						else {
							var b_cancel_button_clicked = $(event.target).hasClass('control-121-cancel-button');
							// var b_save_button_clicked   = $(event.target).hasClass('control-1-save-button');
							if (b_cancel_button_clicked) {
								hideEditId_121();
							}
						}
					}
				}
			});


			$(document).on('click', '#open_info_poster_pin_purchase', function() {
				s_scrollPos = (10 + $(window).scrollTop()).toString() + 'px';
				$("#dlg_info").html(info_msg_30);
				$("#dialog_1001").jqmShow();
			});

			var gon_poster_pin_purchase = gon.poster_pin_purchase;
			set_poster_pin_purchase(gon_poster_pin_purchase);
			$("#cb_publisher_product_manifest_poster_pin_purchase").attr('checked', gon_poster_pin_purchase);
			set_cb_init("cb_publisher_product_manifest_poster_pin_purchase", "cb_poster_pin_purchase");			
			// $("#open_edit_poster_pin_purchase").click(function(){
	    		// $("#show_poster_pin_purchase, #open_edit_poster_pin_purchase").fadeOut(300, function(){
	    			// $("#show_poster_pin_purchase").addClass("hidden");
	    			// $("#open_edit_poster_pin_purchase").addClass("visibility-hidden");
	    			// $("#edit_poster_pin_purchase").fadeIn(1300).removeClass("hidden");
	    		// });
		  	// });
    		$("#submit_poster_pin_purchase").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_poster_pin_purchase").click();
    		});		
    		$("#cancel_poster_pin_purchase").keypress(function(e){
      			if(e.keyCode==13)
      			$("#cancel_poster_pin_purchase").click();
    		});		
			$("#cancel_poster_pin_purchase").on('click', function() {
				// show_control("poster_pin_purchase");
				hideEditId_121();
			});
			$("#cb_container_poster_pin_purchase").on('click', function() {
				set_cb("cb_publisher_product_manifest_poster_pin_purchase", "cb_poster_pin_purchase");
			});
			$("#submit_poster_pin_purchase").on('click', function() {
				var cb_publisher_product_manifest_poster_pin_purchase = $("#cb_publisher_product_manifest_poster_pin_purchase").is(':checked');
				if( cb_publisher_product_manifest_poster_pin_purchase !== gon_poster_pin_purchase ) {
					gon_poster_pin_purchase = cb_publisher_product_manifest_poster_pin_purchase;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "poster_pin_purchase":' + cb_publisher_product_manifest_poster_pin_purchase + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_poster_pin_purchase',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
		            		if (!data.b_error) {
								gon_poster_pin_purchase = data.poster_pin_purchase;
								set_poster_pin_purchase(gon_poster_pin_purchase);
								// show_control("poster_pin_purchase");
								hideEditId_121();										
		            		}
		            		else {
								// show_control("poster_pin_purchase");
								hideEditId_121();										
								alert('An error occured while updating this field.');	            			
		            		}
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			$("#render_poster_pin_purchase").removeClass("check-affirm");
		  			$("#render_poster_pin_purchase").removeClass("check-required");
		  		}
			});

		});
				
	</script>

	<script>
		
		$(window).load( function() {
		
			// alert('load');
			
			$('#body').removeClass('body-visibility-hidden');
		
			// function preload(arrayOfImages) {
			    // $(arrayOfImages).each(function(){
			        // $('<img/>')[0].src = this;
			        // // Alternatively you could use:
			        // // (new Image()).src = this;
			    // });
			// }
			// // Usage:
			// preload([
			    // 'img/imageName.jpg',
			    // 'img/anotherOne.jpg',
			    // 'img/blahblahblah.jpg'
			// ]);		
		
		
			// function preload(arrayOfImages) {
			    // $(arrayOfImages).each(function() {
			        // $('<img/>')[0].src = this;
			    // });
			// }
			// preload([
			    // '<#%= @image_5_url %#>'
			// ]);		
			// $('#render_image_5').html("<#%= j render('publisher_product_manifests/image_5') %#>");
			// // document.getElementById("preload-01").style.background = "url(<#%= @image_5_url %#>) no-repeat";
			// $("#preload-01").on("load", function() {
				// document.getElementById("preload-01").style.background = "url(<#%= @image_5_url %#>) no-repeat";
			// }).each(function() {
			  	// if(this.complete) {
			  		// alert('complete 5');
			  		// // $('#render_image_5').css('background-image', 'url(<#%= @image_5_url %#>)');
			  		// // $(this).load();
			  	// }
			// });



			
			// $('#render_image_5').css('background-image', 'url(<#%= @image_5_url %#>)');
			
			// $("#image_5_img").on("load", function() {
				// // var img_w = this.width;
				// // var img_h = this.height;
				// // $(".container-figure-image-5").css({
					// // width : img_w,
					// // height : img_h						
				// // });													
			// }).each(function() {
			  	// if(this.complete) {
			  		// alert('complete 5');
			  		// // $('#render_image_5').css('background-image', 'url(<#%= @image_5_url %#>)');
			  		// $(this).load();
			  		// $(".drop-namespace105").removeClass("hidden");
			  	// }
			// });

		});

		
	</script>




	<!-- <script>
		
		// source_url *dormant
		
		$(document).ready(function(){

			if(<%= @b_source_url %>) {
				$("#render_source_url").html("");
			}
			else {
				$("#render_source_url").addClass("check-required");
			}
    		$("#submit_source_url").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_source_url").click();
    		});				
			$("#submit_source_url").on('click', function() {
				var input_publisher_product_manifest_source_url = $("#publisher_product_manifest_source_url").val();
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "source_url":"' + input_publisher_product_manifest_source_url + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_source_url',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
						if (data.source_url.length > 0) {      		
							$("#publisher_product_manifest_source_url").attr("value", data.source_url);
							$("#render_source_url").removeClass("check-required");
							$("#render_source_url").addClass("check-affirm");
						}
						else {
							$("#publisher_product_manifest_source_url").attr("value", "");
							$("#render_source_url").removeClass("check-affirm");
							$("#render_source_url").addClass("check-required");
						}							
						$("#focus_24").focus();	
						set_updated(data.updated);												
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});


		});
				
	</script> -->

	<!-- <script>
		
		// updating_refresh_rate *dormant
		
	  	// jQuery.fn['any'] = function() {
	    	// return (this.length > 0);
	  	// };
		// function isRealValue(obj){
 			// return obj && obj !== "null" && obj!== "undefined";
		// }
    	// if(typeof(foo) !== 'undefined' && foo != null) {
    		// //you can use foo!
    	// }			  	
			  	
		function set_updating_refresh_rate(updating_refresh_rate) {
			var e = document.getElementById("publisher_product_manifest_updating_refresh_rate");
			var n_option;
			for(var i = 0; i < updating_refresh_rate.length; i++) {
				if (updating_refresh_rate[i] !== 'null' ) {
					alert(updating_refresh_rate[i]);
					n_option = updating_refresh_rate[i];
					e.options[n_option].setAttribute('selected','selected');
				}
			}
			$("#publisher_product_manifest_updating_refresh_rate").trigger("chosen:updated");
		}
		
		$(document).ready(function(){

			var gon_updating_refresh_rate = gon.updating_refresh_rate;
			set_updating_refresh_rate(gon_updating_refresh_rate);
			if(<%= @b_updating_refresh_rate %>) {
				$("#render_updating_refresh_rate").html("");
			}
			else {
				$("#render_updating_refresh_rate").addClass("check-required");
			}
    		$("#submit_updating_refresh_rate").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_updating_refresh_rate").click();
    		});				
			$("#submit_updating_refresh_rate").on('click', function() {
				var input_publisher_product_manifest_updating_refresh_rate = $("#publisher_product_manifest_updating_refresh_rate").val();
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "updating_refresh_rate":"' + input_publisher_product_manifest_updating_refresh_rate + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_updating_refresh_rate',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
						if (data.b_has_updating_refresh_rate) {
							$("#render_updating_refresh_rate").removeClass("check-required");
							$("#render_updating_refresh_rate").addClass("check-affirm");
						}
						else {
							$("#render_updating_refresh_rate").removeClass("check-affirm");
							$("#render_updating_refresh_rate").addClass("check-required");
						}
						set_updating_refresh_rate(data.g_updated);
						$("#focus_30").focus();
						set_updated(data.updated);													
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script> -->

	<!-- <script>
		
		// updating_type *dormant
		
		function set_updating_type(updating_type) {
			var e = document.getElementById("publisher_product_manifest_updating_type");
			var n_option;
			for(var i = 0; i < updating_type.length; i++) {
				if (updating_type[i] !== 'null' ) {
					alert(updating_type[i]);
					n_option = updating_type[i];
					e.options[n_option].setAttribute('selected','selected');
				}
			}
			$("#publisher_product_manifest_updating_type").trigger("chosen:updated");
		}
		
		$(document).ready(function(){

			var gon_updating_type = gon.updating_type;
			set_updating_type(gon_updating_type);
			if(<%= @b_updating_type %>) {
				$("#render_updating_type").html("");
			}
			else {
				$("#render_updating_type").addClass("check-required");
			}
    		$("#submit_updating_type").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_updating_type").click();
    		});				
			$("#submit_updating_type").on('click', function() {
				var input_publisher_product_manifest_updating_type = $("#publisher_product_manifest_updating_type").val();
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "updating_type":"' + input_publisher_product_manifest_updating_type + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_updating_type',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
						if (data.b_has_updating_type) {
							$("#render_updating_type").removeClass("check-required");
							$("#render_updating_type").addClass("check-affirm");
						}
						else {
							$("#render_updating_type").removeClass("check-affirm");
							$("#render_updating_type").addClass("check-required");
						}
						set_updating_type(data.g_updated);
						$("#focus_30").focus();
						set_updated(data.updated);													
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script> -->

	<!-- <script>
		
		// character *dormant
		
		function set_character(character) {
			var e = document.getElementById("publisher_product_manifest_character");
			for(var i = 1; i < character.length; i++) {
				if( character[i] ) {
					e.options[i].setAttribute('selected','selected');
				}
			}
			$("#publisher_product_manifest_character").trigger("chosen:updated");
		}
		
		$(document).ready(function(){

			var gon_character = gon.character;
			set_character(gon_character);
			if(<%= @b_character %>) {
				$("#render_character").html("");
			}
			else {
				$("#render_character").addClass("check-required");
			}
    		$("#submit_character").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_character").click();
    		});				

			$("#submit_character").on('click', function() {
				var input_publisher_product_manifest_character = $("#publisher_product_manifest_character").val();
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "character":"' + input_publisher_product_manifest_character + 
							   '"}';      
			  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/publisher_product_manifests/update_character',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
						if (data.b_has_character) {
							$("#render_character").removeClass("check-required");
							$("#render_character").addClass("check-affirm");
						}
						else {
							$("#render_character").removeClass("check-affirm");
							$("#render_character").addClass("check-required");
						}
						set_character(data.g_updated);
						$("#focus_30").focus();
						set_updated(data.updated);													
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script> -->

	<!-- <script>
		
		// reselling *dormant
		
		$(document).ready(function(){

			var gon_reselling = gon.reselling;
			$("#ch_publisher_product_manifest_reselling").attr('checked', gon_reselling);
    		$("#submit_reselling").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_reselling").click();
    		});				

			$("#submit_reselling").on('click', function() {
				var ch_publisher_product_manifest_reselling = $("#ch_publisher_product_manifest_reselling").is(':checked');
				if( ch_publisher_product_manifest_reselling !== gon_reselling ) {
					gon_reselling = ch_publisher_product_manifest_reselling;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "reselling":' + ch_publisher_product_manifest_reselling + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_reselling',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
							$("#render_reselling").addClass("check-affirm");
							$("#focus_21").focus();
							set_updated(data.updated);												
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
			});

		});
				
	</script> -->

	<!-- <script>
		
		// evaluation *dormant
		
		$(document).ready(function(){

			var gon_evaluation = gon.evaluation;
			$("#ch_publisher_product_manifest_evaluation").attr('checked', gon_evaluation);
    		$("#submit_evaluation").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_evaluation").click();
    		});				
			$("#submit_evaluation").on('click', function() {
				var ch_publisher_product_manifest_evaluation = $("#ch_publisher_product_manifest_evaluation").is(':checked');
				if( ch_publisher_product_manifest_evaluation !== gon_evaluation ) {
					gon_evaluation = ch_publisher_product_manifest_evaluation;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "evaluation":' + ch_publisher_product_manifest_evaluation + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_evaluation',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
							$("#render_evaluation").addClass("check-affirm");
							$("#focus_21").focus();
							set_updated(data.updated);												
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			$("#render_evaluation").removeClass("check-affirm");
		  			$("#render_evaluation").removeClass("check-required");
		  		}
			});

		});
				
	</script> -->

	<!-- <script>
		
		// research *dormant
		
		function set_research(research) {
			var ii = 0;
			for(var i = 0; i < research.length; i++) {
				ii = i + 1;
				if( research[i] ) {
					$("#publisher_product_manifest_research option[value='"+ ii.toString() +"']").prop("selected", true);
				}
				else {
					$("#publisher_product_manifest_research option[value='"+ ii.toString() +"']").prop("selected", false);
				}
			}
			$("#publisher_product_manifest_research").trigger("chosen:updated");
		}
		
		$(document).ready(function(){

			var gon_research = gon.research;
			set_research(gon_research);
			if(<%= @b_research %>) {
				$("#render_research").html("");
			}
			else {
				$("#render_research").addClass("check-required");
			}
    		$("#submit_research").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_research").click();
    		});				
			$("#submit_research").on('click', function() {
				var input_publisher_product_manifest_research = $("#publisher_product_manifest_research").val();
				var ar_publisher_product_manifest_research = [];
				for( var i = 1; i < 3; i++ ) {
					if( $.inArray( i.toString(), input_publisher_product_manifest_research) !== -1 ) {
						ar_publisher_product_manifest_research.push(true);
					}
					else {
						ar_publisher_product_manifest_research.push(false);
					}
				}
				if(!arraysAreIdentical(ar_publisher_product_manifest_research, gon_research)) {
					gon_research = ar_publisher_product_manifest_research;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "research":"' + input_publisher_product_manifest_research + 
								   '"}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_research',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
							$("#render_research").addClass("check-affirm");
							set_research(data.research);
							set_updated(data.updated);												
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			alert("identical");
		  			$("#render_research").removeClass("check-affirm");
		  			$("#render_research").removeClass("check-required");
		  		}
			});

		});
				
	</script> -->

	<!-- <script>
		
		// public_relations *dormant
		
		function set_public_relations(public_relations) {
			var s = "";
			var ii = 0;
			for(var i = 0; i < public_relations.length; i++) {
				ii = i + 1;
				s = "#ch_publisher_product_manifest_pr_updates_" + ii.toString();
				$(s).attr('checked', public_relations[i]);
			}
		}		
		
		$(document).ready(function(){

			var gon_public_relations = gon.public_relations;
			set_public_relations(gon_public_relations);
    		$("#submit_public_relations").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_public_relations").click();
    		});				
			$("#submit_public_relations").on('click', function() {
				var ch_publisher_product_manifest_pr_updates_1 = $("#ch_publisher_product_manifest_pr_updates_1").is(':checked');
				var ch_publisher_product_manifest_pr_updates_2 = $("#ch_publisher_product_manifest_pr_updates_2").is(':checked');
				var ch_publisher_product_manifest_pr_updates_3 = $("#ch_publisher_product_manifest_pr_updates_3").is(':checked');
				var b_changed = false;
				var b_pr_updates_1_changed = false;
				var b_pr_updates_2_changed = false;
				var b_pr_updates_3_changed = false;
				var ar_public_relations = [];
				ar_public_relations[0] = ch_publisher_product_manifest_pr_updates_1;
				ar_public_relations[1] = ch_publisher_product_manifest_pr_updates_2;
				ar_public_relations[2] = ch_publisher_product_manifest_pr_updates_3;
				if( ch_publisher_product_manifest_pr_updates_1 !== gon_public_relations[0] ) {
					b_pr_updates_1_changed = true;
				}
				if( ch_publisher_product_manifest_pr_updates_2 !== gon_public_relations[1] ) {
					b_pr_updates_2_changed = true;
				}
				if( ch_publisher_product_manifest_pr_updates_3 !== gon_public_relations[2] ) {
					b_pr_updates_3_changed = true;
				}
				if(!arraysAreIdentical(ar_public_relations, gon_public_relations)) {
					gon_public_relations = ar_public_relations;
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "pr_updates_1":' + ch_publisher_product_manifest_pr_updates_1 + 
								   ', "pr_updates_2":' + ch_publisher_product_manifest_pr_updates_2 + 
								   ', "pr_updates_3":' + ch_publisher_product_manifest_pr_updates_3 + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_public_relations',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
							if ( b_pr_updates_1_changed ) {
								$("#render_pr_updates_1").addClass("check-affirm");
							}
							if ( b_pr_updates_2_changed ) {
								$("#render_pr_updates_2").addClass("check-affirm");
							}
							if ( b_pr_updates_3_changed ) {
								$("#render_pr_updates_3").addClass("check-affirm");
							}
							gon_public_relations = data.public_relations;
							set_public_relations(data.public_relations);
							set_updated(data.updated);												
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			var ss = "";
		  			for( var i = 1; i < 4; i++ ) {
		  				ss = "#render_pr_updates_" + i.toString();
			  			$(ss).removeClass("check-affirm");
			  			$(ss).removeClass("check-required");
		  			}
		  		}
			});

		});
				
	</script> -->

	<!-- <script>
		
		// metrics *dormant
		
		function set_metrics(metrics) {
			var s = "";
			var ii = 0;
			for(var i = 0; i < metrics.length; i++) {
				ii = i + 1;
				s = "#ch_publisher_product_manifest_metrics_" + ii.toString();
				$(s).attr('checked', metrics[i]);
			}
		}		
		
		$(document).ready(function(){

			var gon_metrics = gon.metrics;
			set_metrics(gon_metrics);
    		$("#submit_metrics").keypress(function(e){
      			if(e.keyCode==13)
      			$("#submit_metrics").click();
    		});				
			$("#submit_metrics").on('click', function() {
				var ch_publisher_product_manifest_metrics_1 = $("#ch_publisher_product_manifest_metrics_1").is(':checked');
				var ch_publisher_product_manifest_metrics_2 = $("#ch_publisher_product_manifest_metrics_2").is(':checked');
				var ch_publisher_product_manifest_metrics_3 = $("#ch_publisher_product_manifest_metrics_3").is(':checked');
				var ch_publisher_product_manifest_metrics_4 = $("#ch_publisher_product_manifest_metrics_4").is(':checked');
				var ch_publisher_product_manifest_metrics_5 = $("#ch_publisher_product_manifest_metrics_5").is(':checked');
				var b_changed = false;
				var b_metrics_1_changed = false;
				var b_metrics_2_changed = false;
				var b_metrics_3_changed = false;
				var b_metrics_4_changed = false;
				var b_metrics_5_changed = false;
				var ar_metrics = [];
				ar_metrics[0] = ch_publisher_product_manifest_metrics_1;
				ar_metrics[1] = ch_publisher_product_manifest_metrics_2;
				ar_metrics[2] = ch_publisher_product_manifest_metrics_3;
				ar_metrics[3] = ch_publisher_product_manifest_metrics_4;
				ar_metrics[4] = ch_publisher_product_manifest_metrics_5;
				if( ch_publisher_product_manifest_metrics_1 !== gon_metrics[0] ) {
					b_metrics_1_changed = true;
				}
				if( ch_publisher_product_manifest_metrics_2 !== gon_metrics[1] ) {
					b_metrics_2_changed = true;
				}
				if( ch_publisher_product_manifest_metrics_3 !== gon_metrics[2] ) {
					b_metrics_3_changed = true;
				}
				if( ch_publisher_product_manifest_metrics_4 !== gon_metrics[3] ) {
					b_metrics_4_changed = true;
				}
				if( ch_publisher_product_manifest_metrics_5 !== gon_metrics[4] ) {
					b_metrics_5_changed = true;
				}
				if(!arraysAreIdentical(ar_metrics, gon_metrics)) {
					var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
								   ', "metrics_1":' + ch_publisher_product_manifest_metrics_1 + 
								   ', "metrics_2":' + ch_publisher_product_manifest_metrics_2 + 
								   ', "metrics_3":' + ch_publisher_product_manifest_metrics_3 + 
								   ', "metrics_4":' + ch_publisher_product_manifest_metrics_4 + 
								   ', "metrics_5":' + ch_publisher_product_manifest_metrics_5 + 
								   '}';      
				  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  
				  	$.ajax({
				    	type: 'POST',
				    	data : obj,
				    	url: '/publisher_product_manifests/update_metrics',			    	
				    	dataType: "json",
				    	contentType: "application/json",
				    	processData: false,
				    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            	statusCode: {
		            	},
		            	success: function(data) {
							if ( b_metrics_1_changed ) {
								$("#render_metrics_1").addClass("check-affirm");
							}
							if ( b_metrics_2_changed ) {
								$("#render_metrics_2").addClass("check-affirm");
							}
							if ( b_metrics_3_changed ) {
								$("#render_metrics_3").addClass("check-affirm");
							}
							if ( b_metrics_4_changed ) {
								$("#render_metrics_4").addClass("check-affirm");
							}
							if ( b_metrics_5_changed ) {
								$("#render_metrics_5").addClass("check-affirm");
							}
							gon_metrics = data.metrics;
							set_metrics(data.metrics);
							set_updated(data.updated);												
		            	},
		            	error: function(xhr){  alert("error: " + xhr.statusText); }        
				  	});
			  		return false;
		  		}
		  		else {
		  			var ss = "";
		  			for( var i = 1; i < 6; i++ ) {
		  				ss = "#render_metrics_" + i.toString();
			  			$(ss).removeClass("check-affirm");
			  			$(ss).removeClass("check-required");
		  			}
		  		}
			});

		});
				
	</script> -->

	<!-- <script>
		
		// square_purchase *dormant
		
		$(document).ready(function(){

			$("#btn_square_purchase").on('click', function() {
				var input_amount = 23.45;
				var obj_list = '{ "publisher_product_id":' + publisher_product_id + 
							   ', "amount":' + input_amount + 
							   '}';      
			  	var obj = '{ "payment": [' +  obj_list + '] }';                  
			  	$.ajax({
			    	type: 'POST',
			    	data : obj,
			    	url: '/payments/payment',			    	
			    	dataType: "json",
			    	contentType: "application/json",
			    	processData: false,
			    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	            	statusCode: {
	            	},
	            	success: function(data) {
	            		// if (data.url) { window.location.href = data.url; }
	            		window.location.href = "/Purchase";
	            	},
	            	error: function(xhr){  alert("error: " + xhr.statusText); }        
			  	});
		  		return false;
			});

		});
				
	</script> -->

	<!-- <script>
		
		function renderListingPreview(cntrl) {
			var path = '/publisher_product_manifests/update_listing_preview';
			if(cntrl == null) {
				cntrl = 0;				
			}
			var formData = { publisher_product_id: publisher_product_id,
							 control: cntrl 
						   };
		  	$.ajax({
		    	type: 'POST',
		    	data : formData,
		    	url: path,	
		    	// cache: false,		    	
		    	dataType: "script",
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            	statusCode: {
            	},
            	success: function(data) {
            	},
            	error: function(xhr){  alert("error: " + xhr.statusText); }        
		  	});
		}
		
		$(document).ready(function(){

		});
				
	</script> -->

	<!-- <script>

		function reset_current_publisher_product() {

			var obj_list = '{"publisher_product_gen_id":' + <#%= @publisher_product_gen_id %#> + 
						   '}';      
		  	var obj = '{ "publisher_product_manifest": [' +  obj_list + '] }';                  

			$.ajax({
		    	type: 'POST',
		    	// data : JSON.stringify(obj),
		    	data : obj,
				url: '/publisher_product_manifests/reset_current_publisher_product',			    	
		    	dataType: "json",
		    	contentType: "application/json",
		    	processData: false,
		    	async: false,
		    	beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
	        	statusCode: {
	            	// 200:function() { alert("200"); }, 202:function() { alert("202"); }
	        	},
	        	success: function(data) {
	        	},
	        	error: function(xhr){  alert("error: " + xhr.statusText); }        
			});
		}

		// $(window).on('beforeunload', function(){
			// reset_current_publisher_product();
		// });

	</script> -->
