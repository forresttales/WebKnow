

					<% if !@image_1.nil? %>
						<div style="display: inline-block; width: 604px; height: 604px; background-color: #aaa; border: 2px solid #376340;">
							<img id="cropbox_image_1" alt="" src="<%= @image_1.image_url(:image_600_600) + '?' + (rand(10..90) * rand(100..900)).to_s if @image_1.image? %>" />
						</div>
						<div style="display: inline-block; width: 200px; height: 604px; vertical-align: top; position: relative;">
							<div class="background-table-dialog-2">
						   		<div class="table-dialog-1">
									<div class="dialog-msg-container">
										<span>Preview</span>
									</div>
				   				</div>
			   				</div>
			   				<div style="height: 4px"></div>							
							<div style="width:200px; height:200px; overflow:hidden">
							  <%= image_tag @image_1.image_url(:image_600_600), :id => "preview_image_1_200" %>
							</div>
							<div style="height: 4px"></div>
							<div style="width:100px; height:100px; overflow:hidden">
							  <%= image_tag @image_1.image_url(:image_600_600), :id => "preview_image_1_100" %>
							</div>
							<div style="height: 4px"></div>
							<div style="width:50px; height:50px; overflow:hidden">
							  <%= image_tag @image_1.image_url(:image_600_600), :id => "preview_image_1_50" %>
							</div>
							<div style="height: 4px"></div>
							<div style="width:34px; height:34px; overflow:hidden">
							  <%= image_tag @image_1.image_url(:image_600_600), :id => "preview_image_1_34" %>
							</div>
							<!-- <div style="height: 4px"></div> -->
							<!-- <#%= form_tag( crop_commit_user_publisher_users_path, :remote => true ) do %#> -->
							  	<%= text_field_tag :crop_x, params["crop_x"], id: "id_crop_x_image_1", class: "input-crop hidden" %><br>
							  	<%= text_field_tag :crop_y, params["crop_y"], id: "id_crop_y_image_1", class: "input-crop hidden" %><br>
							  	<%= text_field_tag :crop_w, params["crop_w"], id: "id_crop_w_image_1", class: "input-crop hidden" %><br>
							  	<%= text_field_tag :crop_h, params["crop_h"], id: "id_crop_h_image_1", class: "input-crop hidden" %><br>
								<%= hidden_field_tag "image_id_image_1", @image_1.id %>
							    <!-- <#%= submit_tag '', :id => 'btn_submit_crop_image_primary', :class => 'hidden' %#> -->
							<!-- <#% end %#> -->	
							
			   				<div style="position: absolute; bottom: 0px; right: 0px;">
								<span><input id="btn_dlg_submit_crop_image_1" class="btn-pop-dialog-1" type="button" value="Save" tabindex=""></span>
								&nbsp;
								<span><input id="btn_dlg_cancel_crop_image_1" class="btn-pop-dialog-1" type="button" value="Cancel" tabindex=""></span>
			   				</div>
							
						</div>
					<% else %>
						<div> no @image_1</div>
					<% end %>		


	<script>
		
		<% if !@image_1.nil? %>
		var insert_crop_x_image_1 = <%= @image_1.crop_x %>;
		var insert_crop_y_image_1 = <%= @image_1.crop_y %>;
		var insert_crop_w_image_1 = <%= @image_1.crop_w %>;
		var insert_crop_h_image_1 = <%= @image_1.crop_h %>;
		<% else %>
		var insert_crop_x_image_1 = 0;
		var insert_crop_y_image_1 = 0;
		var insert_crop_w_image_1 = 200;
		var insert_crop_h_image_1 = 200;		
		<% end %>
				
		var insert_crop_x2_image_1 = insert_crop_x_image_1 + insert_crop_w_image_1;
		var insert_crop_y2_image_1 = insert_crop_y_image_1 + insert_crop_h_image_1;
		
        function showPreviewImage1(coords)
        {
            if (parseInt(coords.w) > 0)
            {
            	// alert('coords : ' + coords);
            	
                // var rx = 200 / coords.w;
                // var ry = 200 / coords.h;
		    	$('#id_crop_x_image_1').val(coords.x);
		    	$('#id_crop_y_image_1').val(coords.y);
		    	$('#id_crop_w_image_1').val(coords.w);
		    	$('#id_crop_h_image_1').val(coords.h);

                // jQuery('#preview_user_200').css({
					// width: Math.round(200 / coords.w * $('#cropbox_user').width()) + 'px',
				    // height: Math.round(200 / coords.h * $('#cropbox_user').height()) + 'px',
				    // marginLeft: '-' + Math.round(200 / coords.w * coords.x) + 'px',
				    // marginTop: '-' + Math.round(200 / coords.h * coords.y) + 'px'
                    // // width: Math.round(rx * 200) + 'px',
                    // // height: Math.round(ry * 200) + 'px',
                    // // marginLeft: '-' + Math.round(rx * coords.x) + 'px',
                    // // marginTop: '-' + Math.round(ry * coords.y) + 'px'
                // });
                jQuery('#preview_image_1_200').css({
					width: Math.round(200 / coords.w * $('#cropbox_image_1').width()) + 'px',
				    height: Math.round(200 / coords.h * $('#cropbox_image_1').height()) + 'px',
				    marginLeft: '-' + Math.round(200 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(200 / coords.h * coords.y) + 'px'
                    // width: Math.round(rx * 200) + 'px',
                    // height: Math.round(ry * 200) + 'px',
                    // marginLeft: '-' + Math.round(rx * coords.x) + 'px',
                    // marginTop: '-' + Math.round(ry * coords.y) + 'px'
                });                
                jQuery('#preview_image_1_100').css({
					width: Math.round(100 / coords.w * $('#cropbox_image_1').width()) + 'px',
				    height: Math.round(100 / coords.h * $('#cropbox_image_1').height()) + 'px',
				    marginLeft: '-' + Math.round(100 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(100 / coords.h * coords.y) + 'px'
                });
                jQuery('#preview_image_1_50').css({
					width: Math.round(50 / coords.w * $('#cropbox_image_1').width()) + 'px',
				    height: Math.round(50 / coords.h * $('#cropbox_image_1').height()) + 'px',
				    marginLeft: '-' + Math.round(50 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(50 / coords.h * coords.y) + 'px'
                });
                jQuery('#preview_image_1_34').css({
					width: Math.round(34 / coords.w * $('#cropbox_image_1').width()) + 'px',
				    height: Math.round(34 / coords.h * $('#cropbox_image_1').height()) + 'px',
				    marginLeft: '-' + Math.round(34 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(34 / coords.h * coords.y) + 'px'
                });
                
            }
        }
        
		// jQuery(window).load(function(){
			// jQuery("#cropbox_profile").each(function() {
			  // // image_to_crop = $(this);
			  // image_to_crop = $("#cropbox_profile");
			  // image_to_crop.Jcrop({
	          	// aspectRatio: 1,
	        	// setSelect: [0, 0, 600, 600],
	            // onSelect: function(coords){showPreview(image_to_crop, coords);},
			    // onChange: function(coords){showPreview(image_to_crop, coords);}
			// }
        // });
		
		// jQuery(window).load(function(){
		jQuery(document).ready(function() {
			// coords.x = insert_crop_x;
			// coords.y = insert_crop_y;
			// coords.w = insert_crop_w;
			// coords.h = insert_crop_h;
			
			var image_to_crop = $("#cropbox_image_1");
			image_to_crop.Jcrop({
            // jQuery('#cropbox_profile').Jcrop({
                aspectRatio: 1,
            	// setSelect: [0, 0, 600, 600],
            	setSelect: [insert_crop_x_image_1, insert_crop_y_image_1, insert_crop_x2_image_1, insert_crop_y2_image_1],
            	// setSelect: [ 238, 0, 300, 300 ],
            	
	            // onSelect: function(coords){showPreview(coords);},
			    // onChange: function(coords){showPreview(coords);}
			    
	            // onSelect: function(coords){showPreview(image_to_crop, coords);},
			    // onChange: function(coords){showPreview(image_to_crop, coords);}
                onSelect: showPreviewImage1,
                onChange: showPreviewImage1                
            });
        });
		
		
		// $(window).load( function() {
		$(document).ready(function () {				

			// alert('insert_crop_x : ' + insert_crop_x);
			
			
		});

		
	</script>


