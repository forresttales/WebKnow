

<!-- <style>
	
		.jqmWindow-5 {
		    display: none;
		    position: fixed;
		    left: 50%;
		    margin-left: -350px;
		    width: 700px;
			height: 700px;		    
		    background-color: #EEE;
		    color: #333;
		    border: 1px solid black;
		    padding: 0px;
		}		
	
		.jqmWindow-1 {
		    display: none;
		    position: fixed;
		    left: 50%;
		    margin-left: -350px;
		    width: 700px;
			height: 400px;		    
		    background-color: #EEE;
		    color: #333;
		    border: 1px solid black;
		    padding: 0px;
		}		
	
		.jqmWindow-2 {
		    display: none;
		    position: fixed;
		    left: 50%;
		    margin-left: -350px;
		    width: 900px;
			height: 660px;		    
		    background-color: #EEE;
		    color: #333;
		    border: 1px solid black;
		    padding: 0px;
		}		
		.figure-logo-generic {
		}
		.figure-logo-generic:hover {
			cursor: pointer;
		}
	
</style> -->

<!-- <style>
	
	.dvLoading {
		background: #eee url("/assets/loader_9_w45_h45.gif") no-repeat center center;
		box-shadow: 1px 1px 8px 2px #aaa;
		height: 45px;
		width: 45px;
		/*position: fixed;*/
		position: relative;
		/*z-index: 1000;*/
		/*left: 50%;
		top: 50%;
		margin: -25px 0 0 -25px;*/
		margin: 0 auto;		
	}	
	.dvLoading-display-none {
		display: none;
	}

</style> -->

								<div class="jqmWindow jqmWindow-3" id="dialog_2">
							   		<div class="table-dl-form-2">
							   			<div class="row">
							   				<div class="cell-100percent">
							   					<div id="close_form2" class="form-edit-close jqmClose" tabindex="1">
							   						<img src="/assets/x_close_w20_h20.png" alt="X" height="20px">
							   					</div>
							   					<div style="clear: both;"></div>
							   				</div>
					   					</div>
									</div>				   				
									<div class="pad-left-20">
										<% if @publisher_product_logo %>
											<div style="display: inline-block;">
												<%= image_tag @publisher_product_logo.image_url(:image_600_600), id: "cropbox_logo" %>
											</div>
											<div style="display: inline-block; vertical-align: top;">
												<h4>Preview</h4>
												<div style="width:200px; height:200px; overflow:hidden">
												  <%= image_tag @publisher_product_logo.image_url(:image_600_600), :id => "preview_logo_200" %>
												</div>
												<div style="height: 4px"></div>
												<div style="width:100px; height:100px; overflow:hidden">
												  <%= image_tag @publisher_product_logo.image_url(:image_600_600), :id => "preview_logo_100" %>
												</div>
												<div style="height: 4px"></div>
												<div style="width:50px; height:50px; overflow:hidden">
												  <%= image_tag @publisher_product_logo.image_url(:image_600_600), :id => "preview_logo_50" %>
												</div>
												<div style="height: 4px"></div>
												<div style="width:34px; height:34px; overflow:hidden">
												  <%= image_tag @publisher_product_logo.image_url(:image_600_600), :id => "preview_logo_34" %>
												</div>
												<div style="height: 4px"></div>
												<%= form_tag( crop_commit_publisher_product_logos_path ) do %>
												  	<%= text_field_tag :crop_x, params["crop_x"], id: "id_crop_x", class: "input-crop" %><br>
												  	<%= text_field_tag :crop_y, params["crop_y"], id: "id_crop_y", class: "input-crop" %><br>
												  	<%= text_field_tag :crop_w, params["crop_w"], id: "id_crop_w", class: "input-crop" %><br>
												  	<%= text_field_tag :crop_h, params["crop_h"], id: "id_crop_h", class: "input-crop" %><br>
													<%= hidden_field_tag "image_id", @publisher_product_logo.id %>
												    <%= submit_tag "Save", class: '' %>
												<% end %>	
											</div>
										<% else %>
											<div> no publisher_product_logo</div>
										<% end %>		
									</div>
								</div>

								<% if @publisher_product_logo %>   				
								
									<div class="profile-grid profile-cs-style-3">
										<!-- <figure id="figure_product" class="profile-figure dialog-5-figure"> -->
										<figure class="figure-product-logo dialog-5-figure">
										<!-- <figure id="profile_figure"> -->
											<img alt="image not appearing" src="<%= @publisher_product_logo.image_url(:image_200_200) if @publisher_product_logo.image? %>" />
											<input class="x-container-hidden" type="hidden" value="<%= @publisher_product_logo.image_url(:image_600_600) if @publisher_product_logo.image? %>" />
											<figcaption class="figcaption-2">
												<div class="tip-top-center"><%= button_to "", destroy_product_logo_publisher_product_descriptions_path( :publisher_product_logo_id => @publisher_product_logo.id), :confirm => 'Delete this photo?', :remote => true, class: 'x-container' %></div>
								                <div class="tip-content">
								                    <div class="tooltiptext">Delete</div>
								                </div>																								
											</figcaption>
											<figcaption class="figcaption-1">
												<span class="dialog-2 label-dialog-figcaption">Crop/Center small images</span>
											</figcaption>
										</figure>
									</div>

								<% else %>

									<div class="profile-grid profile-cs-style-3">
										<figure class="figure-logo-generic">
											<img alt="logo not appearing" src="../images_publisher_product_logo/add_generic_product_logo_w200_h200.png" />
											<!-- <img alt="logo not appearing" src="../images_avatar/avatar_generic_1_w250_h310.png" /> -->
											<figcaption class="figcaption-1">
												<span class="dialog-1 label-dialog-figcaption">Add a photo</span>
											</figcaption>
										</figure>
									</div>
								
								<% end %>


<% if false %>
										<% if @publisher_product_logo %>   				
										
											<!-- <#% for publisher_journalposter_logo in @publisher_journalposter.publisher_journalposter_logos %#> -->
							   				<div class="">
												<ul class="image-grid image-grid-caption image-grid-caption-height-50">
													<li>
														<figure class="figure-box-200-200">
															<img alt="image not appearing" src="<%= @publisher_product_logo.image_url(:image_200_200) if @publisher_product_logo.image? %>" />
															<figcaption class="figcaption-1">
																<span><%= link_to "Edit", publisher_product_logos_path(:publisher_id => @publisher_id, :publisher_product_id => @publisher_product_id) %></span>
																<br>
																<span><%= link_to "Delete", destroy_publisher_product_logo_publisher_product_descriptions_path( :publisher_id => @publisher_id, :publisher_product_id => @publisher_product_id, :publisher_product_logo_id => @publisher_product_logo.id, :descr => 1 ), :confirm => 'Delete this image?', :method => :post %></span>
															</figcaption>
														</figure>
													</li>
												</ul>
										        <!-- image_tag publisher_journalposter_logo.image_url(:logo) if publisher_journalposter_logo.image?  -->
								   			</div>
								   			<div class="image-grid-text-1-container">
												<span><%= link_to "Edit", publisher_product_logos_path(:publisher_id => @publisher_id, :publisher_product_id => @publisher_product_id) %></span>
												&nbsp;&nbsp;&nbsp;			   				
								   				<span><%= link_to "Delete", destroy_image_publisher_product_logos_path( :publisher_id => @publisher_id, :publisher_product_id => @publisher_product_id, :publisher_product_logo_id => @publisher_product_logo.id, :descr => 1 ), :confirm => 'Delete this image?', :method => :post %></span>
												<!-- <span><#%= link_to 'Delete', publisher_product_images_path, :confirm => 'Delete this image?', :method => :delete, :params => { :publisher_id => @publisher_id, :publisher_product_id => @publisher_product_id, :id => @publisher_product_image.id }, :class => '' %#></span> -->						   				
												<!-- <span><#%= link_to '&laquo; Delete image &raquo;'.html_safe, publisher_product_images_path, :confirm => 'Delete this image?', :method => :delete, :params => {:publisher_product_id => @publisher_product_id}, :class => 'links' %#></span> -->						   				
								   			</div>
											<!-- <#% end %#> -->
		
										<% else %>
		
							   				<div class="">
												<ul class="image-grid image-grid-caption image-grid-caption-height-50">
													<li>
														<figure class="figure-box-200-200">
															<img alt="logo not appearing" src="../images_publisher_product_logo/add_generic_product_logo_w200_h200.png" />
															<figcaption class="figcaption-1">
																<span><%= link_to "Add a product logo image", new_publisher_product_logo_path(:publisher_id => @publisher_id, :publisher_product_id => @publisher_product_id, :descr => 1) %></span>	
															</figcaption>
														</figure>
													</li>
												</ul>
								   			</div>
								   			<div class="image-grid-text-2-container">
								   				<span><button type="button" class="product-link-btn" onclick="openEditProductLogo()">&laquo; Add a logo image &raquo;</button></span>
								   				<!-- <span><#%= link_to "&laquo; Add a product logo image &raquo;".html_safe, new_publisher_product_logo_path(:publisher_id => @publisher_id, :publisher_product_id => @publisher_product_id, :descr => 1) %#></span> -->
								   			</div>
								   			<!-- <div class="cell-400">
												<span><#%= link_to '&laquo; Add a photo &raquo;'.html_safe, new_publisher_profile_image_path(:publisher_id => @publisher_id), :class => 'links' %#></span>
								   			</div> -->
										<% end %>
<% end %>


	<script>

        function showPreviewLogo(coords)
        {
            if (parseInt(coords.w) > 0)
            {
                // var rx = 200 / coords.w;
                // var ry = 200 / coords.h;
		    	$('#id_crop_x').val(coords.x);
		    	$('#id_crop_y').val(coords.y);
		    	$('#id_crop_w').val(coords.w);
		    	$('#id_crop_h').val(coords.h);

                jQuery('#preview_logo_200').css({
					width: Math.round(200 / coords.w * $('#cropbox_logo').width()) + 'px',
				    height: Math.round(200 / coords.h * $('#cropbox_logo').height()) + 'px',
				    marginLeft: '-' + Math.round(200 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(200 / coords.h * coords.y) + 'px'
                    // width: Math.round(rx * 200) + 'px',
                    // height: Math.round(ry * 200) + 'px',
                    // marginLeft: '-' + Math.round(rx * coords.x) + 'px',
                    // marginTop: '-' + Math.round(ry * coords.y) + 'px'
                });
                jQuery('#preview_logo_100').css({
					width: Math.round(100 / coords.w * $('#cropbox_logo').width()) + 'px',
				    height: Math.round(100 / coords.h * $('#cropbox_logo').height()) + 'px',
				    marginLeft: '-' + Math.round(100 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(100 / coords.h * coords.y) + 'px'
                });
                jQuery('#preview_logo_50').css({
					width: Math.round(50 / coords.w * $('#cropbox_logo').width()) + 'px',
				    height: Math.round(50 / coords.h * $('#cropbox_logo').height()) + 'px',
				    marginLeft: '-' + Math.round(50 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(50 / coords.h * coords.y) + 'px'
                });
                jQuery('#preview_logo_34').css({
					width: Math.round(34 / coords.w * $('#cropbox_logo').width()) + 'px',
				    height: Math.round(34 / coords.h * $('#cropbox_logo').height()) + 'px',
				    marginLeft: '-' + Math.round(34 / coords.w * coords.x) + 'px',
				    marginTop: '-' + Math.round(34 / coords.h * coords.y) + 'px'
                });
                
            }
        }
        
		// jQuery(window).load(function(){
			// jQuery("#cropbox_profile").each(function() {
			  // // image_to_crop = $(this);
			  // image_to_crop = $("#cropbox_profile");
			  // image_to_crop.Jcrop({
	          	// aspectRatio: 1,
	        	// setSelect: [0, 0, 600, 600],
	            // onSelect: function(coords){showPreview(image_to_crop, coords);},
			    // onChange: function(coords){showPreview(image_to_crop, coords);}
			// }
        // });
		
		// jQuery(window).load(function(){
		jQuery(document).ready(function() {
			image_to_crop = $("#cropbox_logo");
			image_to_crop.Jcrop({
            // jQuery('#cropbox_profile').Jcrop({
                aspectRatio: 1,
            	setSelect: [0, 0, 600, 600],
	            onSelect: function(coords){showPreviewLogo(coords);},
			    onChange: function(coords){showPreviewLogo(coords);}
	            // onSelect: function(coords){showPreview(image_to_crop, coords);},
			    // onChange: function(coords){showPreview(image_to_crop, coords);}
                // onSelect: showPreview,
                // onChange: showPreview                
            });
        });

        		
	</script>


	<script>

		// $(document).on('click','.dialog-2', {} ,function(e){
			// alert('crop');
			// $("#dialog_2").jqmShow();
		// });	


		// function closeShowPhotoPrimary() {
			// $("#close_form5").trigger('click');
		// };	  

		function closeCropLogoImage() {
			$("#close_form2").trigger('click');
		};	  

		// function closeAddImagePrimary() {
			// $("#close_form1").trigger('click');
		// };	  
		// function closeCropImage() {
			// $("#close_form2").trigger('click');
		// };	  

		// $(window).load( function() {
		$(document).ready( function () {				
		
			// $('#dvLoading').fadeOut(10000);
		
			$("#new_publisher_product_logo").on('submit', function() {
				$("#dvLoading").removeClass("dvLoading-display-none");
				// $('#dvLoading').fadeOut(2000);				
			});	
		

			var img = $(".figure-logo-generic img");
			$("<img/>")
	    		.attr("src", $(img).attr("src"))
	    		.load(function() {
	        		var img_width = this.width; 
	        		$(".figure-logo-generic").css({
	        			width : this.width
	        	});	        		
	    	});		
		
			var img = $(".figure-product-logo img");
			$("<img/>")
	    		.attr("src", $(img).attr("src"))
	    		.load(function() {
	        		var img_width = this.width; 
	        		$(".figure-product-logo").css({
	        			width : this.width
	        	});	        		
	    	});		

		
			$(".figure-logo-generic").on('click', function() {
				$(".dialog-1").trigger('click');
			});
			$(".dialog-1").on('click', function() {
				$("#dialog_1").focus();
				$("#dialog_1").jqmShow();
			});
			$('#dialog_1').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', '-740px');
					hash.w.css('opacity', 1.0).fadeIn(200);
					hash.w.show();
					$('#dialog_1').animate(
						{bottom:'-=800', top:'+=800'}, 
						500, 
						'easeInOutCirc', 
						function() {
							$('#dialog_1').animate(
								{bottom:'+=4', top:'-=4'}, 
								100, 
								'easeInBounce', 
								function() {
								}
							);
							// $('#dl_email').focus();
						}
					);
				}
			}); 		


			$(".dialog-2").on('click', function() {
				$("#dialog_2").jqmShow();
			});
			$('#dialog_2').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', '-740px');
					hash.w.css('opacity', 1.0).fadeIn(200);
					// hash.w.show();
					$('#dialog_2').animate(
						{bottom:'-=800', top:'+=800'}, 
						500, 
						'easeInOutCirc', 
						function() {
							$('#dialog_2').animate(
								{bottom:'+=4', top:'-=4'}, 
								100, 
								'easeInBounce', 
								function() {
								}
							);
							// $('#dl_email').focus();
						}
					);
				}
			}); 		


			$(".dialog-5-figure").on('click', function(e) {
				if ( e.target.nodeName == "IMG" ) {
					var this_src = $(this).find("input.x-container-hidden").attr("value");
					$("#profile_figure_dialog").find("img").attr("src", this_src );
					var this_delete = $(this).find("div.tip-top-center").html();
					$("#profile_figure_dialog").find("div.tip-top-center").html(this_delete);
					$("#dialog_5").jqmShow();	
				}
			});
			$('#dialog_5').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', '60px');
					hash.w.css('opacity', 1.0).fadeIn(200);
					var img = $("#profile_figure_dialog img");
					$("<img/>")
			    		.attr("src", $(img).attr("src"))
			    		.load(function() {
			        		img_width = this.width; 
			        		$("#profile_figure_dialog").css({
			        			width : this.width
			        	});	        		
			    	});		
				}
			}); 		




		});
	  

	</script>		
