




								<% if @publisher_product2_image %>   				
								
									<div class="profile-grid profile-cs-style-3">
										<!-- <figure id="figure_product" class="profile-figure dialog-5-figure"> -->
										<figure class="figure-product2-image">
										<!-- <figure id="profile_figure"> -->
											<img alt="image not appearing" src="<%= @publisher_product2_image.image_url(:image_325_210) if @publisher_product2_image.image? %>" />
											<input class="x-container-hidden" type="hidden" value="<%= @publisher_product2_image.image_url if @publisher_product2_image.image? %>" />
											<figcaption class="figcaption-2">
												<div class="tip-top-center"><%= button_to "", destroy_product2_image_publisher_product_descriptions_path( :publisher_product2_image_id => @publisher_product2_image.id), :confirm => 'Delete this image?', :remote => true, class: 'x-container' %></div>
								                <div class="tip-content">
								                    <div class="tooltiptext">Delete</div>
								                </div>																								
											</figcaption>
											<figcaption class="figcaption-1">
												<span class="dialog-12 label-dialog-figcaption">Crop/Center small images</span>
											</figcaption>
										</figure>
									</div>

								<% else %>

									<div class="profile-grid profile-cs-style-3">
										<figure class="figure-product2-image-generic">
											<img alt="logo not appearing" src="../images_publisher_product2_image/add_generic_product_image_w325_h210.png" />
											<!-- <img alt="logo not appearing" src="../images_avatar/avatar_generic_1_w250_h310.png" /> -->
											<figcaption class="figcaption-1">
												<span class="dialog-31 label-dialog-figcaption">Add a photo</span>
											</figcaption>
										</figure>
									</div>
								
								<% end %>



	<script>

        function showPreviewProduct2Image(coords)
        {
            // if (parseInt(coords.w) > 0)
            // {
                // // var rx = 200 / coords.w;
                // // var ry = 200 / coords.h;
		    	// $('#id_crop_x').val(coords.x);
		    	// $('#id_crop_y').val(coords.y);
		    	// $('#id_crop_w').val(coords.w);
		    	// $('#id_crop_h').val(coords.h);
// 
                // jQuery('#preview_logo_200').css({
					// width: Math.round(200 / coords.w * $('#cropbox_logo').width()) + 'px',
				    // height: Math.round(200 / coords.h * $('#cropbox_logo').height()) + 'px',
				    // marginLeft: '-' + Math.round(200 / coords.w * coords.x) + 'px',
				    // marginTop: '-' + Math.round(200 / coords.h * coords.y) + 'px'
                    // // width: Math.round(rx * 200) + 'px',
                    // // height: Math.round(ry * 200) + 'px',
                    // // marginLeft: '-' + Math.round(rx * coords.x) + 'px',
                    // // marginTop: '-' + Math.round(ry * coords.y) + 'px'
                // });
                // jQuery('#preview_logo_100').css({
					// width: Math.round(100 / coords.w * $('#cropbox_logo').width()) + 'px',
				    // height: Math.round(100 / coords.h * $('#cropbox_logo').height()) + 'px',
				    // marginLeft: '-' + Math.round(100 / coords.w * coords.x) + 'px',
				    // marginTop: '-' + Math.round(100 / coords.h * coords.y) + 'px'
                // });
                // jQuery('#preview_logo_50').css({
					// width: Math.round(50 / coords.w * $('#cropbox_logo').width()) + 'px',
				    // height: Math.round(50 / coords.h * $('#cropbox_logo').height()) + 'px',
				    // marginLeft: '-' + Math.round(50 / coords.w * coords.x) + 'px',
				    // marginTop: '-' + Math.round(50 / coords.h * coords.y) + 'px'
                // });
                // jQuery('#preview_logo_34').css({
					// width: Math.round(34 / coords.w * $('#cropbox_logo').width()) + 'px',
				    // height: Math.round(34 / coords.h * $('#cropbox_logo').height()) + 'px',
				    // marginLeft: '-' + Math.round(34 / coords.w * coords.x) + 'px',
				    // marginTop: '-' + Math.round(34 / coords.h * coords.y) + 'px'
                // });
//                 
            // }
        }
        
		// jQuery(window).load(function(){
			// jQuery("#cropbox_profile").each(function() {
			  // // image_to_crop = $(this);
			  // image_to_crop = $("#cropbox_profile");
			  // image_to_crop.Jcrop({
	          	// aspectRatio: 1,
	        	// setSelect: [0, 0, 600, 600],
	            // onSelect: function(coords){showPreview(image_to_crop, coords);},
			    // onChange: function(coords){showPreview(image_to_crop, coords);}
			// }
        // });
		
		// jQuery(window).load(function(){
		// jQuery(document).ready(function() {
			// // image_to_crop = $("#cropbox_logo");
			// // image_to_crop.Jcrop({
            // // // jQuery('#cropbox_profile').Jcrop({
                // // aspectRatio: 1,
            	// // setSelect: [0, 0, 600, 600],
	            // // onSelect: function(coords){showPreviewLogo(coords);},
			    // // onChange: function(coords){showPreviewLogo(coords);}
	            // // // onSelect: function(coords){showPreview(image_to_crop, coords);},
			    // // // onChange: function(coords){showPreview(image_to_crop, coords);}
                // // // onSelect: showPreview,
                // // // onChange: showPreview                
            // // });
        // });

        		
	</script>


	<script>

		function closeCropProduct2Image() {
			$("#close_form32").trigger('click');
		};	  

		// function closeShowProduct2Image() {
			// $("#close_form22").trigger('click');			
		// };	  		
		function closeAddProduct2Image() {
			$("#close_form31").trigger('click');
			$("#dvLoading_31").addClass("dvLoading-display-none");			
		};	  

		// function closeCropImage() {
			// $("#close_form2").trigger('click');
		// };	  

		// $(window).load( function() {
		$(document).ready( function () {				
		
		
			$("#new_publisher_product2_image").on('submit', function() {
				$("#dvLoading_31").removeClass("dvLoading-display-none");
				// $('#dvLoading').fadeOut(2000);				
			});	
		

			var img = $(".figure-product2-image-generic img");
			$("<img/>")
	    		.attr("src", $(img).attr("src"))
	    		.load(function() {
	        		var img_width = this.width; 
	        		$(".figure-product2-image-generic").css({
	        			width : this.width
	        	});	        		
	    	});		
		
			var img = $(".figure-product2-image img");
			$("<img/>")
	    		.attr("src", $(img).attr("src"))
	    		.load(function() {
	        		var img_width = this.width; 
	        		$(".figure-product2-image").css({
	        			width : this.width
	        	});	        		
	    	});		


			$(".figure-product2-image").on('click', function(e) {
				if ( e.target.nodeName == "IMG" ) {
					var this_src = $(this).find("input.x-container-hidden").attr("value");
					$("#figure_dialog_32").find("img").attr("src", this_src );
					var this_delete = $(this).find("div.tip-top-center").html();
					$("#figure_dialog_32").find("div.tip-top-center").html(this_delete);
					$("#dialog_32").jqmShow();	
				}
			});
			$('#dialog_32').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', '60px');
					hash.w.css('opacity', 1.0).fadeIn(200);
					var img = $("#figure_dialog_32 img");
					$("<img/>")
			    		.attr("src", $(img).attr("src"))
			    		.load(function() {
			        		// img_width = this.width; 
			        		$("#figure_dialog_32").css({
			        			width : this.width
			        	});	        		
			    	});		
				}
			}); 		




		
			$(".figure-product2-image-generic").on('click', function() {
				$(".dialog-31").trigger('click');
			});
			$(".dialog-31").on('click', function() {
				$("#dialog_31").focus();
				$("#dialog_31").jqmShow();
			});
			$('#dialog_31').jqm({
				onShow: function(hash) {
					hash.o.prependTo('body');
					hash.w.css('top', '-740px');
					hash.w.css('opacity', 1.0).fadeIn(200);
					hash.w.show();
					$('#dialog_31').animate(
						{bottom:'-=800', top:'+=800'}, 
						500, 
						'easeInOutCirc', 
						function() {
							$('#dialog_31').animate(
								{bottom:'+=4', top:'-=4'}, 
								100, 
								'easeInBounce', 
								function() {
								}
							);
							// $('#dl_email').focus();
						}
					);
				}
			}); 		




            $('.tip').each(function() {
                var tipContent = $(this).next('.tip-content').html();
                $(this).qtip({
                	style: { classes: 'tooltip-text-1' },
                    content: tipContent,
                    show: 'mouseover',
                    hide: 'mouseout'
                })
            });			
			
            $('.tip-bottom-center').each(function() {
                var tipContent = $(this).next('.tip-content').html();
                $(this).qtip({
                	style: { classes: 'tooltip-text-1' },
                    content: tipContent,
                    show: 'mouseover',
                    hide: 'mouseout',
				    position: {
				        my: 'top center',
				        at: 'bottom center'
				        // target: $('.tip-top-center')
    				}                    
                })
            });			

            $('.tip-top-center').each(function() {
                var tipContent = $(this).next('.tip-content').html();
                $(this).qtip({
                	style: { classes: 'tooltip-text-1' },
                    content: tipContent,
                    show: 'mouseover',
                    hide: 'mouseout',
				    position: {
				        my: 'bottom center',
				        at: 'top center'
				        // target: $('.tip-top-center')
    				}                    
                })
            });			


			
		
		});
	  

	</script>		
